import{s as $t,u as $r,v as Gr,w as Xr,x as jr,y as Eo,C as on,z as zn,A as Cr,r as Xi,D as _s,E as ln,B as Cn,b as Dn,n as et,o as Ba,F as cr}from"../chunks/scheduler.bwMKOKNs.js";import{S as Gt,i as Xt,e as V,s as le,c as z,a as oe,d as K,f as ce,o as L,g as Ce,h as P,n as Pe,q as Va,l as Re,m as za,A as ji,B as xs,y as Ot,z as ge,C as Be,u as St,v as Ct,w as Mt,x as Tt,D as ur,k as bs,t as Zr,b as Kr}from"../chunks/index.CNz_BNRL.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.BrFDZcDr.js";function Zi(e,t){const n={},r={},a={$$scope:1};let s=e.length;for(;s--;){const o=e[s],i=t[s];if(i){for(const l in o)l in i||(r[l]=1);for(const l in i)a[l]||(n[l]=i[l],a[l]=1);e[s]=i}else for(const l in o)a[l]=1}for(const o in r)o in n||(n[o]=void 0);return n}const Ki=e=>({}),ws=e=>({});function ks(e){let t,n,r;const a=e[17].panel,s=$r(a,e,e[16],ws);return{c(){t=V("div"),s&&s.c(),this.h()},l(o){t=z(o,"DIV",{class:!0,role:!0,"aria-labelledby":!0,tabindex:!0});var i=oe(t);s&&s.l(i),i.forEach(K),this.h()},h(){L(t,"class",n="tab-panel "+e[2]),L(t,"role","tabpanel"),L(t,"aria-labelledby",e[1]),L(t,"tabindex","0")},m(o,i){Ce(o,t,i),s&&s.m(t,null),r=!0},p(o,i){s&&s.p&&(!r||i&65536)&&Gr(s,a,o,o[16],r?jr(a,o[16],i,Ki):Xr(o[16]),ws),(!r||i&4&&n!==(n="tab-panel "+o[2]))&&L(t,"class",n),(!r||i&2)&&L(t,"aria-labelledby",o[1])},i(o){r||(Pe(s,o),r=!0)},o(o){Re(s,o),r=!1},d(o){o&&K(t),s&&s.d(o)}}}function Qi(e){let t,n,r,a,s,o;const i=e[17].default,l=$r(i,e,e[16],null);let c=e[5].panel&&ks(e);return{c(){t=V("div"),n=V("div"),l&&l.c(),a=le(),c&&c.c(),this.h()},l(u){t=z(u,"DIV",{class:!0,"data-testid":!0});var f=oe(t);n=z(f,"DIV",{class:!0,role:!0,"aria-labelledby":!0});var d=oe(n);l&&l.l(d),d.forEach(K),a=ce(f),c&&c.l(f),f.forEach(K),this.h()},h(){L(n,"class",r="tab-list "+e[3]),L(n,"role","tablist"),L(n,"aria-labelledby",e[0]),L(t,"class",s="tab-group "+e[4]),L(t,"data-testid","tab-group")},m(u,f){Ce(u,t,f),P(t,n),l&&l.m(n,null),P(t,a),c&&c.m(t,null),o=!0},p(u,[f]){l&&l.p&&(!o||f&65536)&&Gr(l,i,u,u[16],o?jr(i,u[16],f,null):Xr(u[16]),null),(!o||f&8&&r!==(r="tab-list "+u[3]))&&L(n,"class",r),(!o||f&1)&&L(n,"aria-labelledby",u[0]),u[5].panel?c?(c.p(u,f),f&32&&Pe(c,1)):(c=ks(u),c.c(),Pe(c,1),c.m(t,null)):c&&(Va(),Re(c,1,1,()=>{c=null}),za()),(!o||f&16&&s!==(s="tab-group "+u[4]))&&L(t,"class",s)},i(u){o||(Pe(l,u),Pe(c),o=!0)},o(u){Re(l,u),Re(c),o=!1},d(u){u&&K(t),l&&l.d(u),c&&c.d()}}}const Ji="space-y-4",el="flex overflow-x-auto hide-scrollbar",tl="";function nl(e,t,n){let r,a,s,{$$slots:o={},$$scope:i}=t;const l=Eo(o);let{justify:c="justify-start"}=t,{border:u="border-b border-surface-400-500-token"}=t,{active:f="border-b-2 border-surface-900-50-token"}=t,{hover:d="hover:variant-soft"}=t,{flex:h="flex-none"}=t,{padding:x="px-4 py-2"}=t,{rounded:m="rounded-tl-container-token rounded-tr-container-token"}=t,{spacing:A="space-y-1"}=t,{regionList:E=""}=t,{regionPanel:T=""}=t,{labelledby:M=""}=t,{panel:S=""}=t;return on("active",f),on("hover",d),on("flex",h),on("padding",x),on("rounded",m),on("spacing",A),e.$$set=p=>{n(18,t=zn(zn({},t),Cr(p))),"justify"in p&&n(6,c=p.justify),"border"in p&&n(7,u=p.border),"active"in p&&n(8,f=p.active),"hover"in p&&n(9,d=p.hover),"flex"in p&&n(10,h=p.flex),"padding"in p&&n(11,x=p.padding),"rounded"in p&&n(12,m=p.rounded),"spacing"in p&&n(13,A=p.spacing),"regionList"in p&&n(14,E=p.regionList),"regionPanel"in p&&n(15,T=p.regionPanel),"labelledby"in p&&n(0,M=p.labelledby),"panel"in p&&n(1,S=p.panel),"$$scope"in p&&n(16,i=p.$$scope)},e.$$.update=()=>{n(4,r=`${Ji} ${t.class??""}`),e.$$.dirty&16576&&n(3,a=`${el} ${c} ${u} ${E}`),e.$$.dirty&32768&&n(2,s=`${tl} ${T}`)},t=Cr(t),[M,S,s,a,r,l,c,u,f,d,h,x,m,A,E,T,i,o]}class rl extends Gt{constructor(t){super(),Xt(this,t,nl,Qi,$t,{justify:6,border:7,active:8,hover:9,flex:10,padding:11,rounded:12,spacing:13,regionList:14,regionPanel:15,labelledby:0,panel:1})}}const al=e=>({}),Ss=e=>({});function Cs(e){let t,n;const r=e[22].lead,a=$r(r,e,e[21],Ss);return{c(){t=V("div"),a&&a.c(),this.h()},l(s){t=z(s,"DIV",{class:!0});var o=oe(t);a&&a.l(o),o.forEach(K),this.h()},h(){L(t,"class","tab-lead")},m(s,o){Ce(s,t,o),a&&a.m(t,null),n=!0},p(s,o){a&&a.p&&(!n||o[0]&2097152)&&Gr(a,r,s,s[21],n?jr(r,s[21],o,al):Xr(s[21]),Ss)},i(s){n||(Pe(a,s),n=!0)},o(s){Re(a,s),n=!1},d(s){s&&K(t),a&&a.d(s)}}}function sl(e){let t,n,r,a,s,o,i,l,c,u,f,d,h,x,m,A=[{type:"radio"},{name:e[1]},{__value:e[2]},e[11](),{tabindex:"-1"}],E={};for(let p=0;p<A.length;p+=1)E=zn(E,A[p]);let T=e[12].lead&&Cs(e);const M=e[22].default,S=$r(M,e,e[21],null);return h=ji(e[30][0]),{c(){t=V("label"),n=V("div"),r=V("div"),a=V("input"),s=le(),o=V("div"),T&&T.c(),i=le(),l=V("div"),S&&S.c(),this.h()},l(p){t=z(p,"LABEL",{class:!0,title:!0});var v=oe(t);n=z(v,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-controls":!0,"aria-selected":!0,tabindex:!0});var D=oe(n);r=z(D,"DIV",{class:!0});var U=oe(r);a=z(U,"INPUT",{type:!0,name:!0,tabindex:!0}),U.forEach(K),s=ce(D),o=z(D,"DIV",{class:!0});var I=oe(o);T&&T.l(I),i=ce(I),l=z(I,"DIV",{class:!0});var F=oe(l);S&&S.l(F),F.forEach(K),I.forEach(K),D.forEach(K),v.forEach(K),this.h()},h(){xs(a,E),L(r,"class","h-0 w-0 overflow-hidden"),L(l,"class","tab-label"),L(o,"class",c="tab-interface "+e[8]),L(n,"class",u="tab "+e[7]),L(n,"data-testid","tab"),L(n,"role","tab"),L(n,"aria-controls",e[4]),L(n,"aria-selected",e[5]),L(n,"tabindex",f=e[5]?0:-1),L(t,"class",e[9]),L(t,"title",e[3]),h.p(a)},m(p,v){Ce(p,t,v),P(t,n),P(n,r),P(r,a),a.autofocus&&a.focus(),e[28](a),a.checked=a.__value===e[0],P(n,s),P(n,o),T&&T.m(o,null),P(o,i),P(o,l),S&&S.m(l,null),d=!0,x||(m=[Ot(a,"change",e[29]),Ot(a,"click",e[26]),Ot(a,"change",e[27]),Ot(n,"keydown",e[10]),Ot(n,"keydown",e[23]),Ot(n,"keyup",e[24]),Ot(n,"keypress",e[25])],x=!0)},p(p,v){xs(a,E=Zi(A,[{type:"radio"},(!d||v[0]&2)&&{name:p[1]},(!d||v[0]&4)&&{__value:p[2]},p[11](),{tabindex:"-1"}])),v[0]&1&&(a.checked=a.__value===p[0]),p[12].lead?T?(T.p(p,v),v[0]&4096&&Pe(T,1)):(T=Cs(p),T.c(),Pe(T,1),T.m(o,i)):T&&(Va(),Re(T,1,1,()=>{T=null}),za()),S&&S.p&&(!d||v[0]&2097152)&&Gr(S,M,p,p[21],d?jr(M,p[21],v,null):Xr(p[21]),null),(!d||v[0]&256&&c!==(c="tab-interface "+p[8]))&&L(o,"class",c),(!d||v[0]&128&&u!==(u="tab "+p[7]))&&L(n,"class",u),(!d||v[0]&16)&&L(n,"aria-controls",p[4]),(!d||v[0]&32)&&L(n,"aria-selected",p[5]),(!d||v[0]&32&&f!==(f=p[5]?0:-1))&&L(n,"tabindex",f),(!d||v[0]&512)&&L(t,"class",p[9]),(!d||v[0]&8)&&L(t,"title",p[3])},i(p){d||(Pe(T),Pe(S,p),d=!0)},o(p){Re(T),Re(S,p),d=!1},d(p){p&&K(t),e[28](null),T&&T.d(),S&&S.d(p),h.r(),x=!1,Xi(m)}}}const ol="text-center cursor-pointer transition-colors duration-100",il="";function ll(e,t,n){let r,a,s,o,i;const l=["group","name","value","title","controls","regionTab","active","hover","flex","padding","rounded","spacing"];let c=_s(t,l),{$$slots:u={},$$scope:f}=t;const d=Eo(u);let{group:h}=t,{name:x}=t,{value:m}=t,{title:A=""}=t,{controls:E=""}=t,{regionTab:T=""}=t,{active:M=ln("active")}=t,{hover:S=ln("hover")}=t,{flex:p=ln("flex")}=t,{padding:v=ln("padding")}=t,{rounded:D=ln("rounded")}=t,{spacing:U=ln("spacing")}=t,I;function F(y){if(["Enter","Space"].includes(y.code))y.preventDefault(),I.click();else if(y.code==="ArrowRight"){const re=I.closest(".tab-list");if(!re)return;const ae=Array.from(re.querySelectorAll(".tab")),de=I.closest(".tab");if(!de)return;const G=ae.indexOf(de),ue=G+1>=ae.length?0:G+1,C=ae[ue],ne=C==null?void 0:C.querySelector("input");C&&ne&&(ne.click(),C.focus())}else if(y.code==="ArrowLeft"){const re=I.closest(".tab-list");if(!re)return;const ae=Array.from(re.querySelectorAll(".tab")),de=I.closest(".tab");if(!de)return;const G=ae.indexOf(de),ue=G-1<0?ae.length-1:G-1,C=ae[ue],ne=C==null?void 0:C.querySelector("input");C&&ne&&(ne.click(),C.focus())}}function _(){return delete c.class,c}const w=[[]];function q(y){Cn.call(this,e,y)}function H(y){Cn.call(this,e,y)}function Q(y){Cn.call(this,e,y)}function R(y){Cn.call(this,e,y)}function $(y){Cn.call(this,e,y)}function k(y){Dn[y?"unshift":"push"](()=>{I=y,n(6,I)})}function N(){h=this.__value,n(0,h)}return e.$$set=y=>{n(32,t=zn(zn({},t),Cr(y))),n(31,c=_s(t,l)),"group"in y&&n(0,h=y.group),"name"in y&&n(1,x=y.name),"value"in y&&n(2,m=y.value),"title"in y&&n(3,A=y.title),"controls"in y&&n(4,E=y.controls),"regionTab"in y&&n(13,T=y.regionTab),"active"in y&&n(14,M=y.active),"hover"in y&&n(15,S=y.hover),"flex"in y&&n(16,p=y.flex),"padding"in y&&n(17,v=y.padding),"rounded"in y&&n(18,D=y.rounded),"spacing"in y&&n(19,U=y.spacing),"$$scope"in y&&n(21,f=y.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&5&&n(5,r=m===h),e.$$.dirty[0]&49184&&n(20,a=r?M:S),n(9,s=`${ol} ${p} ${v} ${D} ${a} ${t.class??""}`),e.$$.dirty[0]&524288&&n(8,o=`${il} ${U}`),e.$$.dirty[0]&8192&&n(7,i=`${T}`)},t=Cr(t),[h,x,m,A,E,r,I,i,o,s,F,_,d,T,M,S,p,v,D,U,a,f,u,q,H,Q,R,$,k,N,w]}class fr extends Gt{constructor(t){super(),Xt(this,t,ll,sl,$t,{group:0,name:1,value:2,title:3,controls:4,regionTab:13,active:14,hover:15,flex:16,padding:17,rounded:18,spacing:19},null,[-1,-1])}}function cl(e){let t,n="<p>Introduction to PACTA</p>";return{c(){t=V("div"),t.innerHTML=n},l(r){t=z(r,"DIV",{"data-svelte-h":!0}),ge(t)!=="svelte-qyl1yi"&&(t.innerHTML=n)},m(r,a){Ce(r,t,a)},p:et,i:et,o:et,d(r){r&&K(t)}}}class ul extends Gt{constructor(t){super(),Xt(this,t,null,cl,$t,{})}}const ka=[{sector:"Power",tech_order:["RenewablesCap","HydroCap","NuclearCap","GasCap","OilCap","CoalCap"]},{sector:"Automotive",tech_order:["Electric","Electric_HDV","FuelCell","FuelCell_HDV","Hybrid","Hybrid_HDV","ICE","ICE_HDV"]},{sector:"Oil&Gas",tech_order:["Gas","Oil"]},{sector:"Coal",tech_order:["Coal"]},{sector:"Fossil Fuels",tech_order:["Gas","Oil","Coal"]},{sector:"Cement",tech_order:["Integrated facility","Grinding"]},{sector:"Steel",tech_order:["Electric Arc Furnace","Open Hearth Furnace","Basic Oxygen Furnace"]},{sector:"Aviation",tech_order:["Freight","Passenger","Mix","Other"]}];function Lo(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function fl(e){return e.length===1&&(e=dl(e)),{left:function(t,n,r,a){for(r==null&&(r=0),a==null&&(a=t.length);r<a;){var s=r+a>>>1;e(t[s],n)<0?r=s+1:a=s}return r},right:function(t,n,r,a){for(r==null&&(r=0),a==null&&(a=t.length);r<a;){var s=r+a>>>1;e(t[s],n)>0?a=s:r=s+1}return r}}}function dl(e){return function(t,n){return Lo(e(t),n)}}fl(Lo);function hl(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function gl(e){return e===null?NaN:+e}function Nt(e,t){var n=e.length,r=-1,a,s,o;if(t==null){for(;++r<n;)if((a=e[r])!=null&&a>=a)for(s=o=a;++r<n;)(a=e[r])!=null&&(s>a&&(s=a),o<a&&(o=a))}else for(;++r<n;)if((a=t(e[r],r,e))!=null&&a>=a)for(s=o=a;++r<n;)(a=t(e[r],r,e))!=null&&(s>a&&(s=a),o<a&&(o=a));return[s,o]}function Ya(e,t){var n=e.length,r=-1,a,s;if(t==null){for(;++r<n;)if((a=e[r])!=null&&a>=a)for(s=a;++r<n;)(a=e[r])!=null&&a>s&&(s=a)}else for(;++r<n;)if((a=t(e[r],r,e))!=null&&a>=a)for(s=a;++r<n;)(a=t(e[r],r,e))!=null&&a>s&&(s=a);return s}function pl(e,t){for(var n=e.length,r=n,a=-1,s,o=0;++a<n;)isNaN(s=gl(e[a]))?--r:o+=s;if(r)return o/r}function ml(e,t){var n=e.length,r=-1,a,s;if(t==null){for(;++r<n;)if((a=e[r])!=null&&a>=a)for(s=a;++r<n;)(a=e[r])!=null&&s>a&&(s=a)}else for(;++r<n;)if((a=t(e[r],r,e))!=null&&a>=a)for(s=a;++r<n;)(a=t(e[r],r,e))!=null&&s>a&&(s=a);return s}function Mr(e,t){var n=e.length,r=-1,a,s=0;if(t==null)for(;++r<n;)(a=+e[r])&&(s+=a);else for(;++r<n;)(a=+t(e[r],r,e))&&(s+=a);return s}function yl(e){if(!(s=e.length))return[];for(var t=-1,n=ml(e,vl),r=new Array(n);++t<n;)for(var a=-1,s,o=r[t]=new Array(s);++a<s;)o[a]=e[a][t];return r}function vl(e){return e.length}function _l(){return yl(arguments)}var ca=Array.prototype.slice;function xl(e){return e}var vr=1,_r=2,Sa=3,Rn=4,Ms=1e-6;function bl(e){return"translate("+(e+.5)+",0)"}function wl(e){return"translate(0,"+(e+.5)+")"}function kl(e){return function(t){return+e(t)}}function Sl(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}function Cl(){return!this.__axis}function Qr(e,t){var n=[],r=null,a=null,s=6,o=6,i=3,l=e===vr||e===Rn?-1:1,c=e===Rn||e===_r?"x":"y",u=e===vr||e===Sa?bl:wl;function f(d){var h=r??(t.ticks?t.ticks.apply(t,n):t.domain()),x=a??(t.tickFormat?t.tickFormat.apply(t,n):xl),m=Math.max(s,0)+i,A=t.range(),E=+A[0]+.5,T=+A[A.length-1]+.5,M=(t.bandwidth?Sl:kl)(t.copy()),S=d.selection?d.selection():d,p=S.selectAll(".domain").data([null]),v=S.selectAll(".tick").data(h,t).order(),D=v.exit(),U=v.enter().append("g").attr("class","tick"),I=v.select("line"),F=v.select("text");p=p.merge(p.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),v=v.merge(U),I=I.merge(U.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),F=F.merge(U.append("text").attr("fill","currentColor").attr(c,l*m).attr("dy",e===vr?"0em":e===Sa?"0.71em":"0.32em")),d!==S&&(p=p.transition(d),v=v.transition(d),I=I.transition(d),F=F.transition(d),D=D.transition(d).attr("opacity",Ms).attr("transform",function(_){return isFinite(_=M(_))?u(_):this.getAttribute("transform")}),U.attr("opacity",Ms).attr("transform",function(_){var w=this.parentNode.__axis;return u(w&&isFinite(w=w(_))?w:M(_))})),D.remove(),p.attr("d",e===Rn||e==_r?o?"M"+l*o+","+E+"H0.5V"+T+"H"+l*o:"M0.5,"+E+"V"+T:o?"M"+E+","+l*o+"V0.5H"+T+"V"+l*o:"M"+E+",0.5H"+T),v.attr("opacity",1).attr("transform",function(_){return u(M(_))}),I.attr(c+"2",l*s),F.attr(c,l*m).text(x),S.filter(Cl).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===_r?"start":e===Rn?"end":"middle"),S.each(function(){this.__axis=M})}return f.scale=function(d){return arguments.length?(t=d,f):t},f.ticks=function(){return n=ca.call(arguments),f},f.tickArguments=function(d){return arguments.length?(n=d==null?[]:ca.call(d),f):n.slice()},f.tickValues=function(d){return arguments.length?(r=d==null?null:ca.call(d),f):r&&r.slice()},f.tickFormat=function(d){return arguments.length?(a=d,f):a},f.tickSize=function(d){return arguments.length?(s=o=+d,f):s},f.tickSizeInner=function(d){return arguments.length?(s=+d,f):s},f.tickSizeOuter=function(d){return arguments.length?(o=+d,f):o},f.tickPadding=function(d){return arguments.length?(i=+d,f):i},f}function Ml(e){return Qr(vr,e)}function qo(e){return Qr(_r,e)}function zt(e){return Qr(Sa,e)}function yn(e){return Qr(Rn,e)}var Tl={value:function(){}};function No(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new xr(n)}function xr(e){this._=e}function Al(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}xr.prototype=No.prototype={constructor:xr,on:function(e,t){var n=this._,r=Al(e+"",n),a,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((a=(e=r[s]).type)&&(a=El(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(a=(e=r[s]).type)n[a]=Ts(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Ts(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new xr(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,s;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,a=s.length;r<a;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,s=r.length;a<s;++a)r[a].value.apply(t,n)}};function El(e,t){for(var n=0,r=e.length,a;n<r;++n)if((a=e[n]).name===t)return a.value}function Ts(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=Tl,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ca="http://www.w3.org/1999/xhtml";const As={svg:"http://www.w3.org/2000/svg",xhtml:Ca,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),As.hasOwnProperty(t)?{space:As[t],local:e}:e}function Ll(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ca&&t.documentElement.namespaceURI===Ca?t.createElement(e):t.createElementNS(n,e)}}function ql(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Po(e){var t=Jr(e);return(t.local?ql:Ll)(t)}function Nl(){}function Wa(e){return e==null?Nl:function(){return this.querySelector(e)}}function Pl(e){typeof e!="function"&&(e=Wa(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var s=t[a],o=s.length,i=r[a]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),i[u]=c);return new ot(r,this._parents)}function Dl(){return[]}function Do(e){return e==null?Dl:function(){return this.querySelectorAll(e)}}function Rl(e){typeof e!="function"&&(e=Do(e));for(var t=this._groups,n=t.length,r=[],a=[],s=0;s<n;++s)for(var o=t[s],i=o.length,l,c=0;c<i;++c)(l=o[c])&&(r.push(e.call(l,l.__data__,c,o)),a.push(l));return new ot(r,a)}function Ro(e){return function(){return this.matches(e)}}function Il(e){typeof e!="function"&&(e=Ro(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var s=t[a],o=s.length,i=r[a]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&i.push(l);return new ot(r,this._parents)}function Io(e){return new Array(e.length)}function Fl(){return new ot(this._enter||this._groups.map(Io),this._parents)}function Tr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Tr.prototype={constructor:Tr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Hl(e){return function(){return e}}var Es="$";function Ol(e,t,n,r,a,s){for(var o=0,i,l=t.length,c=s.length;o<c;++o)(i=t[o])?(i.__data__=s[o],r[o]=i):n[o]=new Tr(e,s[o]);for(;o<l;++o)(i=t[o])&&(a[o]=i)}function Ul(e,t,n,r,a,s,o){var i,l,c={},u=t.length,f=s.length,d=new Array(u),h;for(i=0;i<u;++i)(l=t[i])&&(d[i]=h=Es+o.call(l,l.__data__,i,t),h in c?a[i]=l:c[h]=l);for(i=0;i<f;++i)h=Es+o.call(e,s[i],i,s),(l=c[h])?(r[i]=l,l.__data__=s[i],c[h]=null):n[i]=new Tr(e,s[i]);for(i=0;i<u;++i)(l=t[i])&&c[d[i]]===l&&(a[i]=l)}function Bl(e,t){if(!e)return h=new Array(this.size()),c=-1,this.each(function(v){h[++c]=v}),h;var n=t?Ul:Ol,r=this._parents,a=this._groups;typeof e!="function"&&(e=Hl(e));for(var s=a.length,o=new Array(s),i=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],f=a[c],d=f.length,h=e.call(u,u&&u.__data__,c,r),x=h.length,m=i[c]=new Array(x),A=o[c]=new Array(x),E=l[c]=new Array(d);n(u,f,m,A,E,h,t);for(var T=0,M=0,S,p;T<x;++T)if(S=m[T]){for(T>=M&&(M=T+1);!(p=A[M])&&++M<x;);S._next=p||null}}return o=new ot(o,r),o._enter=i,o._exit=l,o}function Vl(){return new ot(this._exit||this._groups.map(Io),this._parents)}function zl(e,t,n){var r=this.enter(),a=this,s=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(a=t(a)),n==null?s.remove():n(s),r&&a?r.merge(a).order():a}function Yl(e){for(var t=this._groups,n=e._groups,r=t.length,a=n.length,s=Math.min(r,a),o=new Array(r),i=0;i<s;++i)for(var l=t[i],c=n[i],u=l.length,f=o[i]=new Array(u),d,h=0;h<u;++h)(d=l[h]||c[h])&&(f[h]=d);for(;i<r;++i)o[i]=t[i];return new ot(o,this._parents)}function Wl(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],a=r.length-1,s=r[a],o;--a>=0;)(o=r[a])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function $l(e){e||(e=Gl);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,a=new Array(r),s=0;s<r;++s){for(var o=n[s],i=o.length,l=a[s]=new Array(i),c,u=0;u<i;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new ot(a,this._parents).order()}function Gl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Xl(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function jl(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}function Zl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,s=r.length;a<s;++a){var o=r[a];if(o)return o}return null}function Kl(){var e=0;return this.each(function(){++e}),e}function Ql(){return!this.node()}function Jl(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a=t[n],s=0,o=a.length,i;s<o;++s)(i=a[s])&&e.call(i,i.__data__,s,a);return this}function ec(e){return function(){this.removeAttribute(e)}}function tc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function nc(e,t){return function(){this.setAttribute(e,t)}}function rc(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ac(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function sc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function oc(e,t){var n=Jr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?tc:ec:typeof t=="function"?n.local?sc:ac:n.local?rc:nc)(n,t))}function Fo(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ic(e){return function(){this.style.removeProperty(e)}}function lc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function cc(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function uc(e,t,n){return arguments.length>1?this.each((t==null?ic:typeof t=="function"?cc:lc)(e,t,n??"")):vn(this.node(),e)}function vn(e,t){return e.style.getPropertyValue(t)||Fo(e).getComputedStyle(e,null).getPropertyValue(t)}function fc(e){return function(){delete this[e]}}function dc(e,t){return function(){this[e]=t}}function hc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function gc(e,t){return arguments.length>1?this.each((t==null?fc:typeof t=="function"?hc:dc)(e,t)):this.node()[e]}function Ho(e){return e.trim().split(/^|\s+/)}function $a(e){return e.classList||new Oo(e)}function Oo(e){this._node=e,this._names=Ho(e.getAttribute("class")||"")}Oo.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Uo(e,t){for(var n=$a(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function Bo(e,t){for(var n=$a(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function pc(e){return function(){Uo(this,e)}}function mc(e){return function(){Bo(this,e)}}function yc(e,t){return function(){(t.apply(this,arguments)?Uo:Bo)(this,e)}}function vc(e,t){var n=Ho(e+"");if(arguments.length<2){for(var r=$a(this.node()),a=-1,s=n.length;++a<s;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?yc:t?pc:mc)(n,t))}function _c(){this.textContent=""}function xc(e){return function(){this.textContent=e}}function bc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function wc(e){return arguments.length?this.each(e==null?_c:(typeof e=="function"?bc:xc)(e)):this.node().textContent}function kc(){this.innerHTML=""}function Sc(e){return function(){this.innerHTML=e}}function Cc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Mc(e){return arguments.length?this.each(e==null?kc:(typeof e=="function"?Cc:Sc)(e)):this.node().innerHTML}function Tc(){this.nextSibling&&this.parentNode.appendChild(this)}function Ac(){return this.each(Tc)}function Ec(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Lc(){return this.each(Ec)}function qc(e){var t=typeof e=="function"?e:Po(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Nc(){return null}function Pc(e,t){var n=typeof e=="function"?e:Po(e),r=t==null?Nc:typeof t=="function"?t:Wa(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Dc(){var e=this.parentNode;e&&e.removeChild(this)}function Rc(){return this.each(Dc)}function Ic(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Hc(e){return this.select(e?Fc:Ic)}function Oc(e){return arguments.length?this.property("__data__",e):this.node().__data__}var Vo={},Te=null;if(typeof document<"u"){var Uc=document.documentElement;"onmouseenter"in Uc||(Vo={mouseenter:"mouseover",mouseleave:"mouseout"})}function Bc(e,t,n){return e=zo(e,t,n),function(r){var a=r.relatedTarget;(!a||a!==this&&!(a.compareDocumentPosition(this)&8))&&e.call(this,r)}}function zo(e,t,n){return function(r){var a=Te;Te=r;try{e.call(this,this.__data__,t,n)}finally{Te=a}}}function Vc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function zc(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,a=t.length,s;n<a;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.capture):t[++r]=s;++r?t.length=r:delete this.__on}}}function Yc(e,t,n){var r=Vo.hasOwnProperty(e.type)?Bc:zo;return function(a,s,o){var i=this.__on,l,c=r(t,s,o);if(i){for(var u=0,f=i.length;u<f;++u)if((l=i[u]).type===e.type&&l.name===e.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),l.value=t;return}}this.addEventListener(e.type,c,n),l={type:e.type,name:e.name,value:t,listener:c,capture:n},i?i.push(l):this.__on=[l]}}function Wc(e,t,n){var r=Vc(e+""),a,s=r.length,o;if(arguments.length<2){var i=this.node().__on;if(i){for(var l=0,c=i.length,u;l<c;++l)for(a=0,u=i[l];a<s;++a)if((o=r[a]).type===u.type&&o.name===u.name)return u.value}return}for(i=t?Yc:zc,n==null&&(n=!1),a=0;a<s;++a)this.each(i(r[a],t,n));return this}function Yo(e,t,n){var r=Fo(e),a=r.CustomEvent;typeof a=="function"?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function $c(e,t){return function(){return Yo(this,e,t)}}function Gc(e,t){return function(){return Yo(this,e,t.apply(this,arguments))}}function Xc(e,t){return this.each((typeof t=="function"?Gc:$c)(e,t))}var Wo=[null];function ot(e,t){this._groups=e,this._parents=t}function tr(){return new ot([[document.documentElement]],Wo)}ot.prototype=tr.prototype={constructor:ot,select:Pl,selectAll:Rl,filter:Il,data:Bl,enter:Fl,exit:Vl,join:zl,merge:Yl,order:Wl,sort:$l,call:Xl,nodes:jl,node:Zl,size:Kl,empty:Ql,each:Jl,attr:oc,style:uc,property:gc,classed:vc,text:wc,html:Mc,raise:Ac,lower:Lc,append:qc,insert:Pc,remove:Rc,clone:Hc,datum:Oc,on:Wc,dispatch:Xc};function Me(e){return typeof e=="string"?new ot([[document.querySelector(e)]],[document.documentElement]):new ot([[e]],Wo)}function Ga(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function $o(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function nr(){}var Yn=.7,Ar=1/Yn,hn="\\s*([+-]?\\d+)\\s*",Wn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",xt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jc=/^#([0-9a-f]{3,8})$/,Zc=new RegExp("^rgb\\("+[hn,hn,hn]+"\\)$"),Kc=new RegExp("^rgb\\("+[xt,xt,xt]+"\\)$"),Qc=new RegExp("^rgba\\("+[hn,hn,hn,Wn]+"\\)$"),Jc=new RegExp("^rgba\\("+[xt,xt,xt,Wn]+"\\)$"),eu=new RegExp("^hsl\\("+[Wn,xt,xt]+"\\)$"),tu=new RegExp("^hsla\\("+[Wn,xt,xt,Wn]+"\\)$"),Ls={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ga(nr,$n,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:qs,formatHex:qs,formatHsl:nu,formatRgb:Ns,toString:Ns});function qs(){return this.rgb().formatHex()}function nu(){return Go(this).formatHsl()}function Ns(){return this.rgb().formatRgb()}function $n(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=jc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ps(t):n===3?new at(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?dr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?dr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Zc.exec(e))?new at(t[1],t[2],t[3],1):(t=Kc.exec(e))?new at(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Qc.exec(e))?dr(t[1],t[2],t[3],t[4]):(t=Jc.exec(e))?dr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=eu.exec(e))?Is(t[1],t[2]/100,t[3]/100,1):(t=tu.exec(e))?Is(t[1],t[2]/100,t[3]/100,t[4]):Ls.hasOwnProperty(e)?Ps(Ls[e]):e==="transparent"?new at(NaN,NaN,NaN,0):null}function Ps(e){return new at(e>>16&255,e>>8&255,e&255,1)}function dr(e,t,n,r){return r<=0&&(e=t=n=NaN),new at(e,t,n,r)}function ru(e){return e instanceof nr||(e=$n(e)),e?(e=e.rgb(),new at(e.r,e.g,e.b,e.opacity)):new at}function Er(e,t,n,r){return arguments.length===1?ru(e):new at(e,t,n,r??1)}function at(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ga(at,Er,$o(nr,{brighter:function(e){return e=e==null?Ar:Math.pow(Ar,e),new at(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Yn:Math.pow(Yn,e),new at(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ds,formatHex:Ds,formatRgb:Rs,toString:Rs}));function Ds(){return"#"+ua(this.r)+ua(this.g)+ua(this.b)}function Rs(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function ua(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Is(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new yt(e,t,n,r)}function Go(e){if(e instanceof yt)return new yt(e.h,e.s,e.l,e.opacity);if(e instanceof nr||(e=$n(e)),!e)return new yt;if(e instanceof yt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,i=s-a,l=(s+a)/2;return i?(t===s?o=(n-r)/i+(n<r)*6:n===s?o=(r-t)/i+2:o=(t-n)/i+4,i/=l<.5?s+a:2-s-a,o*=60):i=l>0&&l<1?0:o,new yt(o,i,l,e.opacity)}function au(e,t,n,r){return arguments.length===1?Go(e):new yt(e,t,n,r??1)}function yt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ga(yt,au,$o(nr,{brighter:function(e){return e=e==null?Ar:Math.pow(Ar,e),new yt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Yn:Math.pow(Yn,e),new yt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new at(fa(e>=240?e-240:e+120,a,r),fa(e,a,r),fa(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function fa(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function su(e,t,n,r,a){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*a)/6}function ou(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],s=e[r+1],o=r>0?e[r-1]:2*a-s,i=r<t-1?e[r+2]:2*s-a;return su((n-r/t)*t,o,a,s,i)}}function Xa(e){return function(){return e}}function iu(e,t){return function(n){return e+n*t}}function lu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function cu(e){return(e=+e)==1?Xo:function(t,n){return n-t?lu(t,n,e):Xa(isNaN(t)?n:t)}}function Xo(e,t){var n=t-e;return n?iu(e,n):Xa(isNaN(e)?t:e)}const Lr=function e(t){var n=cu(t);function r(a,s){var o=n((a=Er(a)).r,(s=Er(s)).r),i=n(a.g,s.g),l=n(a.b,s.b),c=Xo(a.opacity,s.opacity);return function(u){return a.r=o(u),a.g=i(u),a.b=l(u),a.opacity=c(u),a+""}}return r.gamma=e,r}(1);function uu(e){return function(t){var n=t.length,r=new Array(n),a=new Array(n),s=new Array(n),o,i;for(o=0;o<n;++o)i=Er(t[o]),r[o]=i.r||0,a[o]=i.g||0,s[o]=i.b||0;return r=e(r),a=e(a),s=e(s),i.opacity=1,function(l){return i.r=r(l),i.g=a(l),i.b=s(l),i+""}}}var fu=uu(ou);function du(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(s){for(a=0;a<n;++a)r[a]=e[a]*(1-s)+t[a]*s;return r}}function hu(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function gu(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)a[o]=ja(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(i){for(o=0;o<r;++o)s[o]=a[o](i);return s}}function pu(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ht(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function mu(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=ja(e[a],t[a]):r[a]=t[a];return function(s){for(a in n)r[a]=n[a](s);return r}}var Ma=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,da=new RegExp(Ma.source,"g");function yu(e){return function(){return e}}function vu(e){return function(t){return e(t)+""}}function jo(e,t){var n=Ma.lastIndex=da.lastIndex=0,r,a,s,o=-1,i=[],l=[];for(e=e+"",t=t+"";(r=Ma.exec(e))&&(a=da.exec(t));)(s=a.index)>n&&(s=t.slice(n,s),i[o]?i[o]+=s:i[++o]=s),(r=r[0])===(a=a[0])?i[o]?i[o]+=a:i[++o]=a:(i[++o]=null,l.push({i:o,x:ht(r,a)})),n=da.lastIndex;return n<t.length&&(s=t.slice(n),i[o]?i[o]+=s:i[++o]=s),i.length<2?l[0]?vu(l[0].x):yu(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)i[(f=l[u]).i]=f.x(c);return i.join("")})}function ja(e,t){var n=typeof t,r;return t==null||n==="boolean"?Xa(t):(n==="number"?ht:n==="string"?(r=$n(t))?(t=r,Lr):jo:t instanceof $n?Lr:t instanceof Date?pu:hu(t)?du:Array.isArray(t)?gu:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?mu:ht)(e,t)}function _u(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Fs=180/Math.PI,Ta={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zo(e,t,n,r,a,s){var o,i,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(i=Math.sqrt(n*n+r*r))&&(n/=i,r/=i,l/=i),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*Fs,skewX:Math.atan(l)*Fs,scaleX:o,scaleY:i}}var Mn,ha,Hs,hr;function xu(e){return e==="none"?Ta:(Mn||(Mn=document.createElement("DIV"),ha=document.documentElement,Hs=document.defaultView),Mn.style.transform=e,e=Hs.getComputedStyle(ha.appendChild(Mn),null).getPropertyValue("transform"),ha.removeChild(Mn),e=e.slice(7,-1).split(","),Zo(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function bu(e){return e==null||(hr||(hr=document.createElementNS("http://www.w3.org/2000/svg","g")),hr.setAttribute("transform",e),!(e=hr.transform.baseVal.consolidate()))?Ta:(e=e.matrix,Zo(e.a,e.b,e.c,e.d,e.e,e.f))}function Ko(e,t,n,r){function a(c){return c.length?c.pop()+" ":""}function s(c,u,f,d,h,x){if(c!==f||u!==d){var m=h.push("translate(",null,t,null,n);x.push({i:m-4,x:ht(c,f)},{i:m-2,x:ht(u,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(c,u,f,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:f.push(a(f)+"rotate(",null,r)-2,x:ht(c,u)})):u&&f.push(a(f)+"rotate("+u+r)}function i(c,u,f,d){c!==u?d.push({i:f.push(a(f)+"skewX(",null,r)-2,x:ht(c,u)}):u&&f.push(a(f)+"skewX("+u+r)}function l(c,u,f,d,h,x){if(c!==f||u!==d){var m=h.push(a(h)+"scale(",null,",",null,")");x.push({i:m-4,x:ht(c,f)},{i:m-2,x:ht(u,d)})}else(f!==1||d!==1)&&h.push(a(h)+"scale("+f+","+d+")")}return function(c,u){var f=[],d=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,d),o(c.rotate,u.rotate,f,d),i(c.skewX,u.skewX,f,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,d),c=u=null,function(h){for(var x=-1,m=d.length,A;++x<m;)f[(A=d[x]).i]=A.x(h);return f.join("")}}}var wu=Ko(xu,"px, ","px)","deg)"),ku=Ko(bu,", ",")",")"),_n=0,In=0,Tn=0,Qo=1e3,qr,Fn,Nr=0,Yt=0,ea=0,Gn=typeof performance=="object"&&performance.now?performance:Date,Jo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ta(){return Yt||(Jo(Su),Yt=Gn.now()+ea)}function Su(){Yt=0}function Pr(){this._call=this._time=this._next=null}Pr.prototype=ei.prototype={constructor:Pr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ta():+n)+(t==null?0:+t),!this._next&&Fn!==this&&(Fn?Fn._next=this:qr=this,Fn=this),this._call=e,this._time=n,Aa()},stop:function(){this._call&&(this._call=null,this._time=1/0,Aa())}};function ei(e,t,n){var r=new Pr;return r.restart(e,t,n),r}function Cu(){ta(),++_n;for(var e=qr,t;e;)(t=Yt-e._time)>=0&&e._call.call(null,t),e=e._next;--_n}function Os(){Yt=(Nr=Gn.now())+ea,_n=In=0;try{Cu()}finally{_n=0,Tu(),Yt=0}}function Mu(){var e=Gn.now(),t=e-Nr;t>Qo&&(ea-=t,Nr=e)}function Tu(){for(var e,t=qr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:qr=n);Fn=e,Aa(r)}function Aa(e){if(!_n){In&&(In=clearTimeout(In));var t=e-Yt;t>24?(e<1/0&&(In=setTimeout(Os,e-Gn.now()-ea)),Tn&&(Tn=clearInterval(Tn))):(Tn||(Nr=Gn.now(),Tn=setInterval(Mu,Qo)),_n=1,Jo(Os))}}function Us(e,t,n){var r=new Pr;return t=t==null?0:+t,r.restart(function(a){r.stop(),e(a+t)},t,n),r}var Au=No("start","end","cancel","interrupt"),Eu=[],ti=0,Bs=1,Ea=2,br=3,Vs=4,La=5,wr=6;function na(e,t,n,r,a,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Lu(e,n,{name:t,index:r,group:a,on:Au,tween:Eu,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ti})}function Za(e,t){var n=gt(e,t);if(n.state>ti)throw new Error("too late; already scheduled");return n}function Lt(e,t){var n=gt(e,t);if(n.state>br)throw new Error("too late; already running");return n}function gt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Lu(e,t,n){var r=e.__transition,a;r[t]=n,n.timer=ei(s,0,n.time);function s(c){n.state=Bs,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,d,h;if(n.state!==Bs)return l();for(u in r)if(h=r[u],h.name===n.name){if(h.state===br)return Us(o);h.state===Vs?(h.state=wr,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[u]):+u<t&&(h.state=wr,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[u])}if(Us(function(){n.state===br&&(n.state=Vs,n.timer.restart(i,n.delay,n.time),i(c))}),n.state=Ea,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ea){for(n.state=br,a=new Array(d=n.tween.length),u=0,f=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(a[++f]=h);a.length=f+1}}function i(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=La,1),f=-1,d=a.length;++f<d;)a[f].call(e,u);n.state===La&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=wr,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function qu(e,t){var n=e.__transition,r,a,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}a=r.state>Ea&&r.state<La,r.state=wr,r.timer.stop(),r.on.call(a?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Nu(e){return this.each(function(){qu(this,e)})}function Pu(e,t){var n,r;return function(){var a=Lt(this,e),s=a.tween;if(s!==n){r=n=s;for(var o=0,i=r.length;o<i;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}a.tween=r}}function Du(e,t,n){var r,a;if(typeof n!="function")throw new Error;return function(){var s=Lt(this,e),o=s.tween;if(o!==r){a=(r=o).slice();for(var i={name:t,value:n},l=0,c=a.length;l<c;++l)if(a[l].name===t){a[l]=i;break}l===c&&a.push(i)}s.tween=a}}function Ru(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=gt(this.node(),n).tween,a=0,s=r.length,o;a<s;++a)if((o=r[a]).name===e)return o.value;return null}return this.each((t==null?Pu:Du)(n,e,t))}function Ka(e,t,n){var r=e._id;return e.each(function(){var a=Lt(this,r);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return gt(a,r).value[t]}}function Qa(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ni(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function rr(){}var Xn=.7,Dr=1/Xn,gn="\\s*([+-]?\\d+)\\s*",jn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",bt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Iu=/^#([0-9a-f]{3,8})$/,Fu=new RegExp("^rgb\\("+[gn,gn,gn]+"\\)$"),Hu=new RegExp("^rgb\\("+[bt,bt,bt]+"\\)$"),Ou=new RegExp("^rgba\\("+[gn,gn,gn,jn]+"\\)$"),Uu=new RegExp("^rgba\\("+[bt,bt,bt,jn]+"\\)$"),Bu=new RegExp("^hsl\\("+[jn,bt,bt]+"\\)$"),Vu=new RegExp("^hsla\\("+[jn,bt,bt,jn]+"\\)$"),zs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Qa(rr,Zn,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Ys,formatHex:Ys,formatHsl:zu,formatRgb:Ws,toString:Ws});function Ys(){return this.rgb().formatHex()}function zu(){return ri(this).formatHsl()}function Ws(){return this.rgb().formatRgb()}function Zn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Iu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$s(t):n===3?new st(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?gr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?gr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Fu.exec(e))?new st(t[1],t[2],t[3],1):(t=Hu.exec(e))?new st(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ou.exec(e))?gr(t[1],t[2],t[3],t[4]):(t=Uu.exec(e))?gr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Bu.exec(e))?js(t[1],t[2]/100,t[3]/100,1):(t=Vu.exec(e))?js(t[1],t[2]/100,t[3]/100,t[4]):zs.hasOwnProperty(e)?$s(zs[e]):e==="transparent"?new st(NaN,NaN,NaN,0):null}function $s(e){return new st(e>>16&255,e>>8&255,e&255,1)}function gr(e,t,n,r){return r<=0&&(e=t=n=NaN),new st(e,t,n,r)}function Yu(e){return e instanceof rr||(e=Zn(e)),e?(e=e.rgb(),new st(e.r,e.g,e.b,e.opacity)):new st}function Wu(e,t,n,r){return arguments.length===1?Yu(e):new st(e,t,n,r??1)}function st(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Qa(st,Wu,ni(rr,{brighter:function(e){return e=e==null?Dr:Math.pow(Dr,e),new st(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Xn:Math.pow(Xn,e),new st(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gs,formatHex:Gs,formatRgb:Xs,toString:Xs}));function Gs(){return"#"+ga(this.r)+ga(this.g)+ga(this.b)}function Xs(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function ga(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function js(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new vt(e,t,n,r)}function ri(e){if(e instanceof vt)return new vt(e.h,e.s,e.l,e.opacity);if(e instanceof rr||(e=Zn(e)),!e)return new vt;if(e instanceof vt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,i=s-a,l=(s+a)/2;return i?(t===s?o=(n-r)/i+(n<r)*6:n===s?o=(r-t)/i+2:o=(t-n)/i+4,i/=l<.5?s+a:2-s-a,o*=60):i=l>0&&l<1?0:o,new vt(o,i,l,e.opacity)}function $u(e,t,n,r){return arguments.length===1?ri(e):new vt(e,t,n,r??1)}function vt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Qa(vt,$u,ni(rr,{brighter:function(e){return e=e==null?Dr:Math.pow(Dr,e),new vt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Xn:Math.pow(Xn,e),new vt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new st(pa(e>=240?e-240:e+120,a,r),pa(e,a,r),pa(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function pa(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function ai(e,t){var n;return(typeof t=="number"?ht:t instanceof Zn?Lr:(n=Zn(t))?(t=n,Lr):jo)(e,t)}function Gu(e){return function(){this.removeAttribute(e)}}function Xu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ju(e,t,n){var r,a=n+"",s;return function(){var o=this.getAttribute(e);return o===a?null:o===r?s:s=t(r=o,n)}}function Zu(e,t,n){var r,a=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===r?s:s=t(r=o,n)}}function Ku(e,t,n){var r,a,s;return function(){var o,i=n(this),l;return i==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=i+"",o===l?null:o===r&&l===a?s:(a=l,s=t(r=o,i)))}}function Qu(e,t,n){var r,a,s;return function(){var o,i=n(this),l;return i==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=i+"",o===l?null:o===r&&l===a?s:(a=l,s=t(r=o,i)))}}function Ju(e,t){var n=Jr(e),r=n==="transform"?ku:ai;return this.attrTween(e,typeof t=="function"?(n.local?Qu:Ku)(n,r,Ka(this,"attr."+e,t)):t==null?(n.local?Xu:Gu)(n):(n.local?Zu:ju)(n,r,t))}function ef(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function tf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function nf(e,t){var n,r;function a(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&tf(e,s)),n}return a._value=t,a}function rf(e,t){var n,r;function a(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&ef(e,s)),n}return a._value=t,a}function af(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Jr(e);return this.tween(n,(r.local?nf:rf)(r,t))}function sf(e,t){return function(){Za(this,e).delay=+t.apply(this,arguments)}}function of(e,t){return t=+t,function(){Za(this,e).delay=t}}function lf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sf:of)(t,e)):gt(this.node(),t).delay}function cf(e,t){return function(){Lt(this,e).duration=+t.apply(this,arguments)}}function uf(e,t){return t=+t,function(){Lt(this,e).duration=t}}function ff(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?cf:uf)(t,e)):gt(this.node(),t).duration}function df(e,t){if(typeof t!="function")throw new Error;return function(){Lt(this,e).ease=t}}function hf(e){var t=this._id;return arguments.length?this.each(df(t,e)):gt(this.node(),t).ease}function gf(e){typeof e!="function"&&(e=Ro(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var s=t[a],o=s.length,i=r[a]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&i.push(l);return new Et(r,this._parents,this._name,this._id)}function pf(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,s=Math.min(r,a),o=new Array(r),i=0;i<s;++i)for(var l=t[i],c=n[i],u=l.length,f=o[i]=new Array(u),d,h=0;h<u;++h)(d=l[h]||c[h])&&(f[h]=d);for(;i<r;++i)o[i]=t[i];return new Et(o,this._parents,this._name,this._id)}function mf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function yf(e,t,n){var r,a,s=mf(t)?Za:Lt;return function(){var o=s(this,e),i=o.on;i!==r&&(a=(r=i).copy()).on(t,n),o.on=a}}function vf(e,t){var n=this._id;return arguments.length<2?gt(this.node(),n).on.on(e):this.each(yf(n,e,t))}function _f(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function xf(){return this.on("end.remove",_f(this._id))}function bf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wa(e));for(var r=this._groups,a=r.length,s=new Array(a),o=0;o<a;++o)for(var i=r[o],l=i.length,c=s[o]=new Array(l),u,f,d=0;d<l;++d)(u=i[d])&&(f=e.call(u,u.__data__,d,i))&&("__data__"in u&&(f.__data__=u.__data__),c[d]=f,na(c[d],t,n,d,c,gt(u,n)));return new Et(s,this._parents,t,n)}function wf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Do(e));for(var r=this._groups,a=r.length,s=[],o=[],i=0;i<a;++i)for(var l=r[i],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var d=e.call(u,u.__data__,f,l),h,x=gt(u,n),m=0,A=d.length;m<A;++m)(h=d[m])&&na(h,t,n,m,d,x);s.push(d),o.push(u)}return new Et(s,o,t,n)}var kf=tr.prototype.constructor;function Sf(){return new kf(this._groups,this._parents)}function Cf(e,t){var n,r,a;return function(){var s=vn(this,e),o=(this.style.removeProperty(e),vn(this,e));return s===o?null:s===n&&o===r?a:a=t(n=s,r=o)}}function si(e){return function(){this.style.removeProperty(e)}}function Mf(e,t,n){var r,a=n+"",s;return function(){var o=vn(this,e);return o===a?null:o===r?s:s=t(r=o,n)}}function Tf(e,t,n){var r,a,s;return function(){var o=vn(this,e),i=n(this),l=i+"";return i==null&&(l=i=(this.style.removeProperty(e),vn(this,e))),o===l?null:o===r&&l===a?s:(a=l,s=t(r=o,i))}}function Af(e,t){var n,r,a,s="style."+t,o="end."+s,i;return function(){var l=Lt(this,e),c=l.on,u=l.value[s]==null?i||(i=si(t)):void 0;(c!==n||a!==u)&&(r=(n=c).copy()).on(o,a=u),l.on=r}}function Ef(e,t,n){var r=(e+="")=="transform"?wu:ai;return t==null?this.styleTween(e,Cf(e,r)).on("end.style."+e,si(e)):typeof t=="function"?this.styleTween(e,Tf(e,r,Ka(this,"style."+e,t))).each(Af(this._id,e)):this.styleTween(e,Mf(e,r,t),n).on("end.style."+e,null)}function Lf(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function qf(e,t,n){var r,a;function s(){var o=t.apply(this,arguments);return o!==a&&(r=(a=o)&&Lf(e,o,n)),r}return s._value=t,s}function Nf(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,qf(e,t,n??""))}function Pf(e){return function(){this.textContent=e}}function Df(e){return function(){var t=e(this);this.textContent=t??""}}function Rf(e){return this.tween("text",typeof e=="function"?Df(Ka(this,"text",e)):Pf(e==null?"":e+""))}function If(e){return function(t){this.textContent=e.call(this,t)}}function Ff(e){var t,n;function r(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&If(a)),t}return r._value=e,r}function Hf(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ff(e))}function Of(){for(var e=this._name,t=this._id,n=oi(),r=this._groups,a=r.length,s=0;s<a;++s)for(var o=r[s],i=o.length,l,c=0;c<i;++c)if(l=o[c]){var u=gt(l,t);na(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Et(r,this._parents,e,n)}function Uf(){var e,t,n=this,r=n._id,a=n.size();return new Promise(function(s,o){var i={value:o},l={value:function(){--a===0&&s()}};n.each(function(){var c=Lt(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(i),t._.interrupt.push(i),t._.end.push(l)),c.on=t})})}var Bf=0;function Et(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function oi(){return++Bf}var cn=tr.prototype;Et.prototype={constructor:Et,select:bf,selectAll:wf,filter:gf,merge:pf,selection:Sf,transition:Of,call:cn.call,nodes:cn.nodes,node:cn.node,size:cn.size,empty:cn.empty,each:cn.each,on:vf,attr:Ju,attrTween:af,style:Ef,styleTween:Nf,text:Rf,textTween:Hf,remove:xf,tween:Ru,delay:lf,duration:ff,ease:hf,end:Uf};function Vf(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var qa={time:null,delay:0,duration:250,ease:Vf};function zf(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return qa.time=ta(),qa;return n}function Yf(e){var t,n;e instanceof Et?(t=e._id,e=e._name):(t=oi(),(n=qa).time=ta(),e=e==null?null:e+"");for(var r=this._groups,a=r.length,s=0;s<a;++s)for(var o=r[s],i=o.length,l,c=0;c<i;++c)(l=o[c])&&na(l,e,t,c,o,n||zf(l,t));return new Et(r,this._parents,e,t)}tr.prototype.interrupt=Nu;tr.prototype.transition=Yf;function ii(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Wf(e){return e.length===1&&(e=$f(e)),{left:function(t,n,r,a){for(r==null&&(r=0),a==null&&(a=t.length);r<a;){var s=r+a>>>1;e(t[s],n)<0?r=s+1:a=s}return r},right:function(t,n,r,a){for(r==null&&(r=0),a==null&&(a=t.length);r<a;){var s=r+a>>>1;e(t[s],n)>0?a=s:r=s+1}return r}}}function $f(e){return function(t,n){return ii(e(t),n)}}Wf(ii);var Na=Math.PI,Pa=2*Na,Vt=1e-6,Gf=Pa-Vt;function Da(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ra(){return new Da}Da.prototype=ra.prototype={constructor:Da,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,a,s){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+a)+","+(this._y1=+s)},arcTo:function(e,t,n,r,a){e=+e,t=+t,n=+n,r=+r,a=+a;var s=this._x1,o=this._y1,i=n-e,l=r-t,c=s-e,u=o-t,f=c*c+u*u;if(a<0)throw new Error("negative radius: "+a);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>Vt)if(!(Math.abs(u*i-l*c)>Vt)||!a)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var d=n-s,h=r-o,x=i*i+l*l,m=d*d+h*h,A=Math.sqrt(x),E=Math.sqrt(f),T=a*Math.tan((Na-Math.acos((x+f-m)/(2*A*E)))/2),M=T/E,S=T/A;Math.abs(M-1)>Vt&&(this._+="L"+(e+M*c)+","+(t+M*u)),this._+="A"+a+","+a+",0,0,"+ +(u*d>c*h)+","+(this._x1=e+S*i)+","+(this._y1=t+S*l)}},arc:function(e,t,n,r,a,s){e=+e,t=+t,n=+n,s=!!s;var o=n*Math.cos(r),i=n*Math.sin(r),l=e+o,c=t+i,u=1^s,f=s?r-a:a-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>Vt||Math.abs(this._y1-c)>Vt)&&(this._+="L"+l+","+c),n&&(f<0&&(f=f%Pa+Pa),f>Gf?this._+="A"+n+","+n+",0,1,"+u+","+(e-o)+","+(t-i)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):f>Vt&&(this._+="A"+n+","+n+",0,"+ +(f>=Na)+","+u+","+(this._x1=e+n*Math.cos(a))+","+(this._y1=t+n*Math.sin(a))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var ut="$";function Rr(){}Rr.prototype=ie.prototype={constructor:Rr,has:function(e){return ut+e in this},get:function(e){return this[ut+e]},set:function(e,t){return this[ut+e]=t,this},remove:function(e){var t=ut+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===ut&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===ut&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===ut&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===ut&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===ut&&++e;return e},empty:function(){for(var e in this)if(e[0]===ut)return!1;return!0},each:function(e){for(var t in this)t[0]===ut&&e(this[t],t.slice(1),this)}};function ie(e,t){var n=new Rr;if(e instanceof Rr)e.each(function(i,l){n.set(l,i)});else if(Array.isArray(e)){var r=-1,a=e.length,s;if(t==null)for(;++r<a;)n.set(r,e[r]);else for(;++r<a;)n.set(t(s=e[r],r,e),s)}else if(e)for(var o in e)n.set(o,e[o]);return n}function li(){var e=[],t=[],n,r,a;function s(i,l,c,u){if(l>=e.length)return n!=null&&i.sort(n),r!=null?r(i):i;for(var f=-1,d=i.length,h=e[l++],x,m,A=ie(),E,T=c();++f<d;)(E=A.get(x=h(m=i[f])+""))?E.push(m):A.set(x,[m]);return A.each(function(M,S){u(T,S,s(M,l,c,u))}),T}function o(i,l){if(++l>e.length)return i;var c,u=t[l-1];return r!=null&&l>=e.length?c=i.entries():(c=[],i.each(function(f,d){c.push({key:d,values:o(f,l)})})),u!=null?c.sort(function(f,d){return u(f.key,d.key)}):c}return a={object:function(i){return s(i,0,Xf,jf)},map:function(i){return s(i,0,Zs,Ks)},entries:function(i){return o(s(i,0,Zs,Ks),0)},key:function(i){return e.push(i),a},sortKeys:function(i){return t[e.length-1]=i,a},sortValues:function(i){return n=i,a},rollup:function(i){return r=i,a}}}function Xf(){return{}}function jf(e,t,n){e[t]=n}function Zs(){return ie()}function Ks(e,t,n){e.set(t,n)}function Qs(){}var Ut=ie.prototype;Qs.prototype={constructor:Qs,has:Ut.has,add:function(e){return e+="",this[ut+e]=e,this},remove:Ut.remove,clear:Ut.clear,values:Ut.keys,size:Ut.size,empty:Ut.empty,each:Ut.each};function ci(e){var t=[];for(var n in e)t.push(n);return t}function ui(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Zf(e){return e.length===1&&(e=Kf(e)),{left:function(t,n,r,a){for(r==null&&(r=0),a==null&&(a=t.length);r<a;){var s=r+a>>>1;e(t[s],n)<0?r=s+1:a=s}return r},right:function(t,n,r,a){for(r==null&&(r=0),a==null&&(a=t.length);r<a;){var s=r+a>>>1;e(t[s],n)>0?a=s:r=s+1}return r}}}function Kf(e){return function(t,n){return ui(e(t),n)}}Zf(ui);function Qf(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ir(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function xn(e){return e=Ir(Math.abs(e)),e?e[1]:NaN}function Jf(e,t){return function(n,r){for(var a=n.length,s=[],o=0,i=e[0],l=0;a>0&&i>0&&(l+i+1>r&&(i=Math.max(1,r-l)),s.push(n.substring(a-=i,a+i)),!((l+=i+1)>r));)i=e[o=(o+1)%e.length];return s.reverse().join(t)}}function ed(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var td=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fr(e){if(!(t=td.exec(e)))throw new Error("invalid format: "+e);var t;return new Ja({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Fr.prototype=Ja.prototype;function Ja(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ja.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nd(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var fi;function rd(e,t){var n=Ir(e,t);if(!n)return e+"";var r=n[0],a=n[1],s=a-(fi=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Ir(e,Math.max(0,t+s-1))[0]}function Js(e,t){var n=Ir(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const eo={"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:Qf,e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Js(e*100,t)},r:Js,s:rd,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function to(e){return e}var no=Array.prototype.map,ro=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ad(e){var t=e.grouping===void 0||e.thousands===void 0?to:Jf(no.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?to:ed(no.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",i=e.minus===void 0?"-":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=Fr(f);var d=f.fill,h=f.align,x=f.sign,m=f.symbol,A=f.zero,E=f.width,T=f.comma,M=f.precision,S=f.trim,p=f.type;p==="n"?(T=!0,p="g"):eo[p]||(M===void 0&&(M=12),S=!0,p="g"),(A||d==="0"&&h==="=")&&(A=!0,d="0",h="=");var v=m==="$"?n:m==="#"&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",D=m==="$"?r:/[%p]/.test(p)?o:"",U=eo[p],I=/[defgprs%]/.test(p);M=M===void 0?6:/[gprs]/.test(p)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function F(_){var w=v,q=D,H,Q,R;if(p==="c")q=U(_)+q,_="";else{_=+_;var $=_<0||1/_<0;if(_=isNaN(_)?l:U(Math.abs(_),M),S&&(_=nd(_)),$&&+_==0&&x!=="+"&&($=!1),w=($?x==="("?x:i:x==="-"||x==="("?"":x)+w,q=(p==="s"?ro[8+fi/3]:"")+q+($&&x==="("?")":""),I){for(H=-1,Q=_.length;++H<Q;)if(R=_.charCodeAt(H),48>R||R>57){q=(R===46?a+_.slice(H+1):_.slice(H))+q,_=_.slice(0,H);break}}}T&&!A&&(_=t(_,1/0));var k=w.length+_.length+q.length,N=k<E?new Array(E-k+1).join(d):"";switch(T&&A&&(_=t(N+_,N.length?E-q.length:1/0),N=""),h){case"<":_=w+_+q+N;break;case"=":_=w+N+_+q;break;case"^":_=N.slice(0,k=N.length>>1)+w+_+q+N.slice(k);break;default:_=N+w+_+q;break}return s(_)}return F.toString=function(){return f+""},F}function u(f,d){var h=c((f=Fr(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(xn(d)/3)))*3,m=Math.pow(10,-x),A=ro[8+x/3];return function(E){return h(m*E)+A}}return{format:c,formatPrefix:u}}var pr,Ne,di;sd({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function sd(e){return pr=ad(e),Ne=pr.format,di=pr.formatPrefix,pr}function od(e){return Math.max(0,-xn(Math.abs(e)))}function id(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xn(t)/3)))*3-xn(Math.abs(e)))}function ld(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xn(t)-xn(e))+1}function kn(){return Math.random()}(function e(t){function n(r,a){return r=r==null?0:+r,a=a==null?1:+a,arguments.length===1?(a=r,r=0):a-=r,function(){return t()*a+r}}return n.source=e,n})(kn);const cd=function e(t){function n(r,a){var s,o;return r=r==null?0:+r,a=a==null?1:+a,function(){var i;if(s!=null)i=s,s=null;else do s=t()*2-1,i=t()*2-1,o=s*s+i*i;while(!o||o>1);return r+a*i*Math.sqrt(-2*Math.log(o)/o)}}return n.source=e,n}(kn);(function e(t){function n(){var r=cd.source(t).apply(this,arguments);return function(){return Math.exp(r())}}return n.source=e,n})(kn);const ud=function e(t){function n(r){return function(){for(var a=0,s=0;s<r;++s)a+=t();return a}}return n.source=e,n}(kn);(function e(t){function n(r){var a=ud.source(t)(r);return function(){return a()/r}}return n.source=e,n})(kn);(function e(t){function n(r){return function(){return-Math.log(1-t())/r}}return n.source=e,n})(kn);function hi(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function gi(e){return e.length===1&&(e=fd(e)),{left:function(t,n,r,a){for(r==null&&(r=0),a==null&&(a=t.length);r<a;){var s=r+a>>>1;e(t[s],n)<0?r=s+1:a=s}return r},right:function(t,n,r,a){for(r==null&&(r=0),a==null&&(a=t.length);r<a;){var s=r+a>>>1;e(t[s],n)>0?a=s:r=s+1}return r}}}function fd(e){return function(t,n){return hi(e(t),n)}}var dd=gi(hi),hd=dd.right;function gd(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(a);++r<a;)s[r]=e+r*n;return s}var Ra=Math.sqrt(50),Ia=Math.sqrt(10),Fa=Math.sqrt(2);function pd(e,t,n){var r,a=-1,s,o,i;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(s=e,e=t,t=s),(i=kr(e,t,n))===0||!isFinite(i))return[];if(i>0)for(e=Math.ceil(e/i),t=Math.floor(t/i),o=new Array(s=Math.ceil(t-e+1));++a<s;)o[a]=(e+a)*i;else for(e=Math.floor(e*i),t=Math.ceil(t*i),o=new Array(s=Math.ceil(e-t+1));++a<s;)o[a]=(e-a)/i;return r&&o.reverse(),o}function kr(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,a);return a>=0?(s>=Ra?10:s>=Ia?5:s>=Fa?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(s>=Ra?10:s>=Ia?5:s>=Fa?2:1)}function Ha(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/a;return s>=Ra?a*=10:s>=Ia?a*=5:s>=Fa&&(a*=2),t<e?-a:a}function aa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function md(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e);break}return this}var pi=Array.prototype,mi=pi.map,Oa=pi.slice,ao={name:"implicit"};function $e(){var e=ie(),t=[],n=[],r=ao;function a(s){var o=s+"",i=e.get(o);if(!i){if(r!==ao)return r;e.set(o,i=t.push(s))}return n[(i-1)%n.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=ie();for(var o=-1,i=s.length,l,c;++o<i;)e.has(c=(l=s[o])+"")||e.set(c,t.push(l));return a},a.range=function(s){return arguments.length?(n=Oa.call(s),a):n.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return $e(t,n).unknown(r)},aa.apply(a,arguments),a}function Pt(){var e=$e().unknown(void 0),t=e.domain,n=e.range,r=[0,1],a,s,o=!1,i=0,l=0,c=.5;delete e.unknown;function u(){var f=t().length,d=r[1]<r[0],h=r[d-0],x=r[1-d];a=(x-h)/Math.max(1,f-i+l*2),o&&(a=Math.floor(a)),h+=(x-h-a*(f-i))*c,s=a*(1-i),o&&(h=Math.round(h),s=Math.round(s));var m=gd(f).map(function(A){return h+a*A});return n(d?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),u()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],u()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,u()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(f){return arguments.length?(o=!!f,u()):o},e.padding=function(f){return arguments.length?(i=Math.min(1,l=+f),u()):i},e.paddingInner=function(f){return arguments.length?(i=Math.min(1,f),u()):i},e.paddingOuter=function(f){return arguments.length?(l=+f,u()):l},e.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},e.copy=function(){return Pt(t(),r).round(o).paddingInner(i).paddingOuter(l).align(c)},aa.apply(u(),arguments)}function yd(e){return function(){return e}}function vd(e){return+e}var so=[0,1];function _t(e){return e}function Ua(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:yd(isNaN(t)?NaN:.5)}function oo(e){var t=e[0],n=e[e.length-1],r;return t>n&&(r=t,t=n,n=r),function(a){return Math.max(t,Math.min(n,a))}}function _d(e,t,n){var r=e[0],a=e[1],s=t[0],o=t[1];return a<r?(r=Ua(a,r),s=n(o,s)):(r=Ua(r,a),s=n(s,o)),function(i){return s(r(i))}}function xd(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=Ua(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(i){var l=hd(e,i,1,r)-1;return s[l](a[l](i))}}function yi(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function bd(){var e=so,t=so,n=ja,r,a,s,o=_t,i,l,c;function u(){return i=Math.min(e.length,t.length)>2?xd:_d,l=c=null,f}function f(d){return isNaN(d=+d)?s:(l||(l=i(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(a((c||(c=i(t,e.map(r),ht)))(d)))},f.domain=function(d){return arguments.length?(e=mi.call(d,vd),o===_t||(o=oo(e)),u()):e.slice()},f.range=function(d){return arguments.length?(t=Oa.call(d),u()):t.slice()},f.rangeRound=function(d){return t=Oa.call(d),n=_u,u()},f.clamp=function(d){return arguments.length?(o=d?oo(e):_t,f):o!==_t},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,a=h,u()}}function vi(e,t){return bd()(e,t)}function wd(e,t,n,r){var a=Ha(e,t,n),s;switch(r=Fr(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=id(a,o))&&(r.precision=s),di(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=ld(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=od(a))&&(r.precision=s-(r.type==="%")*2);break}}return Ne(r)}function _i(e){var t=e.domain;return e.ticks=function(n){var r=t();return pd(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return wd(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,s=r.length-1,o=r[a],i=r[s],l;return i<o&&(l=o,o=i,i=l,l=a,a=s,s=l),l=kr(o,i,n),l>0?(o=Math.floor(o/l)*l,i=Math.ceil(i/l)*l,l=kr(o,i,n)):l<0&&(o=Math.ceil(o*l)/l,i=Math.floor(i*l)/l,l=kr(o,i,n)),l>0?(r[a]=Math.floor(o/l)*l,r[s]=Math.ceil(i/l)*l,t(r)):l<0&&(r[a]=Math.ceil(o*l)/l,r[s]=Math.floor(i*l)/l,t(r)),e},e}function At(){var e=vi(_t,_t);return e.copy=function(){return yi(e,At())},aa.apply(e,arguments),_i(e)}function kd(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],s=e[r],o;return s<a&&(o=n,n=r,r=o,o=a,a=s,s=o),e[n]=t.floor(a),e[r]=t.ceil(s),e}var ma=new Date,ya=new Date;function Ge(e,t,n,r){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=function(s){return e(s=new Date(+s)),s},a.ceil=function(s){return e(s=new Date(s-1)),t(s,1),e(s),s},a.round=function(s){var o=a(s),i=a.ceil(s);return s-o<i-s?o:i},a.offset=function(s,o){return t(s=new Date(+s),o==null?1:Math.floor(o)),s},a.range=function(s,o,i){var l=[],c;if(s=a.ceil(s),i=i==null?1:Math.floor(i),!(s<o)||!(i>0))return l;do l.push(c=new Date(+s)),t(s,i),e(s);while(c<s&&s<o);return l},a.filter=function(s){return Ge(function(o){if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},function(o,i){if(o>=o)if(i<0)for(;++i<=0;)for(;t(o,-1),!s(o););else for(;--i>=0;)for(;t(o,1),!s(o););})},n&&(a.count=function(s,o){return ma.setTime(+s),ya.setTime(+o),e(ma),e(ya),Math.floor(n(ma,ya))},a.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(r?function(o){return r(o)%s===0}:function(o){return a.count(0,o)%s===0}):a}),a}var Hr=Ge(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});Hr.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ge(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):Hr};Hr.range;var Or=1e3,Kn=6e4,io=36e5,xi=864e5,bi=6048e5,wi=Ge(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*Or)},function(e,t){return(t-e)/Or},function(e){return e.getUTCSeconds()});wi.range;var ki=Ge(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Or)},function(e,t){e.setTime(+e+t*Kn)},function(e,t){return(t-e)/Kn},function(e){return e.getMinutes()});ki.range;var Si=Ge(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Or-e.getMinutes()*Kn)},function(e,t){e.setTime(+e+t*io)},function(e,t){return(t-e)/io},function(e){return e.getHours()});Si.range;var sa=Ge(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Kn)/xi},function(e){return e.getDate()-1});sa.range;function jt(e){return Ge(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n*7)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Kn)/bi})}var es=jt(0),Ur=jt(1),Sd=jt(2),Cd=jt(3),bn=jt(4),Md=jt(5),Td=jt(6);es.range;Ur.range;Sd.range;Cd.range;bn.range;Md.range;Td.range;var Ci=Ge(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});Ci.range;var Dt=Ge(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});Dt.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Ge(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};Dt.range;var ts=Ge(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/xi},function(e){return e.getUTCDate()-1});ts.range;function Zt(e){return Ge(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n*7)},function(t,n){return(n-t)/bi})}var Mi=Zt(0),Br=Zt(1),Ad=Zt(2),Ed=Zt(3),wn=Zt(4),Ld=Zt(5),qd=Zt(6);Mi.range;Br.range;Ad.range;Ed.range;wn.range;Ld.range;qd.range;var Wt=Ge(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Wt.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Ge(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};Wt.range;function va(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function _a(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function An(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Nd(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,s=e.days,o=e.shortDays,i=e.months,l=e.shortMonths,c=En(a),u=Ln(a),f=En(s),d=Ln(s),h=En(o),x=Ln(o),m=En(i),A=Ln(i),E=En(l),T=Ln(l),M={a:$,A:k,b:N,B:y,c:null,d:go,e:go,f:th,g:fh,G:hh,H:Qd,I:Jd,j:eh,L:Ti,m:nh,M:rh,p:re,q:ae,Q:yo,s:vo,S:ah,u:sh,U:oh,V:ih,w:lh,W:ch,x:null,X:null,y:uh,Y:dh,Z:gh,"%":mo},S={a:de,A:G,b:ue,B:C,c:null,d:po,e:po,f:vh,g:Ah,G:Lh,H:ph,I:mh,j:yh,L:Ei,m:_h,M:xh,p:ne,q:me,Q:yo,s:vo,S:bh,u:wh,U:kh,V:Sh,w:Ch,W:Mh,x:null,X:null,y:Th,Y:Eh,Z:qh,"%":mo},p={a:F,A:_,b:w,B:q,c:H,d:fo,e:fo,f:Xd,g:uo,G:co,H:ho,I:ho,j:Yd,L:Gd,m:zd,M:Wd,p:I,q:Vd,Q:Zd,s:Kd,S:$d,u:Fd,U:Hd,V:Od,w:Id,W:Ud,x:Q,X:R,y:uo,Y:co,Z:Bd,"%":jd};M.x=v(n,M),M.X=v(r,M),M.c=v(t,M),S.x=v(n,S),S.X=v(r,S),S.c=v(t,S);function v(Y,W){return function(Z){var O=[],b=-1,g=0,te=Y.length,fe,pe,ve;for(Z instanceof Date||(Z=new Date(+Z));++b<te;)Y.charCodeAt(b)===37&&(O.push(Y.slice(g,b)),(pe=lo[fe=Y.charAt(++b)])!=null?fe=Y.charAt(++b):pe=fe==="e"?" ":"0",(ve=W[fe])&&(fe=ve(Z,pe)),O.push(fe),g=b+1);return O.push(Y.slice(g,b)),O.join("")}}function D(Y,W){return function(Z){var O=An(1900,void 0,1),b=U(O,Y,Z+="",0),g,te;if(b!=Z.length)return null;if("Q"in O)return new Date(O.Q);if("s"in O)return new Date(O.s*1e3+("L"in O?O.L:0));if(W&&!("Z"in O)&&(O.Z=0),"p"in O&&(O.H=O.H%12+O.p*12),O.m===void 0&&(O.m="q"in O?O.q:0),"V"in O){if(O.V<1||O.V>53)return null;"w"in O||(O.w=1),"Z"in O?(g=_a(An(O.y,0,1)),te=g.getUTCDay(),g=te>4||te===0?Br.ceil(g):Br(g),g=ts.offset(g,(O.V-1)*7),O.y=g.getUTCFullYear(),O.m=g.getUTCMonth(),O.d=g.getUTCDate()+(O.w+6)%7):(g=va(An(O.y,0,1)),te=g.getDay(),g=te>4||te===0?Ur.ceil(g):Ur(g),g=sa.offset(g,(O.V-1)*7),O.y=g.getFullYear(),O.m=g.getMonth(),O.d=g.getDate()+(O.w+6)%7)}else("W"in O||"U"in O)&&("w"in O||(O.w="u"in O?O.u%7:"W"in O?1:0),te="Z"in O?_a(An(O.y,0,1)).getUTCDay():va(An(O.y,0,1)).getDay(),O.m=0,O.d="W"in O?(O.w+6)%7+O.W*7-(te+5)%7:O.w+O.U*7-(te+6)%7);return"Z"in O?(O.H+=O.Z/100|0,O.M+=O.Z%100,_a(O)):va(O)}}function U(Y,W,Z,O){for(var b=0,g=W.length,te=Z.length,fe,pe;b<g;){if(O>=te)return-1;if(fe=W.charCodeAt(b++),fe===37){if(fe=W.charAt(b++),pe=p[fe in lo?W.charAt(b++):fe],!pe||(O=pe(Y,Z,O))<0)return-1}else if(fe!=Z.charCodeAt(O++))return-1}return O}function I(Y,W,Z){var O=c.exec(W.slice(Z));return O?(Y.p=u[O[0].toLowerCase()],Z+O[0].length):-1}function F(Y,W,Z){var O=h.exec(W.slice(Z));return O?(Y.w=x[O[0].toLowerCase()],Z+O[0].length):-1}function _(Y,W,Z){var O=f.exec(W.slice(Z));return O?(Y.w=d[O[0].toLowerCase()],Z+O[0].length):-1}function w(Y,W,Z){var O=E.exec(W.slice(Z));return O?(Y.m=T[O[0].toLowerCase()],Z+O[0].length):-1}function q(Y,W,Z){var O=m.exec(W.slice(Z));return O?(Y.m=A[O[0].toLowerCase()],Z+O[0].length):-1}function H(Y,W,Z){return U(Y,t,W,Z)}function Q(Y,W,Z){return U(Y,n,W,Z)}function R(Y,W,Z){return U(Y,r,W,Z)}function $(Y){return o[Y.getDay()]}function k(Y){return s[Y.getDay()]}function N(Y){return l[Y.getMonth()]}function y(Y){return i[Y.getMonth()]}function re(Y){return a[+(Y.getHours()>=12)]}function ae(Y){return 1+~~(Y.getMonth()/3)}function de(Y){return o[Y.getUTCDay()]}function G(Y){return s[Y.getUTCDay()]}function ue(Y){return l[Y.getUTCMonth()]}function C(Y){return i[Y.getUTCMonth()]}function ne(Y){return a[+(Y.getUTCHours()>=12)]}function me(Y){return 1+~~(Y.getUTCMonth()/3)}return{format:function(Y){var W=v(Y+="",M);return W.toString=function(){return Y},W},parse:function(Y){var W=D(Y+="",!1);return W.toString=function(){return Y},W},utcFormat:function(Y){var W=v(Y+="",S);return W.toString=function(){return Y},W},utcParse:function(Y){var W=D(Y+="",!0);return W.toString=function(){return Y},W}}}var lo={"-":"",_:" ",0:"0"},Ie=/^\s*\d+/,Pd=/^%/,Dd=/[\\^$*+?|[\]().{}]/g;function be(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",s=a.length;return r+(s<n?new Array(n-s+1).join(t)+a:a)}function Rd(e){return e.replace(Dd,"\\$&")}function En(e){return new RegExp("^(?:"+e.map(Rd).join("|")+")","i")}function Ln(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function Id(e,t,n){var r=Ie.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Fd(e,t,n){var r=Ie.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Hd(e,t,n){var r=Ie.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Od(e,t,n){var r=Ie.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Ud(e,t,n){var r=Ie.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function co(e,t,n){var r=Ie.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function uo(e,t,n){var r=Ie.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Bd(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Vd(e,t,n){var r=Ie.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function zd(e,t,n){var r=Ie.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function fo(e,t,n){var r=Ie.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Yd(e,t,n){var r=Ie.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function ho(e,t,n){var r=Ie.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Wd(e,t,n){var r=Ie.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function $d(e,t,n){var r=Ie.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Gd(e,t,n){var r=Ie.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Xd(e,t,n){var r=Ie.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function jd(e,t,n){var r=Pd.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Zd(e,t,n){var r=Ie.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Kd(e,t,n){var r=Ie.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function go(e,t){return be(e.getDate(),t,2)}function Qd(e,t){return be(e.getHours(),t,2)}function Jd(e,t){return be(e.getHours()%12||12,t,2)}function eh(e,t){return be(1+sa.count(Dt(e),e),t,3)}function Ti(e,t){return be(e.getMilliseconds(),t,3)}function th(e,t){return Ti(e,t)+"000"}function nh(e,t){return be(e.getMonth()+1,t,2)}function rh(e,t){return be(e.getMinutes(),t,2)}function ah(e,t){return be(e.getSeconds(),t,2)}function sh(e){var t=e.getDay();return t===0?7:t}function oh(e,t){return be(es.count(Dt(e)-1,e),t,2)}function Ai(e){var t=e.getDay();return t>=4||t===0?bn(e):bn.ceil(e)}function ih(e,t){return e=Ai(e),be(bn.count(Dt(e),e)+(Dt(e).getDay()===4),t,2)}function lh(e){return e.getDay()}function ch(e,t){return be(Ur.count(Dt(e)-1,e),t,2)}function uh(e,t){return be(e.getFullYear()%100,t,2)}function fh(e,t){return e=Ai(e),be(e.getFullYear()%100,t,2)}function dh(e,t){return be(e.getFullYear()%1e4,t,4)}function hh(e,t){var n=e.getDay();return e=n>=4||n===0?bn(e):bn.ceil(e),be(e.getFullYear()%1e4,t,4)}function gh(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+be(t/60|0,"0",2)+be(t%60,"0",2)}function po(e,t){return be(e.getUTCDate(),t,2)}function ph(e,t){return be(e.getUTCHours(),t,2)}function mh(e,t){return be(e.getUTCHours()%12||12,t,2)}function yh(e,t){return be(1+ts.count(Wt(e),e),t,3)}function Ei(e,t){return be(e.getUTCMilliseconds(),t,3)}function vh(e,t){return Ei(e,t)+"000"}function _h(e,t){return be(e.getUTCMonth()+1,t,2)}function xh(e,t){return be(e.getUTCMinutes(),t,2)}function bh(e,t){return be(e.getUTCSeconds(),t,2)}function wh(e){var t=e.getUTCDay();return t===0?7:t}function kh(e,t){return be(Mi.count(Wt(e)-1,e),t,2)}function Li(e){var t=e.getUTCDay();return t>=4||t===0?wn(e):wn.ceil(e)}function Sh(e,t){return e=Li(e),be(wn.count(Wt(e),e)+(Wt(e).getUTCDay()===4),t,2)}function Ch(e){return e.getUTCDay()}function Mh(e,t){return be(Br.count(Wt(e)-1,e),t,2)}function Th(e,t){return be(e.getUTCFullYear()%100,t,2)}function Ah(e,t){return e=Li(e),be(e.getUTCFullYear()%100,t,2)}function Eh(e,t){return be(e.getUTCFullYear()%1e4,t,4)}function Lh(e,t){var n=e.getUTCDay();return e=n>=4||n===0?wn(e):wn.ceil(e),be(e.getUTCFullYear()%1e4,t,4)}function qh(){return"+0000"}function mo(){return"%"}function yo(e){return+e}function vo(e){return Math.floor(+e/1e3)}var un,qi,ns;Nh({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Nh(e){return un=Nd(e),qi=un.format,ns=un.parse,un.utcFormat,un.utcParse,un}var Hn=1e3,On=Hn*60,Un=On*60,Qn=Un*24,Ph=Qn*7,_o=Qn*30,xa=Qn*365;function Dh(e){return new Date(e)}function Rh(e){return e instanceof Date?+e:+new Date(+e)}function Ni(e,t,n,r,a,s,o,i,l){var c=vi(_t,_t),u=c.invert,f=c.domain,d=l(".%L"),h=l(":%S"),x=l("%I:%M"),m=l("%I %p"),A=l("%a %d"),E=l("%b %d"),T=l("%B"),M=l("%Y"),S=[[o,1,Hn],[o,5,5*Hn],[o,15,15*Hn],[o,30,30*Hn],[s,1,On],[s,5,5*On],[s,15,15*On],[s,30,30*On],[a,1,Un],[a,3,3*Un],[a,6,6*Un],[a,12,12*Un],[r,1,Qn],[r,2,2*Qn],[n,1,Ph],[t,1,_o],[t,3,3*_o],[e,1,xa]];function p(D){return(o(D)<D?d:s(D)<D?h:a(D)<D?x:r(D)<D?m:t(D)<D?n(D)<D?A:E:e(D)<D?T:M)(D)}function v(D,U,I,F){if(D==null&&(D=10),typeof D=="number"){var _=Math.abs(I-U)/D,w=gi(function(q){return q[2]}).right(S,_);w===S.length?(F=Ha(U/xa,I/xa,D),D=e):w?(w=S[_/S[w-1][2]<S[w][2]/_?w-1:w],F=w[1],D=w[0]):(F=Math.max(Ha(U,I,D),1),D=i)}return F==null?D:D.every(F)}return c.invert=function(D){return new Date(u(D))},c.domain=function(D){return arguments.length?f(mi.call(D,Rh)):f().map(Dh)},c.ticks=function(D,U){var I=f(),F=I[0],_=I[I.length-1],w=_<F,q;return w&&(q=F,F=_,_=q),q=v(D,F,_,U),q=q?q.range(F,_+1):[],w?q.reverse():q},c.tickFormat=function(D,U){return U==null?p:l(U)},c.nice=function(D,U){var I=f();return(D=v(D,I[0],I[I.length-1],U))?f(kd(I,D)):c},c.copy=function(){return yi(c,Ni(e,t,n,r,a,s,o,i,l))},c}function Pi(){return aa.apply(Ni(Dt,Ci,es,sa,Si,ki,wi,Hr,qi).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ih(){var e=0,t=1,n,r,a,s,o=_t,i=!1,l;function c(u){return isNaN(u=+u)?l:o(a===0?.5:(u=(s(u)-n)*a,i?Math.max(0,Math.min(1,u)):u))}return c.domain=function(u){return arguments.length?(n=s(e=+u[0]),r=s(t=+u[1]),a=n===r?0:1/(r-n),c):[e,t]},c.clamp=function(u){return arguments.length?(i=!!u,c):i},c.interpolator=function(u){return arguments.length?(o=u,c):o},c.unknown=function(u){return arguments.length?(l=u,c):l},function(u){return s=u,n=u(e),r=u(t),a=n===r?0:1/(r-n),c}}function Fh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Di(){var e=_i(Ih()(_t));return e.copy=function(){return Fh(e,Di())},md.apply(e,arguments)}function rs(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Ri=rs("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Ii(e){return fu(e[e.length-1])}var Fi=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(rs);Ii(Fi);var Hh=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(rs);const Oh=Ii(Hh);function xe(e){return function(){return e}}var xo=Math.abs,Ue=Math.atan2,Bt=Math.cos,Uh=Math.max,ba=Math.min,mt=Math.sin,fn=Math.sqrt,Qe=1e-12,Jn=Math.PI,Vr=Jn/2,Sr=2*Jn;function Bh(e){return e>1?0:e<-1?Jn:Math.acos(e)}function bo(e){return e>=1?Vr:e<=-1?-Vr:Math.asin(e)}function Vh(e){return e.innerRadius}function zh(e){return e.outerRadius}function Yh(e){return e.startAngle}function Wh(e){return e.endAngle}function $h(e){return e&&e.padAngle}function Gh(e,t,n,r,a,s,o,i){var l=n-e,c=r-t,u=o-a,f=i-s,d=f*l-u*c;if(!(d*d<Qe))return d=(u*(t-s)-f*(e-a))/d,[e+d*l,t+d*c]}function mr(e,t,n,r,a,s,o){var i=e-n,l=t-r,c=(o?s:-s)/fn(i*i+l*l),u=c*l,f=-c*i,d=e+u,h=t+f,x=n+u,m=r+f,A=(d+x)/2,E=(h+m)/2,T=x-d,M=m-h,S=T*T+M*M,p=a-s,v=d*m-x*h,D=(M<0?-1:1)*fn(Uh(0,p*p*S-v*v)),U=(v*M-T*D)/S,I=(-v*T-M*D)/S,F=(v*M+T*D)/S,_=(-v*T+M*D)/S,w=U-A,q=I-E,H=F-A,Q=_-E;return w*w+q*q>H*H+Q*Q&&(U=F,I=_),{cx:U,cy:I,x01:-u,y01:-f,x11:U*(a/p-1),y11:I*(a/p-1)}}function Xh(){var e=Vh,t=zh,n=xe(0),r=null,a=Yh,s=Wh,o=$h,i=null;function l(){var c,u,f=+e.apply(this,arguments),d=+t.apply(this,arguments),h=a.apply(this,arguments)-Vr,x=s.apply(this,arguments)-Vr,m=xo(x-h),A=x>h;if(i||(i=c=ra()),d<f&&(u=d,d=f,f=u),!(d>Qe))i.moveTo(0,0);else if(m>Sr-Qe)i.moveTo(d*Bt(h),d*mt(h)),i.arc(0,0,d,h,x,!A),f>Qe&&(i.moveTo(f*Bt(x),f*mt(x)),i.arc(0,0,f,x,h,A));else{var E=h,T=x,M=h,S=x,p=m,v=m,D=o.apply(this,arguments)/2,U=D>Qe&&(r?+r.apply(this,arguments):fn(f*f+d*d)),I=ba(xo(d-f)/2,+n.apply(this,arguments)),F=I,_=I,w,q;if(U>Qe){var H=bo(U/f*mt(D)),Q=bo(U/d*mt(D));(p-=H*2)>Qe?(H*=A?1:-1,M+=H,S-=H):(p=0,M=S=(h+x)/2),(v-=Q*2)>Qe?(Q*=A?1:-1,E+=Q,T-=Q):(v=0,E=T=(h+x)/2)}var R=d*Bt(E),$=d*mt(E),k=f*Bt(S),N=f*mt(S);if(I>Qe){var y=d*Bt(T),re=d*mt(T),ae=f*Bt(M),de=f*mt(M),G;if(m<Jn&&(G=Gh(R,$,ae,de,y,re,k,N))){var ue=R-G[0],C=$-G[1],ne=y-G[0],me=re-G[1],Y=1/mt(Bh((ue*ne+C*me)/(fn(ue*ue+C*C)*fn(ne*ne+me*me)))/2),W=fn(G[0]*G[0]+G[1]*G[1]);F=ba(I,(f-W)/(Y-1)),_=ba(I,(d-W)/(Y+1))}}v>Qe?_>Qe?(w=mr(ae,de,R,$,d,_,A),q=mr(y,re,k,N,d,_,A),i.moveTo(w.cx+w.x01,w.cy+w.y01),_<I?i.arc(w.cx,w.cy,_,Ue(w.y01,w.x01),Ue(q.y01,q.x01),!A):(i.arc(w.cx,w.cy,_,Ue(w.y01,w.x01),Ue(w.y11,w.x11),!A),i.arc(0,0,d,Ue(w.cy+w.y11,w.cx+w.x11),Ue(q.cy+q.y11,q.cx+q.x11),!A),i.arc(q.cx,q.cy,_,Ue(q.y11,q.x11),Ue(q.y01,q.x01),!A))):(i.moveTo(R,$),i.arc(0,0,d,E,T,!A)):i.moveTo(R,$),!(f>Qe)||!(p>Qe)?i.lineTo(k,N):F>Qe?(w=mr(k,N,y,re,f,-F,A),q=mr(R,$,ae,de,f,-F,A),i.lineTo(w.cx+w.x01,w.cy+w.y01),F<I?i.arc(w.cx,w.cy,F,Ue(w.y01,w.x01),Ue(q.y01,q.x01),!A):(i.arc(w.cx,w.cy,F,Ue(w.y01,w.x01),Ue(w.y11,w.x11),!A),i.arc(0,0,f,Ue(w.cy+w.y11,w.cx+w.x11),Ue(q.cy+q.y11,q.cx+q.x11),A),i.arc(q.cx,q.cy,F,Ue(q.y11,q.x11),Ue(q.y01,q.x01),!A))):i.arc(0,0,f,S,M,A)}if(i.closePath(),c)return i=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,u=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-Jn/2;return[Bt(u)*c,mt(u)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:xe(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:xe(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:xe(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:xe(+c),l):r},l.startAngle=function(c){return arguments.length?(a=typeof c=="function"?c:xe(+c),l):a},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:xe(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:xe(+c),l):o},l.context=function(c){return arguments.length?(i=c??null,l):i},l}function Hi(e){this._context=e}Hi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Oi(e){return new Hi(e)}function Ui(e){return e[0]}function Bi(e){return e[1]}function zr(){var e=Ui,t=Bi,n=xe(!0),r=null,a=Oi,s=null;function o(i){var l,c=i.length,u,f=!1,d;for(r==null&&(s=a(d=ra())),l=0;l<=c;++l)!(l<c&&n(u=i[l],l,i))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(u,l,i),+t(u,l,i));if(d)return s=null,d+""||null}return o.x=function(i){return arguments.length?(e=typeof i=="function"?i:xe(+i),o):e},o.y=function(i){return arguments.length?(t=typeof i=="function"?i:xe(+i),o):t},o.defined=function(i){return arguments.length?(n=typeof i=="function"?i:xe(!!i),o):n},o.curve=function(i){return arguments.length?(a=i,r!=null&&(s=a(r)),o):a},o.context=function(i){return arguments.length?(i==null?r=s=null:s=a(r=i),o):r},o}function jh(){var e=Ui,t=null,n=xe(0),r=Bi,a=xe(!0),s=null,o=Oi,i=null;function l(u){var f,d,h,x=u.length,m,A=!1,E,T=new Array(x),M=new Array(x);for(s==null&&(i=o(E=ra())),f=0;f<=x;++f){if(!(f<x&&a(m=u[f],f,u))===A)if(A=!A)d=f,i.areaStart(),i.lineStart();else{for(i.lineEnd(),i.lineStart(),h=f-1;h>=d;--h)i.point(T[h],M[h]);i.lineEnd(),i.areaEnd()}A&&(T[f]=+e(m,f,u),M[f]=+n(m,f,u),i.point(t?+t(m,f,u):T[f],r?+r(m,f,u):M[f]))}if(E)return i=null,E+""||null}function c(){return zr().defined(a).curve(o).context(s)}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:xe(+u),t=null,l):e},l.x0=function(u){return arguments.length?(e=typeof u=="function"?u:xe(+u),l):e},l.x1=function(u){return arguments.length?(t=u==null?null:typeof u=="function"?u:xe(+u),l):t},l.y=function(u){return arguments.length?(n=typeof u=="function"?u:xe(+u),r=null,l):n},l.y0=function(u){return arguments.length?(n=typeof u=="function"?u:xe(+u),l):n},l.y1=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:xe(+u),l):r},l.lineX0=l.lineY0=function(){return c().x(e).y(n)},l.lineY1=function(){return c().x(e).y(r)},l.lineX1=function(){return c().x(t).y(n)},l.defined=function(u){return arguments.length?(a=typeof u=="function"?u:xe(!!u),l):a},l.curve=function(u){return arguments.length?(o=u,s!=null&&(i=o(s)),l):o},l.context=function(u){return arguments.length?(u==null?s=i=null:i=o(s=u),l):s},l}function Zh(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Kh(e){return e}function Qh(){var e=Kh,t=Zh,n=null,r=xe(0),a=xe(Sr),s=xe(0);function o(i){var l,c=i.length,u,f,d=0,h=new Array(c),x=new Array(c),m=+r.apply(this,arguments),A=Math.min(Sr,Math.max(-Sr,a.apply(this,arguments)-m)),E,T=Math.min(Math.abs(A)/c,s.apply(this,arguments)),M=T*(A<0?-1:1),S;for(l=0;l<c;++l)(S=x[h[l]=l]=+e(i[l],l,i))>0&&(d+=S);for(t!=null?h.sort(function(p,v){return t(x[p],x[v])}):n!=null&&h.sort(function(p,v){return n(i[p],i[v])}),l=0,f=d?(A-c*M)/d:0;l<c;++l,m=E)u=h[l],S=x[u],E=m+(S>0?S*f:0)+M,x[u]={data:i[u],index:l,value:S,startAngle:m,endAngle:E,padAngle:T};return x}return o.value=function(i){return arguments.length?(e=typeof i=="function"?i:xe(+i),o):e},o.sortValues=function(i){return arguments.length?(t=i,n=null,o):t},o.sort=function(i){return arguments.length?(n=i,t=null,o):n},o.startAngle=function(i){return arguments.length?(r=typeof i=="function"?i:xe(+i),o):r},o.endAngle=function(i){return arguments.length?(a=typeof i=="function"?i:xe(+i),o):a},o.padAngle=function(i){return arguments.length?(s=typeof i=="function"?i:xe(+i),o):s},o}var wo=Array.prototype.slice;function ko(e,t){if((o=e.length)>1)for(var n=1,r,a,s=e[t[0]],o,i=s.length;n<o;++n)for(a=s,s=e[t[n]],r=0;r<i;++r)s[r][1]+=s[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function So(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Jh(e,t){return e[t]}function Vi(){var e=xe([]),t=So,n=ko,r=Jh;function a(s){var o=e.apply(this,arguments),i,l=s.length,c=o.length,u=new Array(c),f;for(i=0;i<c;++i){for(var d=o[i],h=u[i]=new Array(l),x=0,m;x<l;++x)h[x]=m=[0,+r(s[x],d,x,s)],m.data=s[x];h.key=d}for(i=0,f=t(u);i<c;++i)u[f[i]].index=i;return n(u,f),u}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:xe(wo.call(s)),a):e},a.value=function(s){return arguments.length?(r=typeof s=="function"?s:xe(+s),a):r},a.order=function(s){return arguments.length?(t=s==null?So:typeof s=="function"?s:xe(wo.call(s)),a):t},a.offset=function(s){return arguments.length?(n=s??ko,a):n},a}function Yr(){this._=null}function oa(e){e.U=e.C=e.L=e.R=e.P=e.N=null}Yr.prototype={constructor:Yr,insert:function(e,t){var n,r,a;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Co(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(a=r.R,a&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.R&&(qn(this,n),e=n,n=e.U),n.C=!1,r.C=!0,Nn(this,r))):(a=r.L,a&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.L&&(Nn(this,n),e=n,n=e.U),n.C=!1,r.C=!0,qn(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n,r=e.L,a=e.R,s,o;if(r?a?s=Co(a):s=r:s=a,t?t.L===e?t.L=s:t.R=s:this._=s,r&&a?(o=s.C,s.C=e.C,s.L=r,r.U=s,s!==a?(t=s.U,s.U=e.U,e=s.R,t.L=e,s.R=a,a.U=s):(s.U=t,t=s,e=s.R)):(o=e.C,e=s),e&&(e.U=t),!o){if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){if(n=t.R,n.C&&(n.C=!1,t.C=!0,qn(this,t),n=t.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,Nn(this,n),n=t.R),n.C=t.C,t.C=n.R.C=!1,qn(this,t),e=this._;break}}else if(n=t.L,n.C&&(n.C=!1,t.C=!0,Nn(this,t),n=t.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,qn(this,n),n=t.L),n.C=t.C,t.C=n.L.C=!1,Nn(this,t),e=this._;break}n.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}}};function qn(e,t){var n=t,r=t.R,a=n.U;a?a.L===n?a.L=r:a.R=r:e._=r,r.U=a,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Nn(e,t){var n=t,r=t.L,a=n.U;a?a.L===n?a.L=r:a.R=r:e._=r,r.U=a,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Co(e){for(;e.L;)e=e.L;return e}function Bn(e,t,n,r){var a=[null,null],s=Ve.push(a)-1;return a.left=e,a.right=t,n&&Wr(a,e,t,n),r&&Wr(a,t,e,r),rt[e.index].halfedges.push(s),rt[t.index].halfedges.push(s),a}function Pn(e,t,n){var r=[t,n];return r.left=e,r}function Wr(e,t,n,r){!e[0]&&!e[1]?(e[0]=r,e.left=t,e.right=n):e.left===n?e[1]=r:e[0]=r}function eg(e,t,n,r,a){var s=e[0],o=e[1],i=s[0],l=s[1],c=o[0],u=o[1],f=0,d=1,h=c-i,x=u-l,m;if(m=t-i,!(!h&&m>0)){if(m/=h,h<0){if(m<f)return;m<d&&(d=m)}else if(h>0){if(m>d)return;m>f&&(f=m)}if(m=r-i,!(!h&&m<0)){if(m/=h,h<0){if(m>d)return;m>f&&(f=m)}else if(h>0){if(m<f)return;m<d&&(d=m)}if(m=n-l,!(!x&&m>0)){if(m/=x,x<0){if(m<f)return;m<d&&(d=m)}else if(x>0){if(m>d)return;m>f&&(f=m)}if(m=a-l,!(!x&&m<0)){if(m/=x,x<0){if(m>d)return;m>f&&(f=m)}else if(x>0){if(m<f)return;m<d&&(d=m)}return!(f>0)&&!(d<1)||(f>0&&(e[0]=[i+f*h,l+f*x]),d<1&&(e[1]=[i+d*h,l+d*x])),!0}}}}}function tg(e,t,n,r,a){var s=e[1];if(s)return!0;var o=e[0],i=e.left,l=e.right,c=i[0],u=i[1],f=l[0],d=l[1],h=(c+f)/2,x=(u+d)/2,m,A;if(d===u){if(h<t||h>=r)return;if(c>f){if(!o)o=[h,n];else if(o[1]>=a)return;s=[h,a]}else{if(!o)o=[h,a];else if(o[1]<n)return;s=[h,n]}}else if(m=(c-f)/(d-u),A=x-m*h,m<-1||m>1)if(c>f){if(!o)o=[(n-A)/m,n];else if(o[1]>=a)return;s=[(a-A)/m,a]}else{if(!o)o=[(a-A)/m,a];else if(o[1]<n)return;s=[(n-A)/m,n]}else if(u<d){if(!o)o=[t,m*t+A];else if(o[0]>=r)return;s=[r,m*r+A]}else{if(!o)o=[r,m*r+A];else if(o[0]<t)return;s=[t,m*t+A]}return e[0]=o,e[1]=s,!0}function ng(e,t,n,r){for(var a=Ve.length,s;a--;)(!tg(s=Ve[a],e,t,n,r)||!eg(s,e,t,n,r)||!(Math.abs(s[0][0]-s[1][0])>Ae||Math.abs(s[0][1]-s[1][1])>Ae))&&delete Ve[a]}function rg(e){return rt[e.index]={site:e,halfedges:[]}}function ag(e,t){var n=e.site,r=t.left,a=t.right;return n===a&&(a=r,r=n),a?Math.atan2(a[1]-r[1],a[0]-r[0]):(n===r?(r=t[1],a=t[0]):(r=t[0],a=t[1]),Math.atan2(r[0]-a[0],a[1]-r[1]))}function zi(e,t){return t[+(t.left!==e.site)]}function sg(e,t){return t[+(t.left===e.site)]}function og(){for(var e=0,t=rt.length,n,r,a,s;e<t;++e)if((n=rt[e])&&(s=(r=n.halfedges).length)){var o=new Array(s),i=new Array(s);for(a=0;a<s;++a)o[a]=a,i[a]=ag(n,Ve[r[a]]);for(o.sort(function(l,c){return i[c]-i[l]}),a=0;a<s;++a)i[a]=r[o[a]];for(a=0;a<s;++a)r[a]=i[a]}}function ig(e,t,n,r){var a=rt.length,s,o,i,l,c,u,f,d,h,x,m,A,E=!0;for(s=0;s<a;++s)if(o=rt[s]){for(i=o.site,c=o.halfedges,l=c.length;l--;)Ve[c[l]]||c.splice(l,1);for(l=0,u=c.length;l<u;)x=sg(o,Ve[c[l]]),m=x[0],A=x[1],f=zi(o,Ve[c[++l%u]]),d=f[0],h=f[1],(Math.abs(m-d)>Ae||Math.abs(A-h)>Ae)&&(c.splice(l,0,Ve.push(Pn(i,x,Math.abs(m-e)<Ae&&r-A>Ae?[e,Math.abs(d-e)<Ae?h:r]:Math.abs(A-r)<Ae&&n-m>Ae?[Math.abs(h-r)<Ae?d:n,r]:Math.abs(m-n)<Ae&&A-t>Ae?[n,Math.abs(d-n)<Ae?h:t]:Math.abs(A-t)<Ae&&m-e>Ae?[Math.abs(h-t)<Ae?d:e,t]:null))-1),++u);u&&(E=!1)}if(E){var T,M,S,p=1/0;for(s=0,E=null;s<a;++s)(o=rt[s])&&(i=o.site,T=i[0]-e,M=i[1]-t,S=T*T+M*M,S<p&&(p=S,E=o));if(E){var v=[e,t],D=[e,r],U=[n,r],I=[n,t];E.halfedges.push(Ve.push(Pn(i=E.site,v,D))-1,Ve.push(Pn(i,D,U))-1,Ve.push(Pn(i,U,I))-1,Ve.push(Pn(i,I,v))-1)}}for(s=0;s<a;++s)(o=rt[s])&&(o.halfedges.length||delete rt[s])}var Yi=[],as;function lg(){oa(this),this.x=this.y=this.arc=this.site=this.cy=null}function dn(e){var t=e.P,n=e.N;if(!(!t||!n)){var r=t.site,a=e.site,s=n.site;if(r!==s){var o=a[0],i=a[1],l=r[0]-o,c=r[1]-i,u=s[0]-o,f=s[1]-i,d=2*(l*f-c*u);if(!(d>=-hg)){var h=l*l+c*c,x=u*u+f*f,m=(f*h-c*x)/d,A=(l*x-u*h)/d,E=Yi.pop()||new lg;E.arc=e,E.site=a,E.x=m+o,E.y=(E.cy=A+i)+Math.sqrt(m*m+A*A),e.circle=E;for(var T=null,M=er._;M;)if(E.y<M.y||E.y===M.y&&E.x<=M.x)if(M.L)M=M.L;else{T=M.P;break}else if(M.R)M=M.R;else{T=M;break}er.insert(T,E),T||(as=E)}}}}function pn(e){var t=e.circle;t&&(t.P||(as=t.N),er.remove(t),Yi.push(t),oa(t),e.circle=null)}var Wi=[];function cg(){oa(this),this.edge=this.site=this.circle=null}function Mo(e){var t=Wi.pop()||new cg;return t.site=e,t}function wa(e){pn(e),mn.remove(e),Wi.push(e),oa(e)}function ug(e){var t=e.circle,n=t.x,r=t.cy,a=[n,r],s=e.P,o=e.N,i=[e];wa(e);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<Ae&&Math.abs(r-l.circle.cy)<Ae;)s=l.P,i.unshift(l),wa(l),l=s;i.unshift(l),pn(l);for(var c=o;c.circle&&Math.abs(n-c.circle.x)<Ae&&Math.abs(r-c.circle.cy)<Ae;)o=c.N,i.push(c),wa(c),c=o;i.push(c),pn(c);var u=i.length,f;for(f=1;f<u;++f)c=i[f],l=i[f-1],Wr(c.edge,l.site,c.site,a);l=i[0],c=i[u-1],c.edge=Bn(l.site,c.site,null,a),dn(l),dn(c)}function fg(e){for(var t=e[0],n=e[1],r,a,s,o,i=mn._;i;)if(s=$i(i,n)-t,s>Ae)i=i.L;else if(o=t-dg(i,n),o>Ae){if(!i.R){r=i;break}i=i.R}else{s>-Ae?(r=i.P,a=i):o>-Ae?(r=i,a=i.N):r=a=i;break}rg(e);var l=Mo(e);if(mn.insert(r,l),!(!r&&!a)){if(r===a){pn(r),a=Mo(r.site),mn.insert(l,a),l.edge=a.edge=Bn(r.site,l.site),dn(r),dn(a);return}if(!a){l.edge=Bn(r.site,l.site);return}pn(r),pn(a);var c=r.site,u=c[0],f=c[1],d=e[0]-u,h=e[1]-f,x=a.site,m=x[0]-u,A=x[1]-f,E=2*(d*A-h*m),T=d*d+h*h,M=m*m+A*A,S=[(A*T-h*M)/E+u,(d*M-m*T)/E+f];Wr(a.edge,c,x,S),l.edge=Bn(c,e,null,S),a.edge=Bn(e,x,null,S),dn(r),dn(a)}}function $i(e,t){var n=e.site,r=n[0],a=n[1],s=a-t;if(!s)return r;var o=e.P;if(!o)return-1/0;n=o.site;var i=n[0],l=n[1],c=l-t;if(!c)return i;var u=i-r,f=1/s-1/c,d=u/c;return f?(-d+Math.sqrt(d*d-2*f*(u*u/(-2*c)-l+c/2+a-s/2)))/f+r:(r+i)/2}function dg(e,t){var n=e.N;if(n)return $i(n,t);var r=e.site;return r[1]===t?r[0]:1/0}var Ae=1e-6,hg=1e-12,mn,rt,er,Ve;function gg(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function pg(e,t){return t[1]-e[1]||t[0]-e[0]}function To(e,t){var n=e.sort(pg).pop(),r,a,s;for(Ve=[],rt=new Array(e.length),mn=new Yr,er=new Yr;;)if(s=as,n&&(!s||n[1]<s.y||n[1]===s.y&&n[0]<s.x))(n[0]!==r||n[1]!==a)&&(fg(n),r=n[0],a=n[1]),n=e.pop();else if(s)ug(s.arc);else break;if(og(),t){var o=+t[0][0],i=+t[0][1],l=+t[1][0],c=+t[1][1];ng(o,i,l,c),ig(o,i,l,c)}this.edges=Ve,this.cells=rt,mn=er=Ve=rt=null}To.prototype={constructor:To,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(r){return zi(t,e[r])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){if(i=(s=n.halfedges).length)for(var a=n.site,s,o=-1,i,l,c=t[s[i-1]],u=c.left===a?c.right:c.left;++o<i;)l=u,c=t[s[o]],u=c.left===a?c.right:c.left,l&&u&&r<l.index&&r<u.index&&gg(a,l,u)<0&&e.push([a.data,l.data,u.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var r=this,a,s=r._found||0,o=r.cells.length,i;!(i=r.cells[s]);)if(++s>=o)return null;var l=e-i.site[0],c=t-i.site[1],u=l*l+c*c;do i=r.cells[a=s],s=null,i.halfedges.forEach(function(f){var d=r.edges[f],h=d.left;if(!((h===i.site||!h)&&!(h=d.right))){var x=e-h[0],m=t-h[1],A=x*x+m*m;A<u&&(u=A,s=h.index)}});while(s!==null);return r._found=a,n==null||u<=n*n?i.site:null}};function Vn(e,t,n){this.k=e,this.x=t,this.y=n}Vn.prototype={constructor:Vn,scale:function(e){return e===1?this:new Vn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Vn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Vn.prototype;class yr{constructor(t,n,r,a){let s;typeof t=="string"?s=document.querySelector(t):s=t,s.innerHTML="",Me(s).attr("chart_type","PieExploded"),s.classList.add("PieExploded"),s.classList.add("d3chart"),s.classList.add("chart_container"),this.container=Me(s);const o=700,i=500,l=20,c=40,u=170,f=110,d=this.container.append("svg").attr("width",o).attr("height",i).attr("viewBox",[0,0,o,i]).attr("preserveAspectRatio","xMinYMin meet").attr("style","max-width: 100%; height: auto;");let h=.4,x=Math.min(o-f-c,i-l-u)/2,m=x+f,A=80,E=50,T=100,M=16,S=c,p=i-u/3,v={M:" million",G:" billion",T:" trillion"},D=$e(Ri);const U=(g,te)=>Array(te-g+1).fill().map((fe,pe)=>g+pe);var I=Di(Oh).domain([0,30]),F=U(5,20).map(g=>I(g)),_=$e().range(F);let w=Mr(n,g=>g.value);var q=Mr(n,g=>g.exploded?g.value:0),H=q/w,Q=Math.PI*2*(H/2),R=Math.PI*.5-Q;let $=Qh().startAngle(R).endAngle(Math.PI*2+R).sort((g,te)=>g.exploded<te.exploded?1:-1).value(g=>g.value),k=Xh().innerRadius(x*h).outerRadius(x).cornerRadius(5),N=this.container.append("div").attr("class","d3tooltip").style("display","none");var y=$(n);y.forEach(g=>g.midAngle=pl([g.startAngle,g.endAngle])),y.forEach(g=>g.midAngle+=g.midAngle<=Math.PI*.5?Math.PI*2:0),y.forEach(g=>g.rightHalf=Math.sin(g.midAngle)>0),y.forEach(g=>g.topHalf=Math.cos(g.midAngle)>0),y.forEach(g=>g.quadrant=(g.topHalf?"N":"S")+(g.rightHalf?"E":"W")),y.forEach(g=>g.ascending=Math.sin(g.midAngle)>0==Math.cos(g.midAngle)>0?-1:1),y.forEach(g=>g.texty=Math.round(C(g.midAngle,x)[1])),y.forEach(g=>g.textx=g.rightHalf?Math.round(C(g.midAngle,x)[0])+E:Math.round(C(g.midAngle,x)[0])-T),y.sort((g,te)=>g.quadrant>te.quadrant?1:-1),y.sort(function(g,te){return g.quadrant==te.quadrant&&g.midAngle>te.midAngle?1*g.ascending:0}),y.forEach(function(g){g.elbowx=g.rightHalf?g.textx-E*ne(g.textx):g.textx-T*ne(g.textx)}),y.forEach(g=>g.elbowy=g.texty),y.sort((g,te)=>g.startAngle>te.startAngle?1:-1),y=y.sort(g=>g.data.exploded);let re=d.append("g").attr("transform","translate("+m+","+i/2+")").selectAll("g").data(y).enter().append("g").attr("transform",g=>g.data.exploded?"translate("+A+" 0)":"translate(0 0)");re.append("path").attr("class",g=>g.data.exploded?g.data.key:"non-PACTA").attr("d",k).attr("fill",g=>g.data.exploded?D(g.data.key):_(g.data.key)).attr("stroke","#d9e2e8").style("stroke-width","2px").style("opacity",1).on("mouseover",Z).on("mousemove",O).on("mouseout",b);var ae=re.filter(g=>g.data.exploded),de=ae.append("polyline").attr("stroke","black").style("fill","none").attr("stroke-width",1).attr("points",g=>[C(g.midAngle,x),[g.elbowx,g.elbowy],[g.textx-2*ne(g.textx),g.texty]]),G=ae.append("text").attr("x",function(g){return g.textx}).attr("y",function(g){return g.texty}).attr("text-anchor",function(g){return g.rightHalf?"start":"end"}).text(g=>g.data.key_translation+" "+me(g.data.value/w)).style("dominant-baseline","middle");const ue=.5;W(),d.append("text").attr("transform","translate("+[o-S,p]+")").text(me(q/w)).style("dominant-baseline","middle").style("font-weight","bold").style("text-anchor","end").style("font-size","2em"),d.append("text").attr("transform","translate("+[o-S,p+30]+")").text(a).style("dominant-baseline","middle").style("text-anchor","end");function C(g,te){return[te*Math.sin(g),te*Math.cos(g)*-1]}function ne(g){return g<0?-1:1}function me(g){return g<.001?"< 0.1%":Ne(".2p")(g)}function Y(g){return Ne(".2s")(g).replace(/M/,v.M).replace(/G/,v.G).replace(/T/,v.T)+" "+r}function W(){let g,te,fe,pe,ve,Ee,De,he,Se,ke,Le;g=!1,G.each(function(){te=this,fe=Me(te),pe=fe.attr("y"),G.each(function(){ve=this,te!=ve&&(Ee=Me(ve),fe.attr("text-anchor")==Ee.attr("text-anchor")&&(De=Ee.attr("y"),he=pe-De,!(Math.abs(he)>M)&&(g=!0,Se=he>0?1:-1,ke=Se*ue,fe.attr("y",+pe+ke),Ee.attr("y",+De-ke))))})}),g&&(de.attr("points",function(qe,Oe){return Le=Me(G.nodes()[Oe]),[C(qe.midAngle,x),[qe.elbowx,Le.attr("y")],[qe.textx-2*ne(qe.textx),Le.attr("y")]]}),setTimeout(W,20))}function Z(g){N.html(g.data.key_translation+"<br>"+Y(g.data.value)+" ("+me(g.data.value/w)+")").style("display","inline-block").style("left",Te.pageX+10+"px").style("top",Te.pageY-20+"px")}function O(){N.style("left",Te.pageX+10+"px").style("top",Te.pageY-20+"px")}function b(){N.style("display","none")}}}class Ao{constructor(t,n,r,a,s){let o;typeof t=="string"?o=document.querySelector(t):o=t,o.innerHTML="",o.classList.add("d3chart"),o.classList.add("techexposure_chart"),o.classList.add("chart_container"),this.container=Me(o);const i=600,l=700,c=20,u=170,f=60,d=100,h=30,x=12,m=25;let A="This portfolio",E="Benchmark*",T=" of assets under management<br>",M={before_sec:" of ",after_sec:" sector"},S={before_sec:"Low-carbon ",after_sec:" technologies"},p={top:"Low-carbon technologies",bottom:"within a sector"};const v=this.container.append("svg").attr("width",i).attr("height",l).attr("viewBox",[0,0,i,l]).attr("preserveAspectRatio","xMinYMin meet").attr("style","max-width: 100%; height: auto;");let D="Global Market",U=n.filter(b=>b.asset_class_translation==r).filter(b=>b.equity_market_translation==D).filter(b=>b.this_portfolio==!0|b.portfolio_name==a),I=U.filter(b=>b.this_portfolio).sort(function(b,g){return hl(b.cumsum+b.plan_carsten,g.cumsum+g.plan_carsten)}),F=ie(I,b=>b.ald_sector_translation).keys();U=U.filter(b=>F.includes(b.ald_sector_translation));let _=[];F.forEach(function(b){U.filter(te=>te.ald_sector_translation==b).forEach(function(te){_.push(te)})});let w=Ya(_.map(b=>b.cumsum+b.plan_carsten))*1.05,q=Pt().range([c,l-f]).domain(F),H=Pt().range([0,(h+x)*2]).domain([!0,!1]),Q=At().range([0,i-u-d]).domain([0,w]).nice();v.append("g").attr("class","bars_group").attr("transform","translate("+d+",0)").selectAll("rect").data(_).enter().append("rect").attr("height",h).attr("class","bar").attr("class",b=>b.ald_sector+" "+b.technology).attr("transform",b=>"translate(0,"+q(b.ald_sector_translation)+")").attr("class",b=>b.ald_sector+" "+b.technology).attr("y",b=>H(b.this_portfolio)).attr("x",b=>Q(b.cumsum)).attr("width",b=>Q(b.plan_carsten)).on("mouseover",ne).on("mouseout",W).on("mousemove",Y),v.append("g").attr("class","green_group").attr("transform","translate("+d+",0)").selectAll("rect").data(_).enter().append("rect").attr("class","green_bar").attr("height",5).attr("fill","green").attr("transform",b=>"translate(0,"+q(b.ald_sector_translation)+")").attr("y",b=>H(b.this_portfolio)+h+2).attr("x",b=>Q(b.cumsum)).attr("width",b=>Q(b.plan_carsten)).attr("visibility",b=>b.green?"visible":"hidden").on("mouseover",me).on("mouseout",W).on("mousemove",Y),v.append("g").attr("class","sector_labels").attr("transform","translate("+d+", 0)").selectAll(".sector_label").data(F).enter().append("text").attr("class","sector_label").style("alignment-baseline","bottom").style("text-anchor","middle").attr("fill","black").attr("font-size","0.8em").attr("transform",b=>"translate(0,"+q(b)+") translate(-5,"+(h+x/2)+") rotate(-90)").text(b=>b),v.append("g").attr("class","port_labels").attr("transform","translate("+d+", 0)").selectAll(".portfolio_label").data(F.map(b=>[{ald_sector_translation:b,this_portfolio:!0},{ald_sector_translation:b,this_portfolio:!1}]).flat()).enter().append("text").attr("class","portfolio_label").style("alignment-baseline","central").style("text-anchor","end").attr("fill","black").attr("font-size","0.8em").text(b=>b.this_portfolio?A:E).attr("transform",b=>"translate(-"+m+","+q(b.ald_sector_translation)+")").attr("y",b=>H(b.this_portfolio)+h/2),w>=.04?v.append("g").attr("class","axis").attr("transform","translate("+d+","+(l-c-f+20)+")").call(zt(Q).ticks(5).tickFormat(Ne(".0%"))):v.append("g").attr("class","axis").attr("transform","translate("+d+","+(l-c-f+20)+")").call(zt(Q).ticks(5).tickFormat(Ne(".2%")));let R="*"+a;v.append("g").attr("class","footnote").attr("transform","translate("+(i-u)+","+(l-f/4)+")").selectAll(null).data([R]).enter().append("text").attr("x",0).attr("y",0).style("text-anchor","middle").style("alignment-baseline","central").style("font-size","0.8em").text(b=>b);let $=_.filter(b=>b.sector_prcnt>0).map(b=>(({ald_sector:g,technology:te,ald_sector_translation:fe,technology_translation:pe})=>({ald_sector:g,technology:te,ald_sector_translation:fe,technology_translation:pe}))(b)).filter((b,g,te)=>te.findIndex(fe=>fe.ald_sector===b.ald_sector&&fe.technology===b.technology)===g),k=Z($,s),N=ie(k,b=>b.ald_sector_translation).keys(),y=25;k.forEach(b=>{b.sector_shift=N.indexOf(b.ald_sector_translation)});let re=[];re[0]=0;for(var ae=1;ae<N.length;ae++)re[ae]=re[ae-1]+k.filter(b=>b.ald_sector_translation===N[ae-1]).length;let de=v.append("g").attr("class","legend_group").attr("transform","translate("+(i-d-65)+","+c+")");de.selectAll("rect").data(k).enter().append("rect").attr("width",12).attr("height",12).attr("class",b=>b.ald_sector+" "+b.technology).attr("x",0).attr("y",(b,g)=>g*17+b.sector_shift*y+20),de.selectAll("text").data(k).enter().append("text").text(b=>b.technology_translation).style("alignment-baseline","central").style("text-anchor","start").attr("font-size","0.8em").attr("x",25).attr("y",(b,g)=>g*17+6+b.sector_shift*y+20),de.append("g").attr("class","sector_labels_legend").selectAll("text").data(N).enter().append("text").text(b=>b).style("alignment-baseline","central").style("text-anchor","start").attr("font-size","0.8em").attr("x",0).attr("y",(b,g)=>re[g]*17+6+g*y);let G=v.append("g").attr("class","legend_group");if(_.find(b=>b.green==!0)!=null){let b=[{class:"green",sector_shift:k[k.length-1].sector_shift+1}],g=[{text:p.top,sector_shift:k[k.length-1].sector_shift+1},{text:p.bottom,sector_shift:k[k.length-1].sector_shift+1}],te=re[re.length-1]+k.filter(fe=>fe.ald_sector_translation===N[N.length-1]).length;G.attr("transform","translate("+(i-d-65)+","+(5+te*17+c)+")"),G.selectAll("rect").data(b).enter().append("rect").attr("width",12).attr("height",12).attr("class",fe=>fe.class).attr("fill","green").attr("x",0).attr("y",(fe,pe)=>pe*17+fe.sector_shift*y+20),G.selectAll("text").data(g).enter().append("text").text(fe=>fe.text).style("alignment-baseline","top").style("text-anchor","start").attr("font-size","0.8em").attr("x",25).attr("y",(fe,pe)=>pe*14+5+fe.sector_shift*y+20)}const ue=Me(o).append("div").attr("class","d3tooltip").style("display","none");function C(b){return b=Math.round((b+Number.EPSILON)*1e3)/10,b<.1?"< 0.1%":b+"%"}function ne(b){ue.html(O(b.technology)+"<br>"+C(b.plan_carsten)+T+C(b.sector_prcnt)+M.before_sec+b.ald_sector+M.after_sec).style("display","inline-block")}function me(b){ue.html(S.before_sec+O(b.ald_sector)+S.after_sec+"<br>"+C(b.green_sum)+T+C(b.green_prcnt)+M.before_sec+b.ald_sector+M.after_sec).style("display","inline-block")}function Y(){ue.style("left",Te.pageX+10+"px").style("top",Te.pageY-20+"px")}function W(){ue.style("display","none")}function Z(b,g){let te=ie(b,ve=>ve.ald_sector).keys(),fe=ie(b,ve=>ve.technology).keys(),pe=[];return te.forEach(function(ve){g.filter(De=>De.sector==ve)[0].tech_order.forEach(function(De){if(fe.includes(De)){let he=b.findIndex(Se=>Se.ald_sector==ve&&Se.technology==De);pe.push(b[he])}})}),b.length>pe.length&&console.warn("Not all sector/technology pairs from the data were found in sector_order variable. The legend shown is incomplete. Please, amend the tech_order_in_sectors.json file. "),pe}function O(b){switch(b){case"Electric":return"Electric";case"Hybrid":return"Hybrid";case"ICE":return"ICE";case"FuelCell":return"Fuel Cell";case"Freight":return"Freight";case"Mix":return"Mix";case"Passenger":return"Passenger";case"Grinding":return"Grinding";case"Integrated facility":return"Integrated facility";case"Coal":return"Coal";case"Gas":return"Gas";case"Oil":return"Oil";case"CoalCap":return"Coal Power";case"GasCap":return"Gas Power";case"HydroCap":return"Hydro Power";case"NuclearCap":return"Nuclear Power";case"OilCap":return"Oil Power";case"RenewablesCap":return"Renewables Power";case"Ac-Electric Arc Furnace":return"Ac-Electric Arc Furnace";case"Bof Shop":return"Bof Shop";case"Dc-Electric Arc Furnace":return"Dc-Electric Arc Furnace";case"Open Hearth Meltshop":return"Open Hearth Meltshop";default:return b}}}}function mg(e,t,n){n=typeof n>"u"?{}:n;var r=typeof n.columnsText>"u"?[1,6]:n.columnsText,a=typeof n.columnsNumeric>"u"?[2,5]:n.columnsNumeric,s=typeof n.columnsPercent>"u"?[3]:n.columnsPercent,o=typeof n.columnsShortText>"u"?[4]:n.columnsShortText,i=typeof n.columnValueBreakdown>"u"?5:n.columnValueBreakdown,l=typeof n.columnToMergeHeaderWithContent>"u"?5:n.columnToMergeHeaderWithContent,c=typeof n.columnToMergeHeaderNoContent>"u"?6:n.columnToMergeHeaderNoContent,u=Object.keys(e[0]);Me(t).selectAll("table").remove();var f=Me(t).attr("class","d3chart included_table").style("width","800px"),d=f.append("table"),h=d.append("thead"),x=d.append("tbody");h.append("tr").selectAll("th").data(u).enter().append("th").text(function(v){return v}).style("text-align","center"),l!=null&&c!=null&&(d.selectAll("thead th:nth-child("+l+")").attr("colspan",2),d.selectAll("thead th:nth-child("+c+")").remove());var m=x.selectAll("tr").data(e).enter().append("tr");m.selectAll("td").data(v=>u.map(D=>({value:v[D]}))).enter().append("td").html(v=>v.value).attr("border","none").style("text-align","left"),r.forEach(v=>M(v)),a.forEach(v=>{A(v),S(v)}),s.forEach(v=>{T(v),S(v)}),o.forEach(v=>p(v));function A(v){d.selectAll("tbody td:nth-child("+v+")").html(D=>E(D.value))}function E(v){return v==null?v:v<1e4&&v>-1e4?v>=0?"<0.01":">-0.01":Ne(",.2f")(v/1e6)}function T(v){d.selectAll("tbody td:nth-child("+v+")").html(D=>D.value==null?D.value:Ne(".0%")(D.value))}function M(v){d.selectAll("tbody td:nth-child("+v+")").style("text-align","left")}function S(v){d.selectAll("tbody td:nth-child("+v+")").style("text-align","right")}function p(v){d.selectAll("tbody td:nth-child("+v+")").style("text-align","center")}return d.selectAll("tbody tr:nth-child("+e.length+")").attr("class","summary_row"),i!=null&&(d.selectAll("thead th:nth-child("+i+")").attr("class","column_left_border"),d.selectAll("tbody td:nth-child("+i+")").attr("class","column_left_border")),d}function Je(){let e=document.createElement("div");e.setAttribute("role","alert");let t=document.createElement("div");t.classList="bg-red-500 text-white font-bold rounded-t px-4 py-2",t.appendChild(document.createTextNode("Something went wrong"));let n=document.createElement("div");return n.classList="border border-t-0 border-red-400 rounded-b bg-red-100 px-4 py-3 text-red-700",n.appendChild(document.createTextNode("An error occurred while generating this plot.")),e.appendChild(t),e.appendChild(n),e}function yg(e){let t,n=`<div class="analysis"><div class="analysis-intro grid sm:grid-cols-12"><div class="analysis-intro-text sm:col-span-12 p-4"><h3 class="h3">Portfolio-Level Overview</h3> <br/> <p>The <strong>Portfolio-Level Overview</strong> provides a high-level view of how your
					entire portfolio aligns with climate transition goals. This section offers key insights
					into the climate-related risks and opportunities within your investments, helping you
					understand the overall exposure to sectors, asset classes, and emissions. It answers
					essential questions about the scope of the PACTA analysis, helping you assess the breadth
					and depth of climate-related metrics across your portfolio.
					<br/><br/> Key features in this section:</p> <br/> <ul class="list-disc"><li><strong>Scope of Analysis</strong>: Understand which holdings are included in the
						assessment and if it is a direct or indirect investment.</li> <li><strong>Sector Coverage</strong>: First overview of the exposure to climate-relevant
						sectors and their technologies, as a share of the AUM (assets under management) of the
						portfolio.</li> <li><strong>Emissions Coverage</strong>: Get an estimate of how much of your portfolio&#39;s
						emissions are addressed in the analysis, as well as an overview of your portfolio
						absolute emissions.</li></ul> <br/> <p>You can hover over the graphs to get more in-depth insights of your portfolio-level
					analysis.</p></div></div> <div class="analysis-content grid sm:grid-cols-12 p-4"><div class="analysis-table-explanation sm:col-span-12 card p-4"><h4 class="h4">Asset classes covered by the analysis</h4> <br/> <p>This analysis focuses on asset classes with a direct and measurable impact on the real
					economy, specifically investments in <strong>listed equities</strong> and
					<strong>corporate bonds</strong>
					on the secondary market. These asset classes represent the most accessible and reliable data
					sources for understanding portfolio alignment with climate transition goals. From the total
					market value of the portfolio, <strong>[X]%</strong> is allocated to
					<strong>equity investments</strong>, and <strong>[Y]%</strong> is allocated to
					<strong>corporate bonds</strong>. The table below summarizes the specific financial
					instruments included in the analysis.</p> <div class="table-box sm:col-span-12"><div class="table table-hover" id="includedTable"></div></div></div></div> <div class="analysis-pie grid sm:grid-cols-12 p-4"><div class="analysis-pie-box sm:col-span-12 card p-4"><div class="analysis-pies-explanation sm:col-span-12"><h4 class="h4">Sector Coverage by Assets Under Management and Absolute CO<sub>2</sub> Emissions</h4> <br/>
					The <strong>PACTA analysis</strong> is applied to listed equity and corporate bond
					holdings in the most critical segments of climate-relevant sectors, including
					<strong>upstream oil and gas, coal mining, automotive production (light-duty vehicles), power
						generation, cement production, steel production</strong>, and <strong>aviation</strong>.
					<br/><br/>
					These sectors meet the following criteria:
					<br/><br/> <ul class="list-disc"><li><strong>Climate Relevance</strong>: They are significant contributors to global
							greenhouse gas (GHG) emissions.</li> <li><strong>Scenario Benchmarks</strong>: Scenario benchmarks are available for each
							sector to guide transition expectations.</li> <li><strong>Data Availability</strong>: Sufficient data and business intelligence are
							available to support analysis.</li></ul> <br/>
					While other sectors like <strong>agriculture, forestry, aluminum, paper,</strong> and
					<strong>glass</strong>
					are also climate-relevant, they are not included in this analysis due to the lack of comprehensive
					asset-level or scenario data.
					<br/><br/> <strong>PACTA</strong> focuses on sectoral alignment through production capacity. However,
					estimating <strong>absolute CO<sub>2</sub> emissions</strong> associated with a portfolio
					can provide additional insights into the relative importance of each sector in the
					decarbonization of the portfolio.
					<br/><br/>
					The emissions data used to build the chart below, is sourced by our data provider, from multiple
					channels, including:
					<br/><br/> <ul class="list-disc"><li><strong>Company-reported data</strong> (via sustainability reports),</li> <li><strong>Climate Disclosure Project (CDP)</strong> submissions,</li> <li><strong>Modeled emissions data</strong> based on company filings.</li></ul> <br/>
					The charts below provide an overview of the portfolio&#39;s exposure to
					<strong>PACTA sectors</strong>, and the
					<strong>CO<sub>2</sub>emissions</strong> associated with those sectors.
					<br/>
					The pie charts show:
					<br/><br/> <ul class="list-disc"><li>The share of <strong>assets</strong>
							invested in <strong>PACTA sectors</strong>.</li> <li>The contribution of each sector to the total <strong>CO<sub>2</sub> emissions</strong>
							of the equity and bond portfolio.</li></ul> <br/>
					Comparing these charts allows you to assess the relative climate relevance of different sectors
					in your portfolio. For example, while <strong>PACTA sectors</strong> may represent
					<strong>[X]%</strong>
					of the equity portfolio&#39;s market value and <strong>[Y]%</strong> of the corporate bond
					portfolio&#39;s market value, they are responsible for <strong>[Z]%</strong> and
					<strong>[W]%</strong>
					of the portfolio&#39;s <strong>absolute CO<sub>2</sub> emissions</strong> in equity and corporate
					bonds, respectively.</div> <div class="analysis-pies-box grid sm:grid-cols-12 card p-4"><div class="pies-bonds-text sm:col-span-6" style="text-align: center"><h5 class="h5">Corporate bonds portion of the portfolio</h5></div> <div class="pies-equity-text sm:col-span-6" style="text-align: center"><h5 class="h5">Listed equity portion of the portfolio</h5></div> <div class="pie-value-bonds sm:col-span-6" id="valuePieBonds"></div> <div class="pie-value-equity sm:col-span-6" id="valuePieEquity"></div> <div class="pie-emissions-bonds sm:col-span-6" id="emissionsPieBonds"></div> <div class="pie-emissions-equity sm:col-span-6" id="emissionsPieEquity"></div></div></div></div> <div class="analysis-exposures grid sm:grid-cols-12 p-4"><div class="analysis-exposure-box sm:col-span-12 card p-4"><div class="analysis-exposures-explanation sm:col-span-12"><h4 class="h4">Exposure to climate-relevant sectors and technologies</h4> <br/> <p>Within each climate-relevant sector, different technologies play varying roles in the
						transition to a low-carbon economy. Understanding your portfolio&#39;s exposure to the
						sector and the associated technologies is critical for assessing both <strong>transition risks</strong>
						and <strong>investment opportunities</strong> in the context of climate change.
						<br/>
						The following chart visualizes the portfolio&#39;s exposure to the different sectors and technologies,
						compared to the relevant benchmarks.</p></div> <div class="analysis-exosures-box grid sm:grid-cols-12 p-4"><div class="exposures-bonds-text sm:col-span-6" style="text-align: center"><h5 class="h5">Corporate bonds portion of the portfolio</h5></div> <div class="exposures-equity-text sm:col-span-6" style="text-align: center"><h5 class="h5">Listed equity portion of the portfolio</h5></div> <div class="exposures-bonds sm:col-span-6" id="techMixAllBonds"></div> <div class="exposures-equity sm:col-span-6" id="techMixAllEquity"></div></div></div></div></div>`;return{c(){t=V("div"),t.innerHTML=n,this.h()},l(r){t=z(r,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ge(t)!=="svelte-8w0fom"&&(t.innerHTML=n),this.h()},h(){L(t,"class","content p-4"),L(t,"id","content-portfolio-view")},m(r,a){Ce(r,t,a)},p:et,i:et,o:et,d(r){r&&K(t)}}}function vg(e){return Ba(async()=>{let n=await(await fetch("data/data_included_table.json")).json(),a=await(await fetch("data/data_value_pie_bonds.json")).json(),o=await(await fetch("data/data_value_pie_equity.json")).json(),l=await(await fetch("data/data_emissions_pie_bonds.json")).json(),u=await(await fetch("data/data_emissions_pie_equity.json")).json(),d=await(await fetch("data/data_techexposure.json")).json();function h(){try{new yr(document.querySelector("#valuePieBonds"),a,"USD","of assets' value covered by PACTA sectors")}catch(E){console.error("Error fetching value pie for bonds",E),document.querySelector("#valuePieBonds").innerHTML="",document.querySelector("#valuePieBonds").appendChild(Je())}try{new yr(document.querySelector("#valuePieEquity"),o,"USD","of assets' value covered by PACTA sectors")}catch(E){console.error("Error fetching value pie for equity",E),document.querySelector("#valuePieEquity").innerHTML="",document.querySelector("#valuePieEquity").appendChild(Je())}}function x(){try{new yr(document.querySelector("#emissionsPieBonds"),l,"tonnes CO<sub>2</sub> emissions","of assets' emissions covered by PACTA sectors")}catch(E){console.error("Error fetching emissions pie for bonds",E),document.querySelector("#emissionsPieBonds").innerHTML="",document.querySelector("#emissionsPieBonds").appendChild(Je())}try{new yr(document.querySelector("#emissionsPieEquity"),u,"tonnes CO<sub>2</sub> emissions","of assets' emissions covered by PACTA sectors")}catch(E){console.error("Error fetching emissions pie for equity",E),document.querySelector("#emissionsPieEquity").innerHTML="",document.querySelector("#emissionsPieEquity").appendChild(Je())}}function m(){try{new Ao(document.querySelector("#techMixAllBonds"),d,"Corporate Bonds","iShares Global Corp Bond UCITS ETF",ka)}catch(E){console.error("Error fetching techmix for bonds",E),document.querySelector("#techMixAllBonds").innerHTML="",document.querySelector("#techMixAllBonds").appendChild(Je())}try{new Ao(document.querySelector("#techMixAllEquity"),d,"Listed Equity","iShares MSCI World ETF",ka)}catch(E){console.error("Error fetching techmix for equity",E),document.querySelector("#techMixAllEquity").innerHTML="",document.querySelector("#techMixAllEquity").appendChild(Je())}}function A(){try{mg(n,"#includedTable",{columnsText:[1,6],columnsNumeric:[2,5],columnsPercent:[3],columnsShortText:[4],columnValueBreakdown:5,columnToMergeHeaderWithContent:5,columnToMergeHeaderNoContent:6})}catch{document.querySelector("#includedTable").innerHTML="",document.querySelector("#includedTable").appendChild(Je())}}A(),h(),x(),m()}),[]}class _g extends Gt{constructor(t){super(),Xt(this,t,vg,yg,$t,{})}}class Gi{constructor(t,n){let r;typeof t=="string"?r=document.querySelector(t):r=t,r.innerHTML="",Me(r).attr("chart_type","ExposureStatsTile"),r.classList.add("ExposureStatsTile"),r.classList.add("d3chart"),r.classList.add("chart_container"),this.container=Me(r);const a=250,s=120,o=10,i=5,l=5;let c=(a-l)/2,u=s-i-35,f=(s-i)/2-10,d=a-l;const h=this.container.append("svg").attr("width",a).attr("height",s).attr("viewBox",[0,0,a,s]).attr("preserveAspectRatio","xMinYMin meet").attr("style","max-width: 100%; height: auto;");let x=document.querySelector("#sector_selector").value,m=document.querySelector("#asset_class_selector").value,A=n.filter(S=>S.asset_type==m).filter(S=>S.sector==x);h.append("g").attr("transform","translate("+[c,o]+")").append("text").text(m).style("dominant-baseline","middle").style("font-weight","bold").style("text-anchor","end"),h.append("g").attr("transform","translate("+[c,f]+")").append("text").text(M(A[0].percentage_value_invested)).style("dominant-baseline","middle").style("font-weight","bold").style("text-anchor","end").style("font-size","2.5em");let E=["of the","total portfolio"];h.append("g").attr("transform","translate("+[c,u]+")").selectAll("text").data(E).enter().append("text").attr("transform",(S,p)=>"translate(0, "+p*15+")").text(S=>S).style("dominant-baseline","middle").style("text-anchor","end"),h.append("g").attr("transform","translate("+[d,o]+")").append("text").text(x).style("dominant-baseline","middle").style("font-weight","bold").style("text-anchor","end"),h.append("g").attr("transform","translate("+[d,f]+")").append("text").text(M(A[0].perc_asset_val_sector)).style("dominant-baseline","middle").style("font-weight","bold").style("text-anchor","end").style("font-size","2.5em");let T=["of the",m,"portion of portfolio"];h.append("g").attr("transform","translate("+[d,u]+")").selectAll("text").data(T).enter().append("text").attr("transform",(S,p)=>"translate(0, "+p*15+")").text(S=>S).style("dominant-baseline","middle").style("text-anchor","end").style("font-weight",(S,p)=>p==1?"bold":"normal");function M(S){return S==0?"0%":S<.001?"< 0.1%":Ne(".2p")(S)}}}class xg{constructor(t,n){function r(C,ne){var me=[];return ne.forEach((Y,W)=>{me[W]={},me[W].val_type=Y,C.filter(Z=>Z.val_type==Y).forEach(Z=>{me[W][Z.technology]=Z.value})}),me}function a(C,ne,me){let Y=C.filter(b=>b.year==me),W=r(Y,ne),Z=ci(W[0]).slice(1);return Vi().keys(Z)(W)}function s(C,ne,me){let Y=C.filter(Z=>Z.year==me),W=[];return ne.forEach((Z,O)=>{let b=Y.filter(g=>g.val_type==Z&g.green==!0);W[O]={},W[O].val_type=Z,b.length>0?W[O].green_sum=b[0].green_sum:W[O].green_sum=0}),W}let o;typeof t=="string"?o=document.querySelector(t):o=t,o.innerHTML="",o.classList.add("stacked_bars"),o.classList.add("d3chart"),o.classList.add("chart_container"),this.container=Me(o);const i=928,l=650,c=50,u=50,f=200,d=200,h=this.container.append("svg").attr("width",i).attr("height",l).attr("viewBox",[0,0,i,l]).attr("preserveAspectRatio","xMinYMin meet").attr("style","max-width: 100%; height: auto;");let x=document.querySelector("#sector_selector").value,m=document.querySelector("#asset_class_selector").value,A=document.querySelector("#scenario_source_selector").value,E=document.querySelector("#scenario_selector").value,T=document.querySelector("#equity_market_selector").value,M=document.querySelector("#benchmark_selector").value,S=n.filter(C=>C.asset_class==m).filter(C=>C.ald_sector==x).filter(C=>C.scenario_source==A).filter(C=>C.scenario==E).filter(C=>C.equity_market==T).filter(C=>C.this_portfolio|C.portfolio_name==M),p=ie(S,C=>C.year).keys(),v=[];p.forEach((C,ne)=>{v[ne]=ie(S.filter(me=>me.year==C),me=>me.val_type).keys()});let D=[];p.forEach((C,ne)=>{D[ne]={},D[ne].year=C,D[ne].stackedData=a(S,v[ne],C),D[ne].greenBars=s(S,v[ne],C)});let U=new Set(ie(D[0].stackedData,C=>C.key).keys()),I=new Set(ie(D[1].stackedData,C=>C.key).keys()),F=Array.from(U.union(I));const _=At().domain([0,1]).range([d,i-u]),w=Pt().domain(p).rangeRound([c,l-f]).paddingInner(.1),q=Pt().domain(v[0]).rangeRound([0,w.bandwidth()]).paddingInner(.1),H=Pt().domain(v[1]).rangeRound([0,w.bandwidth()]).paddingInner(.1);let Q=Math.min(q.bandwidth()-q.bandwidth()/5,H.bandwidth()-H.bandwidth()/5);const R=$e().domain(F).range(Math.min(3,Fi[F.length])).unknown("#ccc");h.append("g").attr("transform",function(){return"translate(0, "+w(D[0].year)+")"}).selectAll("g").data(D[0].stackedData).enter().append("g").attr("fill",C=>R(C.key)).attr("class",C=>x+" "+C.key).selectAll("rect").data(C=>C.map(ne=>(ne.key=C.key,ne))).enter().append("rect").attr("x",C=>_(C[0])).attr("y",C=>q(C.data.val_type)).attr("height",Q).attr("width",C=>_(C[1])-_(C[0])).on("mouseover",re).on("mouseout",ue).on("mousemove",G),h.append("g").attr("transform",function(){return"translate(0, "+w(D[1].year)+")"}).selectAll("g").data(D[1].stackedData).enter().append("g").attr("fill",C=>R(C.key)).attr("class",C=>x+" "+C.key).selectAll("rect").data(C=>C.map(ne=>(ne.key=C.key,ne))).enter().append("rect").attr("x",C=>_(C[0])).attr("y",C=>H(C.data.val_type)).attr("height",Q).attr("width",C=>_(C[1])-_(C[0])).on("mouseover",re).on("mouseout",ue).on("mousemove",G),h.append("g").attr("transform",function(){return"translate(0, "+w(D[0].year)+")"}).selectAll().data(D[0].greenBars).join("g").attr("class",C=>"green_bar"+C.val_type).attr("height",5).attr("fill","green").append("rect").attr("x",d).attr("y",C=>q(C.val_type)+11*Q/10).attr("height",Q/5).attr("width",C=>_(C.green_sum)-_(0)).on("mouseover",ae).on("mouseout",ue).on("mousemove",G),h.append("g").attr("transform",function(){return"translate(0, "+w(D[1].year)+")"}).selectAll().data(D[1].greenBars).join("g").attr("class",C=>"green_bar"+C.val_type).attr("height",5).attr("fill","green").append("rect").attr("x",d).attr("y",C=>H(C.val_type)+11*Q/10).attr("height",Q/5).attr("width",C=>_(C.green_sum)-_(0)).on("mouseover",ae).on("mouseout",ue).on("mousemove",G),h.append("g").attr("transform",`translate(0,${c-c/5})`).attr("class","axis").call(Ml(_).ticks(5).tickFormat(Ne(".0%"))).selectAll("text").style("font-size","1.8em"),h.append("g").attr("transform",`translate(0,${l-f})`).attr("class","axis").call(zt(_).ticks(5).tickFormat(Ne(".0%"))).selectAll("text").style("font-size","1.8em"),h.append("g").attr("transform",`translate(${d},${w(D[0].year)})`).attr("class","axis").call(yn(q).tickSizeOuter(0)).call(C=>C.selectAll(".domain").remove()).call(C=>C.selectAll(".tick line").remove()).selectAll("text").style("font-size","1.8em").on("mouseover",de).on("mouseout",ue).on("mousemove",G),h.append("g").attr("transform",`translate(${d},${w(D[1].year)})`).attr("class","axis").call(yn(H).tickSizeOuter(0)).call(C=>C.selectAll(".domain").remove()).call(C=>C.selectAll(".tick line").remove()).selectAll("text").style("font-size","1.8em").on("mouseover",de).on("mouseout",ue).on("mousemove",G),h.append("g").attr("class","axis").call(qo(w).tickSizeOuter(0)).call(C=>C.selectAll(".domain").remove()).call(C=>C.selectAll(".tick line").remove()).selectAll("text").style("font-size","1.8em");let $=h.append("g").attr("transform",`translate(${d},${l-2*f/3})`).attr("class","legend").selectAll("g").data(F).enter().append("g").attr("transform",function(C,ne){return"translate("+ne%3*230+", "+Math.floor(ne/3)*30+")"});if($.append("rect").attr("width",22).attr("height",22).attr("class",C=>x+" "+C),$.append("text").attr("x",30).attr("y",20).text(C=>C).style("font-size","0.9em"),Mr(D[0].greenBars,C=>C.green_sum)+Mr(D[1].greenBars,C=>C.green_sum)>0){let C=h.append("g").attr("transform",`translate(${d},${l-f/4})`).attr("class","legend").selectAll("g").data(["Low-carbon technologies within a sector"]).enter().append("g");C.append("rect").attr("width",22).attr("height",22).attr("fill","green"),C.append("text").attr("x",30).attr("y",20).text(ne=>ne).style("font-size","0.9em")}const N=Me(o).append("div").attr("class","d3tooltip").style("display","none");function y(C){return C=Math.round((C+Number.EPSILON)*1e3)/10,C<.1?"< 0.1%":C+"%"}function re(C){N.html(C.key+":<br>"+y(C[1]-C[0])+" of the "+x+" sector.").style("display","inline-block")}function ae(C){N.html("Low-carbon technologies:<br>"+y(C.green_sum)+" of the "+x+" sector.").style("display","inline-block")}function de(){this.innerHTML=="Scenario"?N.html(E).style("display","inline-block"):this.innerHTML=="Benchmark"&&N.html(M).style("display","inline-block")}function G(){N.style("left",Te.pageX+10+"px").style("top",Te.pageY-20+"px")}function ue(){N.style("display","none")}}}class bg{constructor(t,n){let r;typeof t=="string"?r=document.querySelector(t):r=t,r.innerHTML="",Me(r).attr("chart_type","trajectory_alignment"),r.classList.add("d3chart"),r.classList.add("trajectory_alignment_chart"),Me(r).attr("constructor_name","trajectory_alignment"),r.classList.add("chart_container"),this.container=Me(r);let a=document.querySelector("#asset_class_selector").value,s=document.querySelector("#sector_selector").value,o=document.querySelector("#scenario_source_selector").value,i=document.querySelector("#benchmark_selector").value,l=document.querySelector("#allocation_method_selector").value,c=document.querySelector("#equity_market_selector").value,u=n.filter(B=>B.asset_class==a).filter(B=>B.ald_sector==s).filter(B=>B.scenario_source==o).filter(B=>!B.benchmark|B.portfolio_name==i).filter(B=>B.allocation_translation==l).filter(B=>B.equity_market_translation==c),f=ie(u,B=>B.technology).keys();const d=1e3;let h,x;f.length>3&f.length<=6?(h=550,x=60):f.length>0&f.length<=3?(h=350,x=0):console.log("Too many or too few technologies to create a plot. Please check your data. Maximum number of technologies we support currently is 6.");const m=50,A=50,E=150,T=55,M=this.container.append("svg").attr("width",d).attr("height",h).attr("viewBox",[0,0,d,h]).attr("preserveAspectRatio","xMinYMin meet").attr("style","max-width: 100%; height: auto;");n.forEach(B=>B.date=ns("%Y")(B.year));let S=Ya(ie(u.filter(B=>B.scenario=="production"),B=>B.year).keys());if(u=u.filter(B=>B.year<=S),u.length==0){r.querySelector("svg").innerHTML="";return}let p="Production in ",v="Portfolio",D="Benchmark",U={top:"Yearly production",bottom:"volume"},I="* start date of the analysis",F="(Planned) yearly production: ";const _=Me(r).append("div").attr("class","d3tooltip").style("display","none");let w=ee(o),q=X(o),H=3,Q=60,R=(d-T-E-(H-1)*Q)/H,$=195;const k=Pi().range([0,R]).clamp(!0).domain(Nt(u,B=>B.date));let N=At().range([$,0]).clamp(!0);const y=1+Math.abs(k.domain().reduce((B,j)=>B.getFullYear()-j.getFullYear()));let re,ae,de,G,ue,C,ne,me,Y,W,Z,O,b,g,te,fe,pe,ve,Ee;f.forEach((B,j)=>{if(re=u.filter(J=>J.technology==B),ae=M.append("g").attr("transform",`translate(${j%3*R+Q*(j%3)+T},${Math.floor(j/3)*$+x*Math.floor(j/3)+m})`),de=re.filter(J=>!J.benchmark&&J.scenario=="production"),de.length!=0&&(G=re.filter(J=>J.portfolio_name_translation==i),G.length==0&&console.log("No benchmark data available for selected combination of benchmark, allocation method, equity market and scenario source. Try changing the selection."),ue=re.filter(J=>!J.benchmark),re=re.filter(J=>!J.benchmark||J.portfolio_name_translation==i),re.length!=0)){if(C=li().key(J=>J.scenario).entries(ue).sort(J=>J.key=="production"),ne=se(B),G.length>0?(Y=de[0].value/G[0].value,me=Nt(G,J=>J.value*Y)):me=null,W=Nt(de,J=>J.value),Z=Nt(ue,J=>J.value),N.domain(Nt([me,W,Z].flat())).nice(),ne?C.sort((J,ye)=>ye.values.filter(_e=>_e.year==S)[0].value>J.values.filter(_e=>_e.year==S)[0].value?1:-1):C.sort((J,ye)=>ye.values.filter(_e=>_e.year==S)[0].value>J.values.filter(_e=>_e.year==S)[0].value?-1:1),O=jh().x(J=>k(J.date)).y0(ne?$:0).y1(J=>N(J.value)),b=ae.append("g").attr("class","area_paths"),g=ae.select("g.area_paths"),g.selectAll("*").remove(),b.append("rect").attr("class","worse").attr("x",0).attr("y",0).attr("width",R).attr("height",$).style("fill",q("worse")),g=b.selectAll(".area").data(C.filter(J=>J.key!="production")),g.enter().append("path").attr("class",J=>"area "+J.key).attr("d",J=>O(J.values)).style("fill",J=>q(J.key)),ve=ie(de,J=>J.unit_translation).keys()[0],Ee=ie(re,J=>J.year).keys().slice(0,Math.min(y,5)+1),Ee[0]="31-12-"+Ee[0]+"*",ae.append("g").attr("class","xaxis").attr("transform","translate(0,"+$+")").call(zt(k).ticks(Math.min(y,5)).tickFormat((J,ye)=>Ee[ye])).selectAll("text").style("font-size","1.1em"),ae.append("g").attr("class","yaxis").call(yn(N).ticks(8).tickFormat(Ne(".2s"))).selectAll("text").style("font-size","1.1em"),ae.append("g").attr("class","yaxislabel").append("text").attr("class","yaxislabel").attr("transform","rotate(-90)").attr("y",0-T).attr("x",0-$/2).attr("dy","1em").style("text-anchor","middle").style("alignment-baseline","bottom").text(p+ve),te=ae.append("g").attr("class","production_line_grp"),fe=zr().x(J=>k(J.date)).y(J=>N(+J.value)),te.selectAll("path").remove(),te.selectAll(".dot").remove(),te.append("path").attr("class","production_line").attr("stroke-width",1.5).attr("fill","none").attr("stroke","black").attr("d",()=>fe(de)),te.selectAll(".dot").data(de).enter().append("circle").attr("class","dot").attr("r",2.5).style("stroke","#000").style("fill","#000").attr("cx",J=>k(J.date)).attr("cy",J=>N(+J.value)).on("mouseover",Xe).on("mousemove",je).on("mouseout",Fe),pe=ae.append("g").attr("class","benchmark_line_grp"),pe.selectAll("path").remove(),pe.selectAll(".dot").remove(),G.length>0){let J=zr().x(ye=>k(ye.date)).y(ye=>N(+ye.value*Y));pe.append("path").attr("class","benchmark_line").attr("stroke-width",1.5).attr("fill","none").attr("stroke","black").style("stroke-dasharray","2,2").attr("d",()=>J(G)),pe.selectAll(".dot").data(G).enter().append("circle").attr("class","dot").attr("r",2.5).style("stroke","#000").style("fill","#000").attr("cx",ye=>k(ye.date)).attr("cy",ye=>N(+ye.value*Y))}ae.append("g").attr("class","mini-plot-title").append("text").attr("y",-m/2).attr("x",R/2).attr("dy","1em").style("text-anchor","middle").style("alignment-baseline","bottom").text(B)}});let De=M.append("g").attr("transform","translate("+(R*H+Q*(H-1)+T+27)+", "+m+")").attr("class","legend_grp");M.append("svg:defs").append("svg:marker").attr("id","arrow").attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto-start-reverse").append("svg:path").attr("d","M 0 0 L 10 5 L 0 10 z");let he=25,Se=50,ke=C.filter(B=>B.key!="production");ke=[{key:"worse"}].concat(ke),ke.sort((B,j)=>w.indexOf(B.key)-w.indexOf(j.key)),De.selectAll("*").remove();let Le=De.selectAll(null).data(ke);Le.enter().append("rect").attr("x",0).attr("y",(B,j)=>j*he).attr("width",Se).attr("height",he).style("fill",B=>q(B.key)),Le.enter().append("text").attr("x",Se+8).attr("y",(B,j)=>j*he).style("display",(B,j)=>j==0?"none":"inline").style("text-anchor","start").style("alignment-baseline","central").style("font-size","0.8em").text(B=>B.key),Le.enter().append("line").attr("x1",0).attr("y1",(B,j)=>j*he).attr("x2",Se+3).attr("y2",(B,j)=>j*he).attr("marker-end","url(#arrow)").style("stroke","black").style("stroke-width",1).style("display",(B,j)=>j==0?"none":"inline"),Le.data([v,D]).enter().append("text").attr("transform","translate(0,"+(ke.length*he+10)+")").attr("x",31).attr("y",(B,j)=>j*he+he/2).style("text-anchor","start").style("alignment-baseline","central").style("font-size","0.8em").text(B=>B),Le.data([v,D]).enter().append("line").attr("transform","translate(0,"+(ke.length*he+10)+")").attr("x1",0).attr("y1",(B,j)=>j*he+he/2).attr("x2",26).attr("y2",(B,j)=>j*he+he/2).style("stroke","black").style("stroke-width",1.5).style("stroke-dasharray",(B,j)=>j==0?"none":"2,2"),Le.data([v,D]).enter().append("circle").attr("transform","translate(0,"+(ke.length*he+10)+")").attr("r",2.5).style("stroke","#000").style("fill","#000").attr("cx",13).attr("cy",(B,j)=>j*he+he/2),Le.data([1]).enter().append("circle").attr("transform","translate(0,"+((ke.length+1)*he+10)+")").attr("r",2.5).style("stroke","#000").style("fill","#000").attr("cx",13).attr("cy",he+he/2);let qe=[U.top,U.bottom];Le.data(qe).enter().append("text").attr("transform","translate(0,"+((ke.length+1)*he+10)+")").attr("x",31).attr("y",(B,j)=>he+he/2+j*(he/2)).style("text-anchor","start").style("alignment-baseline","central").style("font-size","0.8em").text(B=>B),M.append("g").attr("class","footnote").attr("transform","translate("+(d-E)+","+(h-A/3)+")").selectAll(null).data([I]).enter().append("text").attr("x",0).attr("y",0).style("text-anchor","end").style("alignment-baseline","central").style("font-size","0.8em").text(B=>B);function Xe(B){_.html(v+"<br>"+F+Ne(".2f")(B.value)+" "+B.unit_translation).style("display","inline-block").style("left",Te.pageX+10+"px").style("top",Te.pageY-20+"px")}function je(){_.style("left",Te.pageX+10+"px").style("top",Te.pageY-20+"px")}function Fe(){_.style("display","none")}function X(B){switch(B){case"GECO2021":return $e().domain(["production","1.5C-Unif","NDC-LTS","CurPol","worse"]).range(["black","#709458","#8db96e","#FDF28D","#e07b73"]);case"WEO2021":return $e().domain(["production","NZE_2050","SDS","APS","STEPS","worse"]).range(["black","#9cab7c","#c3d69b","#FFFFCC","#fde291","#e07b73"]);case"GECO2022":return $e().domain(["production","1.5C","NDC_LTS","Reference","worse"]).range(["black","#9cab7c","#c3d69b","#FFFFCC","#e07b73"]);case"ISF2021":return $e().domain(["production","NZE","worse"]).range(["black","#9cab7c","#e07b73"]);case"WEO2022":return $e().domain(["production","NZE_2050","APS","STEPS","worse"]).range(["black","#9cab7c","#FFFFCC","#fde291","#e07b73"]);case"GECO2023":return $e().domain(["production","1.5C","NDC-LTS","Reference","worse"]).range(["black","#9cab7c","#c3d69b","#FFFFCC","#e07b73"]);case"ISF2023":return $e().domain(["production","1.5C","worse"]).range(["black","#9cab7c","#e07b73"]);case"WEO2023":return $e().domain(["production","NZE_2050","APS","STEPS","worse"]).range(["black","#9cab7c","#FFFFCC","#fde291","#e07b73"]);default:return $e().domain(["production","ETP_SDS","NZE","IPR FPS 2021","worse"]).range(["black","#9cab7c","#9cab7c","#9cab7c","#e07b73"])}}function ee(B){let j;return B=="GECO2021"?j=["worse","CurPol","NDC-LTS","1.5C-Unif"]:B=="WEO2021"?j=["worse","STEPS","APS","SDS","NZE_2050"]:B=="GECO2022"?j=["worse","Reference","NDC_LTS","1.5C"]:B=="ISF2021"?j=["worse","NZE"]:B=="WEO2022"?j=["worse","STEPS","APS","NZE_2050"]:B=="WEO2023"?j=["worse","STEPS","APS","NZE_2050"]:B=="GECO2023"?j=["worse","Reference","NDC-LTS","1.5C"]:B=="ISF2023"?j=["worse","1.5C"]:j=["worse","IPR FPS 2021","NZE","ETP_SDS"],j}function se(B){switch(B){case"Oil":case"Coal":case"Gas":case"ICE":case"CoalCap":case"GasCap":case"OilCap":return!0;case"Electric":case"Hybrid":case"HydroCap":case"NuclearCap":case"RenewablesCap":case"FuelCell":return!1;default:console.log("undefined tech:",B)}}}}class wg{constructor(t,n){let r;typeof t=="string"?r=document.querySelector(t):r=t,Me(r).attr("chart_type","time_line"),r.innerHTML="",r.classList.add("time_lineChart"),r.classList.add("d3chart"),r.classList.add("emissionstrajectory_chart"),r.classList.add("chart_container"),this.container=Me(r);const a=928,s=650,o=50,i=50,l=200,c=200,u=this.container.append("svg").attr("width",a).attr("height",s).attr("viewBox",[0,0,a,s]).attr("preserveAspectRatio","xMinYMin meet").attr("style","max-width: 100%; height: auto;");let f=document.querySelector("#asset_class_selector").value,d=document.querySelector("#sector_selector").value,h=document.querySelector("#allocation_method_selector").value,x=document.querySelector("#equity_market_selector").value,m=n.filter(y=>y.asset_class==f).filter(y=>y.sector==d).filter(y=>y.allocation_translation==h).filter(y=>y.equity_market==x);const A=ns("%Y"),E=Pi().domain(Nt(m,y=>A(y.year))).range([c,a-i]),T=At().domain(Nt(m,y=>y.value)).nice().range([o,s-l]);let M="#1b324f",S="#00c082",p="Scenario",v="Portfolio",D="Value: ",U="* start date of the analysis";const I=zr().x(y=>E(A(y.year))).y(y=>T(y.value));let _=li().key(y=>y.name).entries(m);u.selectAll(".line").data(_).enter().append("path").attr("class","line").style("fill","none").style("stroke",y=>y.values[0].plan=="plan"?M:S).style("stroke-width","2px").attr("id",y=>y.key).attr("d",y=>I(y.values)),u.selectAll(".dot").data(m).enter().append("circle").attr("class","dot").attr("r",5).style("stroke","#fff").style("fill",y=>y.plan=="plan"?M:S).attr("name",y=>y.key).attr("x_value",y=>y.year).attr("y_value",y=>y.value).attr("cx",y=>E(A(y.year))).attr("cy",y=>T(y.value)).on("mouseover",$).on("mousemove",k).on("mouseout",N);const w=Me(r).append("div").attr("class","d3tooltip").style("display","none"),q=1+Math.abs(E.domain().reduce((y,re)=>y.getFullYear()-re.getFullYear()));let H=ie(m,y=>y.year).keys().slice(0,Math.min(q,5)+1);H[0]="31-Dec-"+H[0]+"*",u.append("g").attr("transform","translate(0,"+(s-l)+")").call(zt(E).ticks(Math.min(q,5)).tickFormat((y,re)=>H[re])).selectAll("text").style("font-size","2em"),u.append("g").attr("transform","translate("+c+",0)").call(yn(T).ticks(6).tickFormat(Ne(".3s"))).selectAll("text").style("font-size","2em"),u.append("text").attr("transform",`translate(${c/2},${(s-l)/2+15}) rotate(-90)`).attr("x",0).attr("y",0).attr("dy","1em").style("text-anchor","middle").text(m.map(y=>y.unit_translation)[0]).style("font-size","1.6em"),u.append("g").attr("class","footnote").attr("transform","translate("+(a-i/2)+","+(s-o-5*l/12)+")").append("text").attr("x",0).attr("y",0).style("text-anchor","end").style("alignment-baseline","central").style("font-size","1.4em").text(U);let Q=[v,m.map(y=>y.scenario)[0]+" "+p],R=u.append("g").attr("class","legend").attr("transform","translate("+c+","+(s-l/3)+")").selectAll("g").data(Q);R.enter().append("line").attr("x1",y=>y==v?0:200).attr("x2",y=>y==v?60:260).attr("y1",0).attr("y2",0).style("stroke-width",2).style("stroke",y=>y==v?M:S),R.enter().append("circle").attr("r",5).attr("cx",y=>y==v?30:230).attr("cy",0).style("stroke","#fff").style("fill",y=>y==v?M:S),R.enter().append("text").attr("x",y=>y==v?70:270).attr("y",3).text(y=>y).attr("alignment-baseline","middle").style("font-size","0.9em");function $(y){w.html((y.plan=="plan"?v:p)+"<br>"+D+Ne(".5f")(y.value)+" "+y.unit_translation).style("display","inline-block").style("left",Te.pageX+10+"px").style("top",Te.pageY-20+"px")}function k(){w.style("left",Te.pageX+10+"px").style("top",Te.pageY-20+"px")}function N(){w.style("display","none")}}}function kg(e){let t,n,r,a=`<h2 class="h3 text-center">Please select a sector and an asset class for the analysis</h2> <br/> <p>The <strong>Sector-level analysis</strong> provides a detailed look at your portfolio&#39;s
				exposure to key technologies relevant for the climate transition in the analyzed sector.
				This section highlights by sector and asset class, how the aggregated production plans of
				companies within the portfolio align with climate goals in terms of technology share, and
				future build out of low carbon technologies or future phase down of high carbon
				technologies. For sectors without technology roadmaps, you will have access to the five-year
				forward-looking emission intensity of your portfolio for the analyzed sector, compared to
				the five-year scenario objective. By assessing at a sector level, the alignment of
				companies&#39; production trajectories with various climate scenarios, this section helps you
				understand how well the portfolio is positioned in sectors critical to the global transition
				to a low-carbon economy.
				<br/><br/>

				To view the sector-level results, select the appropriate options from the drop-down menus
				below and click <strong>Go!</strong>. If no results appear after clicking
				<strong>Go!</strong>, it likely means your portfolio does not have exposure to the selected
				sector or financial asset.</p>`,s,o,i,l,c="Please select",u,f,d,h="Please select",x,m,A="Go!",E,T,M,S,p,v="Please select",D,U,I,F="Please select",_,w,q,H=`<div class="analysis-intro-text sm:col-span-9"><h3 class="h3">Sector-level analysis</h3> <br/>
				The <strong>Sector-level analysis</strong> provides a detailed look at your portfolio&#39;s
				exposure to key technologies relevant for the climate transition in the analyzed sector.
				This section highlights by sector and asset class, how the aggregated production plans of
				companies within the portfolio align with climate goals in terms of technology share, and
				future build out of low carbon technologies or future phase down of high carbon
				technologies. For sectors without technology roadmaps, you will have access to the five-year
				forward-looking emission intensity of your portfolio for the analyzed sector, compared to
				the five-year scenario objective. By assessing at a sector level, the alignment of
				companies&#39; production trajectories with various climate scenarios, this section helps you
				understand how well the portfolio is positioned in sectors critical to the global transition
				to a low-carbon economy.
				<br/><br/>
				Key features in this section:
				<br/><br/> <ul class="list-disc"><li><strong>Sector Exposure</strong>: Review the portfolio&#39;s exposure to a specific sector,
						as well as its exposure to sector-specific technologies.</li> <li><strong>Climate Scenario Alignment</strong>: Understand how the production plans of
						investee companies in this sector align with different climate pathways.</li> <li><strong>Benchmark Comparison</strong>: See how your portfolio&#39;s performance compares to
						market benchmarks.</li></ul> <br/>
				For deeper insights into the methodology behind these analyses, please refer to the
				<a href="https://rmi.gitbook.io/pacta-knowledge-hub">Knowledge Hub</a>.</div> <div class="analysis-intro-stats sm:col-span-3 p-0"><div class="exposure-stats" id="exposure-stats"></div></div>`,Q,R,$,k=`<div class="plot-trajectory-card-box p-2 sm:col-span-10"><div class="plot-trajectory-box grid p-4 card" id="trajectory-box"><div class="trajectory-explanation"><h4 class="h4">Production volume alignment over time for technologies in the sector</h4> <br/> <p>This section evaluates how well the portfolio aligns with various climate transition
								scenarios, based on the <strong>production plans</strong> of the companies in the
								portfolio. This analysis applies to sectors with well-defined technology
								decarbonization roadmaps, including <strong>power, coal, oil &amp; gas,</strong> and
								<strong>automotive</strong>. The analysis looks at a five-year forward-looking
								horizon, comparing companies&#39; planned production trajectories with those outlined in
								climate scenarios. The results are benchmarked against market indices to help assess
								potential risks and opportunities for alignment with climate goals.
								<br/><br/>
								This information can be used for <strong>risk management, target setting,</strong>
								and the development of <strong>climate strategies</strong>. Please note that the
								scenario trajectories reflect different assumptions about the pace of technological
								change. Some scenarios anticipate rapid technological shifts, while others are more
								gradual. For a deeper understanding of the scenarios used in the analysis, refer to
								the
								<a href="https://pacta.rmi.org/wp-content/uploads/2024/11/202410_P4I_scenario_document.pdf">&quot;Scenario Supporting Document. PACTA for Investors&quot;</a>.</p></div> <div class="trajectory-plot" id="trajectory-plot"></div></div></div> <div class="other-sector-plots-box grid sm:grid-cols-6"><div class="techmix-plot-card-box p-2 sm:col-span-3"><div class="techmix-plot-box sm:col-span-3 card p-4"><div class="techmix-explanation"><h4 class="h4">Current and Future technology breakdown</h4> <p>In sectors with established low-carbon alternatives, such as <strong>power</strong>
									and <strong>automotive</strong>, it is valuable to examine how the
									<strong>technology mix</strong>
									evolves over the next five years. This comparison helps gauge how the portfolio&#39;s technology
									distribution aligns with future decarbonization goals. In the long term, low-carbon
									technologies will play a more critical role than high carbon technologies.
									<br/><br/>
									This chart displays the
									<strong>current</strong> and <strong>projected</strong> technology breakdown for
									each sector in the portfolio. It shows how the portfolio&#39;s composition is expected
									to change based on company-level production plans under the selected climate
									scenario. The chart does not account for potential changes in portfolio
									composition (i.e., changes in holdings) but rather focuses on the
									<strong>impact of production shifts</strong> within the companies included in the portfolio
									when compared with the production volume trajectory metric.</p></div> <div class="techmix-plot" id="techmix-plot"></div></div></div> <div class="emission-intensity-card-box p-2 sm:col-span-3"><div class="emission-intensity-plot-box sm:col-span-3 card p-4"><div class="emission-intensity-explanation"><h4 class="h4">Alignment of emission intensities</h4> <p>For sectors where low-carbon alternatives are either not yet available or where
									significant decarbonization is required to reduce emissions (e.g., <strong>cement, steel, aviation</strong>), the focus is on reducing <strong>CO<sub>2</sub> emissions intensity</strong>
									through improved production efficiency and investment in research and development.
									Therefore, for those sectors the emission intensities metric is the main alignment
									metric. The emission intensities metric tracks changes in emissions intensity over
									time, comparing the current trajectory of the portfolio with the emission reduction
									paths outlined in climate scenarios. By analyzing
									<strong>emissions intensity</strong>, this metric provides insight into how
									companies within the portfolio are progressing towards carbon neutrality, helping
									investors assess the potential for future alignment with
									<strong>decarbonization goals</strong>.
									<br/><br/> <br/></p></div> <div class="emission-intensity-plot" id="emission-intensity-plot"></div></div></div></div>`,N,y,re=`<p class="font-bold">No data found for the parameter selection</p> <p class="text-sm">Please make a different selecion in the parameters panel or change the asset class or
					sector.</p>`,ae,de,G,ue,C="Parameters",ne,me,Y,W,Z,O="Scenario source ",b,g,te="Applies to the technology mix and production volume alignment plots.",fe,pe,ve,Ee="Please select",De,he,Se,ke="Scenario ",Le,qe,Oe="Applies to the technology mix plot.",Xe,je,Fe,X="Please select",ee,se,B,j="Allocation method ",J,ye,_e="Applies to the production volume alignment and emission intensity plots.",it,ze,Ye,Rt="Please select",ft,He,tt,Kt="Equity market ",wt,we,Sn="Applies to the production volume alignment and the technology mix plots.",Ze,lt,ct,It="Please select",Qt,We,dt,ss="Benchmark ",ia,Ft,os="Applies to the production volume alignment and the technology mix plots.",la,Ht,kt,is="Please select",ar,pt,ls='<p class="font-bold">No data found for this asset class / sector combination</p> <p class="text-sm">Please make a different selecion.</p>';return{c(){t=V("div"),n=V("div"),r=V("div"),r.innerHTML=a,s=le(),o=V("div"),i=V("select"),l=V("option"),l.textContent=c,u=le(),f=V("select"),d=V("option"),d.textContent=h,x=le(),m=V("button"),m.textContent=A,E=le(),T=V("div"),M=V("div"),S=V("select"),p=V("option"),p.textContent=v,D=le(),U=V("select"),I=V("option"),I.textContent=F,_=le(),w=V("div"),q=V("div"),q.innerHTML=H,Q=le(),R=V("div"),$=V("div"),$.innerHTML=k,N=le(),y=V("div"),y.innerHTML=re,ae=le(),de=V("div"),G=V("div"),ue=V("h4"),ue.textContent=C,ne=le(),me=V("br"),Y=le(),W=V("label"),Z=V("span"),Z.textContent=O,b=le(),g=V("div"),g.textContent=te,fe=le(),pe=V("select"),ve=V("option"),ve.textContent=Ee,De=le(),he=V("label"),Se=V("span"),Se.textContent=ke,Le=le(),qe=V("div"),qe.textContent=Oe,Xe=le(),je=V("select"),Fe=V("option"),Fe.textContent=X,ee=le(),se=V("label"),B=V("span"),B.textContent=j,J=le(),ye=V("div"),ye.textContent=_e,it=le(),ze=V("select"),Ye=V("option"),Ye.textContent=Rt,ft=le(),He=V("label"),tt=V("span"),tt.textContent=Kt,wt=le(),we=V("div"),we.textContent=Sn,Ze=le(),lt=V("select"),ct=V("option"),ct.textContent=It,Qt=le(),We=V("label"),dt=V("span"),dt.textContent=ss,ia=le(),Ft=V("div"),Ft.textContent=os,la=le(),Ht=V("select"),kt=V("option"),kt.textContent=is,ar=le(),pt=V("div"),pt.innerHTML=ls,this.h()},l(nt){t=z(nt,"DIV",{class:!0,id:!0});var qt=oe(t);n=z(qt,"DIV",{class:!0});var sr=oe(n);r=z(sr,"DIV",{class:!0,"data-svelte-h":!0}),ge(r)!=="svelte-7gd2ta"&&(r.innerHTML=a),s=ce(sr),o=z(sr,"DIV",{class:!0});var Jt=oe(o);i=z(Jt,"SELECT",{class:!0,id:!0});var cs=oe(i);l=z(cs,"OPTION",{"data-svelte-h":!0}),ge(l)!=="svelte-1msln"&&(l.textContent=c),cs.forEach(K),u=ce(Jt),f=z(Jt,"SELECT",{class:!0,id:!0});var us=oe(f);d=z(us,"OPTION",{"data-svelte-h":!0}),ge(d)!=="svelte-1msln"&&(d.textContent=h),us.forEach(K),x=ce(Jt),m=z(Jt,"BUTTON",{class:!0,id:!0,"data-svelte-h":!0}),ge(m)!=="svelte-2z7m03"&&(m.textContent=A),Jt.forEach(K),sr.forEach(K),qt.forEach(K),E=ce(nt),T=z(nt,"DIV",{class:!0,id:!0});var or=oe(T);M=z(or,"DIV",{class:!0});var ir=oe(M);S=z(ir,"SELECT",{class:!0,id:!0});var fs=oe(S);p=z(fs,"OPTION",{"data-svelte-h":!0}),ge(p)!=="svelte-1msln"&&(p.textContent=v),fs.forEach(K),D=ce(ir),U=z(ir,"SELECT",{class:!0,id:!0});var ds=oe(U);I=z(ds,"OPTION",{"data-svelte-h":!0}),ge(I)!=="svelte-1msln"&&(I.textContent=F),ds.forEach(K),ir.forEach(K),_=ce(or),w=z(or,"DIV",{class:!0});var lr=oe(w);q=z(lr,"DIV",{class:!0,"data-svelte-h":!0}),ge(q)!=="svelte-egnbd"&&(q.innerHTML=H),Q=ce(lr),R=z(lr,"DIV",{class:!0,id:!0});var en=oe(R);$=z(en,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ge($)!=="svelte-587j9i"&&($.innerHTML=k),N=ce(en),y=z(en,"DIV",{class:!0,role:!0,id:!0,"data-svelte-h":!0}),ge(y)!=="svelte-ittqtt"&&(y.innerHTML=re),ae=ce(en),de=z(en,"DIV",{class:!0});var hs=oe(de);G=z(hs,"DIV",{class:!0});var Ke=oe(G);ue=z(Ke,"H4",{class:!0,"data-svelte-h":!0}),ge(ue)!=="svelte-1ywp2eh"&&(ue.textContent=C),ne=ce(Ke),me=z(Ke,"BR",{}),Y=ce(Ke),W=z(Ke,"LABEL",{class:!0});var tn=oe(W);Z=z(tn,"SPAN",{id:!0,class:!0,"data-svelte-h":!0}),ge(Z)!=="svelte-26q0d9"&&(Z.textContent=O),b=ce(tn),g=z(tn,"DIV",{class:!0,"data-svelte-h":!0}),ge(g)!=="svelte-3boqv3"&&(g.textContent=te),fe=ce(tn),pe=z(tn,"SELECT",{class:!0,id:!0});var gs=oe(pe);ve=z(gs,"OPTION",{"data-svelte-h":!0}),ge(ve)!=="svelte-1msln"&&(ve.textContent=Ee),gs.forEach(K),tn.forEach(K),De=ce(Ke),he=z(Ke,"LABEL",{class:!0});var nn=oe(he);Se=z(nn,"SPAN",{id:!0,class:!0,"data-svelte-h":!0}),ge(Se)!=="svelte-1stzdk0"&&(Se.textContent=ke),Le=ce(nn),qe=z(nn,"DIV",{class:!0,"data-svelte-h":!0}),ge(qe)!=="svelte-1n6ege7"&&(qe.textContent=Oe),Xe=ce(nn),je=z(nn,"SELECT",{class:!0,id:!0});var ps=oe(je);Fe=z(ps,"OPTION",{"data-svelte-h":!0}),ge(Fe)!=="svelte-1msln"&&(Fe.textContent=X),ps.forEach(K),nn.forEach(K),ee=ce(Ke),se=z(Ke,"LABEL",{class:!0});var rn=oe(se);B=z(rn,"SPAN",{id:!0,class:!0,"data-svelte-h":!0}),ge(B)!=="svelte-j1nbmh"&&(B.textContent=j),J=ce(rn),ye=z(rn,"DIV",{class:!0,"data-svelte-h":!0}),ge(ye)!=="svelte-q3h5s3"&&(ye.textContent=_e),it=ce(rn),ze=z(rn,"SELECT",{class:!0,id:!0});var ms=oe(ze);Ye=z(ms,"OPTION",{"data-svelte-h":!0}),ge(Ye)!=="svelte-1msln"&&(Ye.textContent=Rt),ms.forEach(K),rn.forEach(K),ft=ce(Ke),He=z(Ke,"LABEL",{class:!0});var an=oe(He);tt=z(an,"SPAN",{id:!0,class:!0,"data-svelte-h":!0}),ge(tt)!=="svelte-13akdy5"&&(tt.textContent=Kt),wt=ce(an),we=z(an,"DIV",{class:!0,"data-svelte-h":!0}),ge(we)!=="svelte-i17isc"&&(we.textContent=Sn),Ze=ce(an),lt=z(an,"SELECT",{class:!0,id:!0});var ys=oe(lt);ct=z(ys,"OPTION",{"data-svelte-h":!0}),ge(ct)!=="svelte-1msln"&&(ct.textContent=It),ys.forEach(K),an.forEach(K),Qt=ce(Ke),We=z(Ke,"LABEL",{class:!0});var sn=oe(We);dt=z(sn,"SPAN",{id:!0,class:!0,"data-svelte-h":!0}),ge(dt)!=="svelte-1t4yf28"&&(dt.textContent=ss),ia=ce(sn),Ft=z(sn,"DIV",{class:!0,"data-svelte-h":!0}),ge(Ft)!=="svelte-i17isc"&&(Ft.textContent=os),la=ce(sn),Ht=z(sn,"SELECT",{class:!0,id:!0});var vs=oe(Ht);kt=z(vs,"OPTION",{"data-svelte-h":!0}),ge(kt)!=="svelte-1msln"&&(kt.textContent=is),vs.forEach(K),sn.forEach(K),Ke.forEach(K),hs.forEach(K),en.forEach(K),lr.forEach(K),or.forEach(K),ar=ce(nt),pt=z(nt,"DIV",{class:!0,role:!0,id:!0,"data-svelte-h":!0}),ge(pt)!=="svelte-16t1fa1"&&(pt.innerHTML=ls),this.h()},h(){L(r,"class","intro-text p-4"),l.__value="Not_selected",Be(l,l.__value),L(i,"class","select max-w-48 variant-outline-surface"),L(i,"id","sector_selector_landing"),d.__value="Not_selected",Be(d,d.__value),L(f,"class","select max-w-48 variant-outline-surface"),L(f,"id","asset_class_selector_landing"),L(m,"class","btn variant-filled-surface"),L(m,"id","go_button_landing"),L(o,"class","buttons-sector-asset-class p-4 flex space-x-2 justify-center"),L(n,"class","intro-box card"),L(t,"class","content p-8"),L(t,"id","content-landing-page"),p.__value="Not_selected",Be(p,p.__value),L(S,"class","select max-w-48 variant-outline-surface"),L(S,"id","sector_selector"),I.__value="Not_selected",Be(I,I.__value),L(U,"class","select max-w-48 variant-outline-surface"),L(U,"id","asset_class_selector"),L(M,"class","buttons-sector-asset-class p-4 flex space-x-2 justify-center"),L(q,"class","analysis-intro grid sm:grid-cols-12 p-2"),L($,"class","analysis-plots sm:col-span-10"),L($,"id","analysis-plots"),L(y,"class","alert-message sm:col-span-10 bg-blue-100 border-t border-b border-blue-500 text-blue-700 px-4 py-3 hidden"),L(y,"role","alert"),L(y,"id","alert-message-parameters"),L(ue,"class","h4"),L(Z,"id","scenario-source-label"),L(Z,"class","svelte-1a8g59e"),L(g,"class","hide dashboard-tooltip card p-4 shadow-xl svelte-1a8g59e"),ve.__value="Not_selected",Be(ve,ve.__value),L(pe,"class","select variant-outline-surface"),L(pe,"id","scenario_source_selector"),L(W,"class","label"),L(Se,"id","scenario-label"),L(Se,"class","svelte-1a8g59e"),L(qe,"class","hide dashboard-tooltip card p-4 shadow-xl svelte-1a8g59e"),Fe.__value="Not_selected",Be(Fe,Fe.__value),L(je,"class","select variant-outline-surface"),L(je,"id","scenario_selector"),L(he,"class","label"),L(B,"id","allocation-method-label"),L(B,"class","svelte-1a8g59e"),L(ye,"class","hide dashboard-tooltip card p-4 shadow-xl svelte-1a8g59e"),Ye.__value="Not_selected",Be(Ye,Ye.__value),L(ze,"class","select variant-outline-surface"),L(ze,"id","allocation_method_selector"),L(se,"class","label"),L(tt,"id","equity-market-label"),L(tt,"class","svelte-1a8g59e"),L(we,"class","hide dashboard-tooltip card p-4 shadow-xl svelte-1a8g59e"),ct.__value="Not_selected",Be(ct,ct.__value),L(lt,"class","select variant-outline-surface"),L(lt,"id","equity_market_selector"),L(He,"class","label"),L(dt,"id","benchmark-label"),L(dt,"class","svelte-1a8g59e"),L(Ft,"class","hide dashboard-tooltip card p-4 shadow-xl svelte-1a8g59e"),kt.__value="Not_selected",Be(kt,kt.__value),L(Ht,"class","select variant-outline-surface"),L(Ht,"id","benchmark_selector"),L(We,"class","label"),L(G,"class","analysis-parameters sm:col-span-2 p-4 card"),L(de,"class","parameters-box p-2 sm:col-span-2"),L(R,"class","analysis-content grid sm:grid-cols-12"),L(R,"id","analysis-content"),L(w,"class","analysis p-4"),L(T,"class","content p-8 hidden"),L(T,"id","content-sector-view"),L(pt,"class","alert-message bg-blue-100 border-t border-b border-blue-500 text-blue-700 px-4 py-3 hidden"),L(pt,"role","alert"),L(pt,"id","alert-message")},m(nt,qt){Ce(nt,t,qt),P(t,n),P(n,r),P(n,s),P(n,o),P(o,i),P(i,l),P(o,u),P(o,f),P(f,d),P(o,x),P(o,m),Ce(nt,E,qt),Ce(nt,T,qt),P(T,M),P(M,S),P(S,p),P(M,D),P(M,U),P(U,I),P(T,_),P(T,w),P(w,q),P(w,Q),P(w,R),P(R,$),P(R,N),P(R,y),P(R,ae),P(R,de),P(de,G),P(G,ue),P(G,ne),P(G,me),P(G,Y),P(G,W),P(W,Z),P(W,b),P(W,g),P(W,fe),P(W,pe),P(pe,ve),P(G,De),P(G,he),P(he,Se),P(he,Le),P(he,qe),P(he,Xe),P(he,je),P(je,Fe),P(G,ee),P(G,se),P(se,B),P(se,J),P(se,ye),P(se,it),P(se,ze),P(ze,Ye),P(G,ft),P(G,He),P(He,tt),P(He,wt),P(He,we),P(He,Ze),P(He,lt),P(lt,ct),P(G,Qt),P(G,We),P(We,dt),P(We,ia),P(We,Ft),P(We,la),P(We,Ht),P(Ht,kt),Ce(nt,ar,qt),Ce(nt,pt,qt)},p:et,i:et,o:et,d(nt){nt&&(K(t),K(E),K(T),K(ar),K(pt))}}}function Sg(e){return Ba(async()=>{let n=await(await fetch("data/data_exposure_stats.json")).json(),a=await(await fetch("data/data_techmix_sector.json")).json(),o=await(await fetch("data/data_trajectory_alignment.json")).json(),l=await(await fetch("data/data_emissions.json")).json();function c(){try{new Gi(document.querySelector("#exposure-stats"),n)}catch(F){console.error("Error fetching exposure stats: ",F),document.querySelector("#exposure-stats").innerHTML="",document.querySelector("#exposure-stats").appendChild(Je())}}function u(){try{new xg(document.querySelector("#techmix-plot"),a)}catch(F){console.error("Error fetching techmix: ",F),document.querySelector("#techmix-plot").innerHTML="",document.querySelector("#techmix-plot").appendChild(Je())}}function f(){try{const F=["Power","Automotive","Oil&Gas","Coal"];let _=document.querySelector("#sector_selector").value;F.includes(_)?(document.querySelector("#trajectory-box").classList.remove("hidden"),new bg(document.querySelector("#trajectory-plot"),o)):document.querySelector("#trajectory-box").classList.add("hidden")}catch(F){console.error("Error fetching trajectory alignment: ",F),document.querySelector("#trajectory-box").innerHTML="",document.querySelector("#trajectory-box").appendChild(Je())}}function d(){try{new wg(document.querySelector("#emission-intensity-plot"),l)}catch(F){console.error("Error fetching emission intensity plot: ",F),document.querySelector("#emission-intensity-plot").innerHTML="",document.querySelector("#emission-intensity-plot").appendChild(Je())}}function h(){const F=document.querySelector("#sector_selector_landing"),_=document.querySelector("#sector_selector");let w=new Set(ie(o,R=>R.ald_sector).keys()),q=new Set(ie(a,R=>R.ald_sector).keys()),H=new Set(ie(l,R=>R.sector).keys()),Q=Array.from(w.union(q).union(H));F.length=0,_.length=0,Q.forEach(R=>F.add(new Option(R,R))),Q.forEach(R=>_.add(new Option(R,R)))}function x(){const F=document.querySelector("#asset_class_selector_landing"),_=document.querySelector("#asset_class_selector");let w=new Set(ie(o,R=>R.asset_class).keys()),q=new Set(ie(a,R=>R.asset_class).keys()),H=new Set(ie(l,R=>R.asset_class).keys()),Q=Array.from(w.union(q).union(H));F.length=0,_.length=0,Q.forEach(R=>F.add(new Option(R,R))),Q.forEach(R=>_.add(new Option(R,R)))}function m(){let F=document.querySelector("#asset_class_selector").value,_=document.querySelector("#sector_selector").value,w=a.filter(R=>R.asset_class==F).filter(R=>R.ald_sector==_),q=o.filter(R=>R.asset_class==F).filter(R=>R.ald_sector==_),H=l.filter(R=>R.asset_class==F).filter(R=>R.ald_sector==_);return[w,q,H].some(R=>R.length!=0)}function A(){document.querySelector("#analysis-content").classList.add("hidden"),document.querySelector("#alert-message").classList.remove("hidden")}function E(){document.querySelector("#analysis-content").classList.remove("hidden"),document.querySelector("#alert-message").classList.add("hidden")}function T(){document.querySelector("#analysis-plots").classList.add("hidden"),document.querySelector("#alert-message-parameters").classList.remove("hidden")}function M(){document.querySelector("#analysis-plots").classList.remove("hidden"),document.querySelector("#alert-message-parameters").classList.add("hidden")}function S(){let F=document.querySelector("#scenario_source_selector").value,_=document.querySelector("#asset_class_selector").value,w=document.querySelector("#sector_selector").value,q=a.filter(k=>k.asset_class==_).filter(k=>k.ald_sector==w),H=new Set(ie(q,k=>k.scenario_source).keys()),Q=o.filter(k=>k.asset_class==_).filter(k=>k.ald_sector==w),R=new Set(ie(Q,k=>k.scenario_source).keys()),$=Array.from(H.union(R));if($.length!=0){M();const k=document.querySelector("#scenario_source_selector");k.length=0,$.forEach(N=>k.add(new Option(N,N))),k.options[Math.max(0,$.indexOf(F))].selected="selected"}else T()}function p(){let F=document.querySelector("#asset_class_selector").value,_=document.querySelector("#sector_selector").value,w=document.querySelector("#scenario_source_selector").value,q=document.querySelector("#scenario_selector").value,H=a.filter(R=>R.asset_class==F).filter(R=>R.ald_sector==_).filter(R=>R.scenario_source==w),Q=ie(H,R=>R.scenario).keys();if(Q.length!=0){M();const R=document.querySelector("#scenario_selector");R.length=0,Q.forEach($=>R.add(new Option($,$))),R.options[Math.max(0,Q.indexOf(q))].selected="selected"}else T()}function v(){let F=document.querySelector("#allocation_method_selector").value,_=document.querySelector("#asset_class_selector").value,w=document.querySelector("#sector_selector").value,q=l.filter(k=>k.asset_class==_).filter(k=>k.ald_sector==w),H=new Set(ie(q,k=>k.allocation_translation).keys()),Q=o.filter(k=>k.asset_class==_).filter(k=>k.ald_sector==w),R=new Set(ie(Q,k=>k.allocation_translation).keys()),$=Array.from(H.union(R));if($.length!=0){M();const k=document.querySelector("#allocation_method_selector");k.length=0,$.forEach(N=>k.add(new Option(N,N))),k.options[Math.max(0,$.indexOf(F))].selected="selected"}else T()}function D(){let F=document.querySelector("#equity_market_selector").value,_=document.querySelector("#asset_class_selector").value,w=document.querySelector("#sector_selector").value,q=a.filter(k=>k.asset_class==_).filter(k=>k.ald_sector==w),H=new Set(ie(q,k=>k.equity_market).keys()),Q=o.filter(k=>k.asset_class==_).filter(k=>k.ald_sector==w),R=new Set(ie(Q,k=>k.equity_market_translation).keys()),$=Array.from(H.union(R));if($.length!=0){M();const k=document.querySelector("#equity_market_selector");k.length=0,$.forEach(N=>k.add(new Option(N,N))),k.options[Math.max(0,$.indexOf(F))].selected="selected"}else T()}function U(){let F=document.querySelector("#benchmark_selector").value,_=document.querySelector("#asset_class_selector").value,w=document.querySelector("#sector_selector").value,q=document.querySelector("#equity_market_selector").value,H=a.filter(N=>N.asset_class==_).filter(N=>N.ald_sector==w).filter(N=>N.equity_market==q).filter(N=>!N.this_portfolio),Q=new Set(ie(H,N=>N.portfolio_name).keys()),R=o.filter(N=>N.asset_class==_).filter(N=>N.ald_sector==w).filter(N=>N.equity_market==q).filter(N=>N.this_benchmark),$=new Set(ie(R,N=>N.portfolio_name).keys()),k=Array.from(Q.union($));if(k.length!=0){M();const N=document.querySelector("#benchmark_selector");N.length=0,k.forEach(y=>N.add(new Option(y,y))),N.options[Math.max(0,k.indexOf(F))].selected="selected"}else T()}function I(){const F=document.querySelector("#go_button_landing"),_=document.querySelector("#asset_class_selector"),w=document.querySelector("#sector_selector");F.addEventListener("click",function(){let k=document.querySelector("#asset_class_selector_landing").value,N=document.querySelector("#sector_selector_landing").value;_.value=k,w.value=N,document.querySelector("#content-landing-page").classList.toggle("hidden"),document.querySelector("#content-sector-view").classList.toggle("hidden"),c(),m()?(E(),f(),u(),d()):A()}),w.addEventListener("change",function(){c(),m()?(E(),S(),p(),D(),U(),f(),u(),d()):A()}),_.addEventListener("change",function(){c(),m()?(E(),S(),p(),v(),D(),U(),f(),u(),d()):A()}),document.querySelector("#benchmark_selector").addEventListener("change",function(){f(),u()}),document.querySelector("#scenario_source_selector").addEventListener("change",function(){p(),f(),u()}),document.querySelector("#scenario_selector").addEventListener("change",function(){u()}),document.querySelector("#equity_market_selector").addEventListener("change",function(){U(),f(),u(),d()}),document.querySelector("#allocation_method_selector").addEventListener("change",function(){f(),d()})}h(),x(),c(),m()?(E(),S(),p(),v(),D(),U(),I(),u(),f(),d()):A()}),[]}class Cg extends Gt{constructor(t){super(),Xt(this,t,Sg,kg,$t,{})}}function Mg(e,t){var n=0;return Float64Array.from(e,r=>n+=+r||0)}class Tg{constructor(t,n){let r;typeof t=="string"?r=document.querySelector(t):r=t,r.innerHTML="",r.classList.add("BubbleChart"),r.classList.add("d3chart"),r.classList.add("companybubble_chart"),r.classList.add("chart_container"),this.container=Me(r);const a=600,s=500,o=40,i=60,l=80,c=85;let u=s-o-l,f=5,d="plan_tech_share",h="y",x="port_weight",m="#A9A9A9",A="company_name",E="#1b324f",T="#1b324f",M="Current capacity in low-carbon technologies",S="(as % of sector production capacity)",p="Planned new capacity in low-carbon technologies",v="(as a % of the scenario target for YEAR)",D=M,U=p,I="Weight in portfolio (% of AUM)",F="Portfolio weight";const _=this.container.append("svg").attr("width",a).attr("height",s).attr("viewBox",[0,0,a,s]).attr("preserveAspectRatio","xMinYMin meet").attr("style","max-width: 100%; height: auto;");let w=document.querySelector("#sector_selector").value,q=document.querySelector("#asset_class_selector").value,H=document.querySelector("#scenario_source_selector").value,Q=document.querySelector("#scenario_selector").value,R=document.querySelector("#allocation_method_selector").value,$=n.filter(g=>g.asset_class==q).filter(g=>g.ald_sector_translation==w).filter(g=>g.scenario_source==H).filter(g=>g.scenario==Q).filter(g=>g.allocation==R);var k=$.map(g=>g.year)[0]+f,N=0;let y=At().range([0,u]).domain([0-N,1+N]).nice(),re=At().range([u,0]).clamp(!0).domain([0-N,1+N]).nice(),ae=At().range([1,20]).domain(Nt($,g=>g[x])).nice(),de=zt(y).ticks(6).tickFormat(Ne(".0%")),G=yn(re).ticks(6).tickFormat(Ne(".0%"));_.append("g").attr("class","xaxis").style("stroke-width","1px").attr("transform","translate("+c+","+(s-l)+")"),_.select(".xaxis").call(de).selectAll(".domain").attr("stroke",m),_.select(".xaxis").selectAll(".tick").selectAll("line").attr("stroke",m),_.select(".xaxis").selectAll("text").style("font-size","1.2em"),_.append("text").attr("class","xtitle").attr("transform","translate("+(u/2+c)+" ,"+(s-l+40)+")").style("text-anchor","middle").text(M),_.append("text").attr("class","xsubtitle").attr("transform","translate("+(u/2+c)+" ,"+(s-l+55)+")").style("text-anchor","middle").text(S),_.append("g").attr("class","yaxis").style("stroke-width","1px").attr("transform","translate("+c+","+(o+Math.max(0,s-o-l-u))+")"),_.append("text").attr("class","ytitle").attr("transform","rotate(-90)").attr("x",-(s/2)).attr("y",10).attr("dy","1em").style("text-anchor","middle").text(p),v=v.replaceAll("YEAR",k),_.append("text").attr("class","ysubtitle").attr("transform","rotate(-90)").attr("y",25).attr("x",-(s/2)).attr("dy","1em").style("text-anchor","middle").text(v),_.select(".yaxis").call(G).selectAll(".domain").attr("stroke",m),_.select(".yaxis").selectAll(".tick").selectAll("line").attr("stroke",m),_.select(".yaxis").selectAll("text").style("font-size","1.2em"),_.append("line").attr("transform","translate("+c+","+(o+Math.max(0,s-o-l-u))+")").attr("x1",y(.5)).attr("x2",y(.5)).attr("y1",re(0)).attr("y2",re(1)).attr("stroke","black").attr("stroke-dasharray","1, 2"),_.append("line").attr("transform","translate("+c+","+(o+Math.max(0,s-o-l-u))+")").attr("x1",y(0)).attr("x2",y(1)).attr("y1",re(.5)).attr("y2",re(.5)).attr("stroke","black").attr("stroke-dasharray","1, 2"),_.append("g").attr("transform","translate("+c+","+(o+Math.max(0,s-o-l-u))+")").selectAll(".bubble").data($).enter().append("circle").attr("class","bubble").attr("cx",g=>y(g[d])).attr("cy",g=>re(g[h])).attr("r",g=>ae(g[x])).style("opacity","0.7").style("fill",E).attr("stroke","#1b324f").on("mouseover",Z).on("mousemove",O).on("mouseout",b);let ue=ae.ticks(3),C=ue.map(g=>ae(g)),ne=Mg(C.map(g=>g*2)),me=_l(ue,ne),Y=_.append("g").attr("transform","translate("+(u+c+i/4)+","+(o+u/5)+")");Y.selectAll("circle").data(me).enter().append("circle").attr("cx",35).attr("cy",g=>20+g[1]).attr("r",g=>ae(g[0])).style("fill",E).attr("stroke",T).style("opacity","0.7"),Y.selectAll("text").data(me).enter().append("text").text(g=>Ne("~%")(g[0].toPrecision(3))).attr("alignment-baseline","central").attr("font-size","0.9em").attr("x",40+ae.range()[1]).attr("y",g=>20+g[1]),Y.append("text").attr("x",10).attr("y",5).attr("alignment-baseline","central").text(F);let W=Me(r).append("div").attr("class","d3tooltip").style("display","none");function Z(g){let te="<br>"+I+": "+Ne("~%")(g[x].toPrecision(3));W.html("<b>"+g[A]+"</b><br><br>"+D+": "+Ne(".1%")(g[d])+"<br>"+U+": "+Ne(".1%")(g[h])+te).style("display","inline-block").style("left",Te.pageX+10+"px").style("top",Te.pageY-20+"px")}function O(){W.style("left",Te.pageX+10+"px").style("top",Te.pageY-20+"px")}function b(){W.style("display","none")}}}class Ag{constructor(t,n,r,a){let s;typeof t=="string"?s=document.querySelector(t):s=t,s.innerHTML="",s.classList.add("techexposure_company"),s.classList.add("d3chart"),s.classList.add("chart_container"),this.container=Me(s);const o=928,i=775,l=40,c=90,u=140;let f=90;const d=17,h=2;let x={before_sec:" of ",after_sec:" sector"},m="Weights",A={befor_scen:"* Aligned to ",after_scen:" scenario in year ",after_year:"."};const E=this.container.append("svg").attr("width",o).attr("height",i).attr("viewBox",[0,0,o,i]).attr("preserveAspectRatio","xMinYMin meet").attr("style","max-width: 100%; height: auto;"),T=Me(s).append("div").attr("class","d3tooltip").style("display","none");let M=document.querySelector("#sector_selector").value,S=document.querySelector("#asset_class_selector").value,p=document.querySelector("#scenario_source_selector").value,v=document.querySelector("#scenario_selector").value,D=document.querySelector("#allocation_method_selector").value,U=n.filter(X=>X.ald_sector_translation==M)[0].ald_sector,[I,F]=Ee(r,S,M,p,v,D);if(I=ke(I,a.filter(X=>X.sector==M)[0].tech_order),I.length==0)throw new Error("No data found after applying selected filters");n.forEach((X,ee)=>{n[ee].id_translation=X.id});let[_,w]=Ee(n,S,M,p,v,D);if(_.length==0)throw new Error("No data found after applying selected filters");_=ke(_,a.filter(X=>X.sector==M)[0].tech_order);let q=qe(_,"id"),H=qe(I,"id"),R=(q>=H?q:H).length*11;f<R&&(f=R);let $=Pt(),k=At().domain([0,1]).range([0,o-f-c]),N=Pt(),y=ci(_[0]).slice(1),re=ie(_,function(X){return X.id}).keys(),ae=ie(I,function(X){return X.id}).keys(),de=ae.length+re.length,G=(i-l-u-d)/de,ue=E.append("g").attr("class","y_axis_labels_up"),C=E.append("g").attr("class","y_axis_labels_down"),ne=E.append("g").attr("class","bars_group").attr("transform","translate("+f+","+l+")");Le(ne,k,$,ue,"bars_up",I,y,ae,0,o-c-f,G,h,U),Le(ne,k,$,C,"bars_down",_,y,re,ae.length*G+d,o-c-f,G,h,U);var me=Ne(".0%");E.append("g").attr("class","xaxis_group").attr("transform","translate("+f+","+(i-u)+")").call(zt(k).tickFormat(me)).selectAll("text").style("text-anchor","middle").style("font-size","2em");var Y=w.map(function(X){return(X.port_weight*100).toFixed(2)+"%"});N.range([0,re.length*G]).domain(re),E.append("g").attr("class","y_axis_weights_labels").attr("transform","translate( "+(o-c+5)+", "+(ae.length*G+d+l)+" )").call(qo(N).tickSize(0).tickValues(re).tickFormat(function(X,ee){return Y[ee]})).call(X=>X.select(".domain").remove()).selectAll("text").attr("font-size","2em"),E.append("g").attr("class","weights_label").append("text").attr("x",o-c+5+1).attr("y",ae.length*G+d-5+l).attr("font-size","1.5em").text(m);let W=E.append("g").attr("class","legend").attr("transform","translate( "+f+","+(i-2*u/3)+")"),Z=[];y.forEach((X,ee)=>{Z[ee]={},Z[ee].technology=X,Z[ee].technology_translation=n.filter(se=>se.technology==X)[0].technology_translation,Z[ee].class=U+" "+X});let b=qe(Z,"technology_translation").length*10,g=Math.round((o-f-c)/(b+45));Math.ceil(Z.length/g)==1&&(b=Math.max(100,b)),W.selectAll("rect").data(Z).enter().append("rect").attr("class",X=>X.class).attr("width",15).attr("height",15).attr("x",(X,ee)=>ee%g*(b+45)).attr("y",(X,ee)=>Math.floor(ee/g)*30),W.selectAll("text").data(Z).enter().append("text").text(X=>X.technology_translation).style("alignment-baseline","central").style("text-anchor","start").attr("font-size","0.9em").attr("x",(X,ee)=>ee%g*(b+45)+20).attr("y",(X,ee)=>Math.floor(ee/g)*30+7);let te=E.append("g").attr("class","footnote").attr("transform","translate("+(o-c)+","+(i-u/6)+")"),fe=A.befor_scen+r.filter(X=>X.scenario!="production").map(X=>X.scenario)[0]+A.after_scen+r.map(X=>X.year)[0]+A.after_year;te.selectAll("text").data([fe]).enter().append("text").attr("x",0).attr("y",0).style("text-anchor","end").style("alignment-baseline","central").style("font-size","1.5em").text(X=>X);function pe(X){let ee=[];return X.forEach(se=>{j=!1;for(var B=0;B<ee.length;B++)var j=j||ee[B].id==se.id_translation;j||ee.push({id:se.id_translation,port_weight:se.port_weight})}),ee}function ve(X,ee){var se=[];return ee.forEach((B,j)=>{se[j]={},se[j].id=B.id,X.filter(J=>J.id_translation==B.id).forEach(function(J){se[j][J.technology]=J.plan_tech_share})}),se}function Ee(X,ee,se,B,j,J){let ye=Se(X,ee,se,B,j,J);var _e=pe(ye);return[ve(ye,_e),_e]}function De(X){let ee=r.findIndex(se=>se.technology===X);return ee>-1?r[ee].technology_translation:(ee=n.findIndex(se=>se.technology===X),ee>-1?n[ee].technology_translation:X)}function he(X){let ee=r.findIndex(se=>se.ald_sector===X);return ee>-1?r[ee].ald_sector_translation:(ee=n.findIndex(se=>se.ald_sector===X),ee>-1?n[ee].ald_sector_translation:X)}function Se(X,ee,se,B,j,J){return X.filter(_e=>_e.asset_class_translation==ee).filter(_e=>_e.ald_sector_translation==se).filter(_e=>_e.scenario_source==B).filter(_e=>_e.scenario==j).filter(_e=>_e.allocation==J)}function ke(X,ee){let se=[];return X.forEach(function(B,j){if(se[j]={},se[j].id=B.id,ee.forEach(function(J){Object.keys(B).includes(J)&&(se[j][J]=B[J])}),Object.keys(B).length!=Object.keys(se[j]).length)throw new Error("Not all technologies for the sector found in json/tech_order_in_sectors.json dataset. Please append the dataset with new technologies if needed.")}),se}function Le(X,ee,se,B,j,J,ye,_e,it,ze,Ye,Rt,ft){se.range([0,_e.length*Ye]).domain(_e),B.attr("transform","translate("+f+","+(l+it)+")").call(yn(se).tickSize(0)).call(we=>we.select(".domain").remove()).selectAll("text").attr("font-size","2em");var He=$e(Ri),tt=Vi().keys(ye)(J);X.selectAll("rect").selectAll("."+j).data([]).exit().attr("width",0).remove(),X.selectAll("g").selectAll("."+j).data([]).exit().remove(),X.append("g").selectAll("g").data(tt).enter().append("g").attr("class",we=>ft+" "+we.key+" "+j).attr("fill",function(we){return He(we.key)}).attr("technology",function(we){return De(we.key)}).attr("sector",function(){return he(ft)}).selectAll("rect").data(function(we){return we}).enter().append("rect").attr("class",j).attr("x",function(we){return ee(we[0])}).attr("y",function(we){return it+se(we.data.id)}).attr("width",function(we){return ee(we[1])-ee(we[0])}).attr("height",Ye-Rt).on("mouseover",Xe).on("mouseout",Fe).on("mousemove",je)}function qe(X,ee){let se=Ya(X,j=>j[ee].length);return new Array(se).join("a")}function Oe(X){return X=Math.round((X+Number.EPSILON)*1e3)/10,X<.1?"< 0.1%":X+"%"}function Xe(X){var ee=Me(this.parentElement),se=ee.attr("technology"),B=ee.attr("sector");T.html(se+"<br>"+Oe(X[1]-X[0])+x.before_sec+B+x.after_sec).style("display","inline-block")}function je(){T.style("left",Te.pageX+10+"px").style("top",Te.pageY-20+"px")}function Fe(){T.style("display","none")}}}function Eg(e){let t,n,r,a=`<h2 class="h3 text-center">Please select a sector and an asset class for the analysis</h2> <br/> <p>The <strong>company-level analysis</strong> focuses on identifying the companies within your
				portfolio with the greatest impact on the overall climate alignment results for the
				Automotive and the Power Sectors. This section allows you to drill down into specific
				companies and evaluate their role in driving or hindering progress towards low-carbon
				solutions. By understanding which companies are leaders or laggards in their transition to
				low-carbon technologies, this section provides valuable information for shaping engagement
				strategies, making investment decisions, and managing transition risks.
				<br/><br/>
				To view the company-level results, select the appropriate options from the drop-down menus below
				and click <strong>Go!</strong>. If no results appear after clicking <strong>Go!</strong>, it
				likely means your portfolio does not have exposure to the selected sector or financial
				asset.</p>`,s,o,i,l,c="Please select",u,f,d,h="Please select",x,m,A="Go!",E,T,M,S,p,v="Please select",D,U,I,F="Please select",_,w,q,H=`<div class="analysis-intro-text sm:col-span-9 p-2"><h3 class="h3">Company-level analysis</h3> <p>The <strong>company-level analysis</strong> focuses on identifying the companies within
					your portfolio with the greatest impact on the overall climate alignment results for the
					Automotive and the Power Sectors. This section allows you to drill down into specific
					companies and evaluate their role in driving or hindering progress towards low-carbon
					solutions. By understanding which companies are leaders or laggards in their transition to
					low-carbon technologies, this section provides valuable information for shaping engagement
					strategies, making investment decisions, and managing transition risks.
					<br/><br/>
					Key features in this section:
					<br/><br/></p> <ul class="list-disc"><li><strong>Critical Players</strong>: Identify the most influential companies in your
						portfolios alignment with climate goals.</li> <li><strong>Leaders and Laggards</strong>: Discover which companies are at the forefront of
						adopting low-carbon alternatives and which are lagging behind.</li></ul> <br/> <p>This analysis supports climate-related decision-making, such as engagement, investment
					selection, or exclusion, and can be used to guide the development of targeted climate
					strategies.</p></div> <div class="analysis-intro-stats sm:col-span-3"><div class="exposure-stats" id="exposure-stats"></div></div>`,Q,R,$,k=`<div class="plot-bubble-card-box sm:col-span-3 p-2"><div class="plot-bubble-box sm:col-span-3 card p-4"><div class="bubble-explanation"><h4 class="h4">Companies&#39; expected alignment in low-carbon vs. current exposure to high-carbon
								technologies</h4> <p>This chart illustrates the current technology exposure and forward-looking plans for
								climate alignment of companies within the Power and Automotive sectors. These
								sectors feature a competitive landscape in which <strong>low-carbon technologies</strong>
								are increasingly replacing <strong>high-carbon alternatives</strong>.</p> <br/><br/> <ul class="list-disc"><li>Companies positioned towards the
									<strong>left</strong> of the chart have a higher current exposure to
									<strong>high-carbon technologies</strong>.</li> <li>Companies towards the <strong>right</strong> are more aligned with
									<strong>low-carbon technologies</strong>.</li></ul> <br/> <p></p>
							This chart also compares each company&#39;s<strong>planned build-out of low-carbon technologies</strong>
							to the requirements of the selected climate scenario.
							<ul class="list-disc"><li>Companies positioned in the
									<strong>lower</strong> part of the graph have lower planned expansions of
									<strong>low-carbon technologies</strong>.</li> <li>Companies <strong>higher up</strong> are planning more significant investments in
									<strong>low-carbon technologies.</strong>.</li></ul> <br/> <p>The
								<strong>size of the data points</strong> on the chart indicates the
								<strong>importance</strong>
								of each company within the portfolio, based on its portfolio weight.
								<strong>Larger dots</strong> represent companies that have a greater influence on the
								portfolio&#39;s overall climate alignment.</p></div> <div class="bubble-plot" id="bubble-plot"></div></div></div> <div class="plot-techmix-card-box sm:col-span-3 p-2"><div class="plot-techmix sm:col-span-3 card p-4"><div class="techmix-explanation"><h4 class="h4">Expected technology mix in 5 years for portfolio, scenario and key companies within
								portfolio</h4> <p>This section highlights the <strong>most significant companies</strong> in your
								portfolio, based on their weight, within the <strong>Power</strong> and
								<strong>Automotive</strong>
								sectors. For each company, we show its current <strong>technology mix</strong> in
								production, comparing it to the
								<strong>portfolio&#39;s future technology exposure</strong>
								and <strong>aligned exposure</strong> based on the selected climate scenario.
								<br/> <br/>
								By understanding the <strong>technology breakdown</strong> of these key companies,
								you can assess how their current and planned production activities contribute to the
								overall <strong>climate alignment</strong> of the portfolio. This analysis supports
								<strong>transition risk management</strong>
								and helps inform <strong>engagement strategies</strong> for companies that may need to
								accelerate their transition to low-carbon solutions.</p></div> <div class="techmix-plot" id="techmix-plot"></div></div></div>`,N,y,re=`<p class="font-bold">No data found for the parameter selection</p> <p class="text-sm">Please make a different selecion in the parameters panel or change the asset class or
					sector.</p>`,ae,de,G,ue,C="Parameters",ne,me,Y,W,Z,O="Scenario source",b,g,te,fe="Please select",pe,ve,Ee,De="Scenario",he,Se,ke,Le="Please select",qe,Oe,Xe,je="Allocation method",Fe,X,ee,se="Please select",B,j,J='<p class="font-bold">No data found for this asset class / sector combination</p> <p class="text-sm">Please make a different selecion.</p>';return{c(){t=V("div"),n=V("div"),r=V("div"),r.innerHTML=a,s=le(),o=V("div"),i=V("select"),l=V("option"),l.textContent=c,u=le(),f=V("select"),d=V("option"),d.textContent=h,x=le(),m=V("button"),m.textContent=A,E=le(),T=V("div"),M=V("div"),S=V("select"),p=V("option"),p.textContent=v,D=le(),U=V("select"),I=V("option"),I.textContent=F,_=le(),w=V("div"),q=V("div"),q.innerHTML=H,Q=le(),R=V("div"),$=V("div"),$.innerHTML=k,N=le(),y=V("div"),y.innerHTML=re,ae=le(),de=V("div"),G=V("div"),ue=V("h4"),ue.textContent=C,ne=le(),me=V("br"),Y=le(),W=V("label"),Z=V("span"),Z.textContent=O,b=le(),g=V("select"),te=V("option"),te.textContent=fe,pe=le(),ve=V("label"),Ee=V("span"),Ee.textContent=De,he=le(),Se=V("select"),ke=V("option"),ke.textContent=Le,qe=le(),Oe=V("label"),Xe=V("span"),Xe.textContent=je,Fe=le(),X=V("select"),ee=V("option"),ee.textContent=se,B=le(),j=V("div"),j.innerHTML=J,this.h()},l(ye){t=z(ye,"DIV",{class:!0,id:!0});var _e=oe(t);n=z(_e,"DIV",{class:!0});var it=oe(n);r=z(it,"DIV",{class:!0,"data-svelte-h":!0}),ge(r)!=="svelte-roubfh"&&(r.innerHTML=a),s=ce(it),o=z(it,"DIV",{class:!0});var ze=oe(o);i=z(ze,"SELECT",{class:!0,id:!0});var Ye=oe(i);l=z(Ye,"OPTION",{"data-svelte-h":!0}),ge(l)!=="svelte-1msln"&&(l.textContent=c),Ye.forEach(K),u=ce(ze),f=z(ze,"SELECT",{class:!0,id:!0});var Rt=oe(f);d=z(Rt,"OPTION",{"data-svelte-h":!0}),ge(d)!=="svelte-1msln"&&(d.textContent=h),Rt.forEach(K),x=ce(ze),m=z(ze,"BUTTON",{class:!0,id:!0,"data-svelte-h":!0}),ge(m)!=="svelte-2z7m03"&&(m.textContent=A),ze.forEach(K),it.forEach(K),_e.forEach(K),E=ce(ye),T=z(ye,"DIV",{class:!0,id:!0});var ft=oe(T);M=z(ft,"DIV",{class:!0});var He=oe(M);S=z(He,"SELECT",{class:!0,id:!0});var tt=oe(S);p=z(tt,"OPTION",{"data-svelte-h":!0}),ge(p)!=="svelte-1msln"&&(p.textContent=v),tt.forEach(K),D=ce(He),U=z(He,"SELECT",{class:!0,id:!0});var Kt=oe(U);I=z(Kt,"OPTION",{"data-svelte-h":!0}),ge(I)!=="svelte-1msln"&&(I.textContent=F),Kt.forEach(K),He.forEach(K),_=ce(ft),w=z(ft,"DIV",{class:!0});var wt=oe(w);q=z(wt,"DIV",{class:!0,"data-svelte-h":!0}),ge(q)!=="svelte-1k90d45"&&(q.innerHTML=H),Q=ce(wt),R=z(wt,"DIV",{class:!0,id:!0});var we=oe(R);$=z(we,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ge($)!=="svelte-g87wv4"&&($.innerHTML=k),N=ce(we),y=z(we,"DIV",{class:!0,role:!0,id:!0,"data-svelte-h":!0}),ge(y)!=="svelte-ittqtt"&&(y.innerHTML=re),ae=ce(we),de=z(we,"DIV",{class:!0});var Sn=oe(de);G=z(Sn,"DIV",{class:!0});var Ze=oe(G);ue=z(Ze,"H4",{class:!0,"data-svelte-h":!0}),ge(ue)!=="svelte-1ywp2eh"&&(ue.textContent=C),ne=ce(Ze),me=z(Ze,"BR",{}),Y=ce(Ze),W=z(Ze,"LABEL",{class:!0});var lt=oe(W);Z=z(lt,"SPAN",{"data-svelte-h":!0}),ge(Z)!=="svelte-jrcxpn"&&(Z.textContent=O),b=ce(lt),g=z(lt,"SELECT",{class:!0,id:!0});var ct=oe(g);te=z(ct,"OPTION",{"data-svelte-h":!0}),ge(te)!=="svelte-1msln"&&(te.textContent=fe),ct.forEach(K),lt.forEach(K),pe=ce(Ze),ve=z(Ze,"LABEL",{class:!0});var It=oe(ve);Ee=z(It,"SPAN",{"data-svelte-h":!0}),ge(Ee)!=="svelte-1yokr7c"&&(Ee.textContent=De),he=ce(It),Se=z(It,"SELECT",{class:!0,id:!0});var Qt=oe(Se);ke=z(Qt,"OPTION",{"data-svelte-h":!0}),ge(ke)!=="svelte-1msln"&&(ke.textContent=Le),Qt.forEach(K),It.forEach(K),qe=ce(Ze),Oe=z(Ze,"LABEL",{class:!0});var We=oe(Oe);Xe=z(We,"SPAN",{"data-svelte-h":!0}),ge(Xe)!=="svelte-1qc0h03"&&(Xe.textContent=je),Fe=ce(We),X=z(We,"SELECT",{class:!0,id:!0});var dt=oe(X);ee=z(dt,"OPTION",{"data-svelte-h":!0}),ge(ee)!=="svelte-1msln"&&(ee.textContent=se),dt.forEach(K),We.forEach(K),Ze.forEach(K),Sn.forEach(K),we.forEach(K),wt.forEach(K),ft.forEach(K),B=ce(ye),j=z(ye,"DIV",{class:!0,role:!0,id:!0,"data-svelte-h":!0}),ge(j)!=="svelte-16t1fa1"&&(j.innerHTML=J),this.h()},h(){L(r,"class","intro-text p-4"),l.__value="Not_selected",Be(l,l.__value),L(i,"class","select max-w-48 variant-outline-surface"),L(i,"id","sector_selector_landing"),d.__value="Not_selected",Be(d,d.__value),L(f,"class","select max-w-48 variant-outline-surface"),L(f,"id","asset_class_selector_landing"),L(m,"class","btn variant-filled-surface"),L(m,"id","go_button_landing"),L(o,"class","buttons-sector-asset-class p-4 flex space-x-2 justify-center"),L(n,"class","intro-box card"),L(t,"class","content p-8"),L(t,"id","content-landing-page"),p.__value="Not_selected",Be(p,p.__value),L(S,"class","select max-w-48 variant-outline-surface"),L(S,"id","sector_selector"),I.__value="Not_selected",Be(I,I.__value),L(U,"class","select max-w-48 variant-outline-surface"),L(U,"id","asset_class_selector"),L(M,"class","buttons-sector-asset-class p-4 flex space-x-2 justify-center"),L(q,"class","analysis-intro grid sm:grid-cols-12 p-4"),L($,"class","analysis-plots sm:col-span-10 grid sm:grid-cols-6"),L($,"id","analysis-plots"),L(y,"class","alert-message sm:col-span-10 bg-blue-100 border-t border-b border-blue-500 text-blue-700 px-4 py-3 hidden"),L(y,"role","alert"),L(y,"id","alert-message-parameters"),L(ue,"class","h4"),te.__value="Not_selected",Be(te,te.__value),L(g,"class","select variant-outline-surface"),L(g,"id","scenario_source_selector"),L(W,"class","label"),ke.__value="Not_selected",Be(ke,ke.__value),L(Se,"class","select variant-outline-surface"),L(Se,"id","scenario_selector"),L(ve,"class","label"),ee.__value="Not_selected",Be(ee,ee.__value),L(X,"class","select variant-outline-surface"),L(X,"id","allocation_method_selector"),L(Oe,"class","label"),L(G,"class","analysis-parameters sm:col-span-2 card p-4"),L(de,"class","parameters-box p-2 sm:col-span-2"),L(R,"class","analysis-content grid sm:grid-cols-12 p-4"),L(R,"id","analysis-content"),L(w,"class","analysis p-4 grid"),L(T,"class","content p-8 hidden"),L(T,"id","content-company-view"),L(j,"class","alert-message bg-blue-100 border-t border-b border-blue-500 text-blue-700 px-4 py-3 hidden"),L(j,"role","alert"),L(j,"id","alert-message")},m(ye,_e){Ce(ye,t,_e),P(t,n),P(n,r),P(n,s),P(n,o),P(o,i),P(i,l),P(o,u),P(o,f),P(f,d),P(o,x),P(o,m),Ce(ye,E,_e),Ce(ye,T,_e),P(T,M),P(M,S),P(S,p),P(M,D),P(M,U),P(U,I),P(T,_),P(T,w),P(w,q),P(w,Q),P(w,R),P(R,$),P(R,N),P(R,y),P(R,ae),P(R,de),P(de,G),P(G,ue),P(G,ne),P(G,me),P(G,Y),P(G,W),P(W,Z),P(W,b),P(W,g),P(g,te),P(G,pe),P(G,ve),P(ve,Ee),P(ve,he),P(ve,Se),P(Se,ke),P(G,qe),P(G,Oe),P(Oe,Xe),P(Oe,Fe),P(Oe,X),P(X,ee),Ce(ye,B,_e),Ce(ye,j,_e)},p:et,i:et,o:et,d(ye){ye&&(K(t),K(E),K(T),K(B),K(j))}}}function Lg(e){return Ba(async()=>{let n=await(await fetch("data/data_exposure_stats.json")).json(),a=await(await fetch("data/data_company_bubble.json")).json(),o=await(await fetch("data/data_techexposure_company_companies.json")).json(),l=await(await fetch("data/data_techexposure_company_portfolio.json")).json();function c(){try{new Gi(document.querySelector("#exposure-stats"),n)}catch{document.querySelector("#exposure-stats").innerHTML="",document.querySelector("#exposure-stats").appendChild(Je())}}function u(){try{new Tg(document.querySelector("#bubble-plot"),a)}catch{document.querySelector("#bubble-plot").innerHTML="",document.querySelector("#bubble-plot").appendChild(Je())}}function f(){try{new Ag(document.querySelector("#techmix-plot"),o,l,ka)}catch{document.querySelector("#techmix-plot").innerHTML="",document.querySelector("#techmix-plot").appendChild(Je())}}function d(){const U=document.querySelector("#sector_selector_landing"),I=document.querySelector("#sector_selector");let F=new Set(ie(a,H=>H.ald_sector).keys()),_=new Set(ie(l,H=>H.ald_sector).keys()),w=new Set(ie(o,H=>H.ald_sector).keys()),q=Array.from(F.union(_).union(w));U.length=0,I.length=0,q.forEach(H=>U.add(new Option(H,H))),q.forEach(H=>I.add(new Option(H,H)))}function h(){const U=document.querySelector("#asset_class_selector_landing"),I=document.querySelector("#asset_class_selector");let F=new Set(ie(a,H=>H.asset_class).keys()),_=new Set(ie(l,H=>H.asset_class).keys()),w=new Set(ie(o,H=>H.asset_class).keys()),q=Array.from(F.union(_).union(w));U.length=0,I.length=0,q.forEach(H=>U.add(new Option(H,H))),q.forEach(H=>I.add(new Option(H,H)))}function x(){let U=document.querySelector("#asset_class_selector").value,I=document.querySelector("#sector_selector").value,F=l.filter(H=>H.asset_class==U).filter(H=>H.ald_sector==I),_=o.filter(H=>H.asset_class==U).filter(H=>H.ald_sector==I),w=a.filter(H=>H.asset_class==U).filter(H=>H.ald_sector==I);return[F,_,w].some(H=>H.length!=0)}function m(){document.querySelector("#analysis-content").classList.add("hidden"),document.querySelector("#alert-message").classList.remove("hidden")}function A(){document.querySelector("#analysis-content").classList.remove("hidden"),document.querySelector("#alert-message").classList.add("hidden")}function E(){document.querySelector("#analysis-plots").classList.add("hidden"),document.querySelector("#alert-message-parameters").classList.remove("hidden")}function T(){document.querySelector("#analysis-plots").classList.remove("hidden"),document.querySelector("#alert-message-parameters").classList.add("hidden")}function M(){let U=document.querySelector("#scenario_source_selector").value,I=document.querySelector("#asset_class_selector").value,F=document.querySelector("#sector_selector").value,_=l.filter(k=>k.asset_class==I).filter(k=>k.ald_sector==F),w=new Set(ie(_,k=>k.scenario_source).keys()),q=o.filter(k=>k.asset_class==I).filter(k=>k.ald_sector==F),H=new Set(ie(q,k=>k.scenario_source).keys()),Q=a.filter(k=>k.asset_class==I).filter(k=>k.ald_sector==F),R=new Set(ie(Q,k=>k.scenario_source).keys()),$=Array.from(w.union(H).union(R));if($.length!=0){T();const k=document.querySelector("#scenario_source_selector");k.length=0,$.forEach(N=>k.add(new Option(N,N))),k.options[Math.max(0,$.indexOf(U))].selected="selected"}else E()}function S(){let U=document.querySelector("#asset_class_selector").value,I=document.querySelector("#sector_selector").value,F=document.querySelector("#scenario_source_selector").value,_=document.querySelector("#scenario_selector").value,w=l.filter(N=>N.asset_class==U).filter(N=>N.ald_sector==I).filter(N=>N.scenario_source==F),q=new Set(ie(w,N=>N.scenario).keys()),H=o.filter(N=>N.asset_class==U).filter(N=>N.ald_sector==I).filter(N=>N.scenario_source==F),Q=new Set(ie(H,N=>N.scenario).keys()),R=a.filter(N=>N.asset_class==U).filter(N=>N.ald_sector==I).filter(N=>N.scenario_source==F),$=new Set(ie(R,N=>N.scenario).keys()),k=Array.from(q.union(Q).union($));if(k.length!=0){T();const N=document.querySelector("#scenario_selector");N.length=0,k.forEach(y=>N.add(new Option(y,y))),N.options[Math.max(0,k.indexOf(_))].selected="selected"}else E()}function p(){let U=document.querySelector("#allocation_method_selector").value,I=document.querySelector("#asset_class_selector").value,F=document.querySelector("#sector_selector").value,_=l.filter(k=>k.asset_class==I).filter(k=>k.ald_sector==F),w=new Set(ie(_,k=>k.allocation).keys()),q=o.filter(k=>k.asset_class==I).filter(k=>k.ald_sector==F),H=new Set(ie(q,k=>k.allocation).keys()),Q=a.filter(k=>k.asset_class==I).filter(k=>k.ald_sector==F),R=new Set(ie(Q,k=>k.allocation).keys()),$=Array.from(w.union(H).union(R));if($.length!=0){T();const k=document.querySelector("#allocation_method_selector");k.length=0,$.forEach(N=>k.add(new Option(v(N.replace("_"," ")),N))),k.options[Math.max(0,$.indexOf(U))].selected="selected"}else E()}function v(U){return String(U).charAt(0).toUpperCase()+String(U).slice(1)}function D(){const U=document.querySelector("#go_button_landing"),I=document.querySelector("#asset_class_selector"),F=document.querySelector("#sector_selector");U.addEventListener("click",function(){let H=document.querySelector("#asset_class_selector_landing").value,Q=document.querySelector("#sector_selector_landing").value;I.value=H,F.value=Q,document.querySelector("#content-landing-page").classList.toggle("hidden"),document.querySelector("#content-company-view").classList.toggle("hidden"),c(),x()?(A(),u(),f()):m()}),F.addEventListener("change",function(){c(),x()?(A(),M(),S(),u(),f()):m()}),I.addEventListener("change",function(){c(),x()?(A(),M(),S(),p(),u(),f()):m()}),document.querySelector("#scenario_source_selector").addEventListener("change",function(){S(),u(),f()}),document.querySelector("#scenario_selector").addEventListener("change",function(){u(),f()}),document.querySelector("#allocation_method_selector").addEventListener("change",function(){u(),f()})}d(),h(),M(),S(),p(),D(),c(),u(),f()}),[]}class qg extends Gt{constructor(t){super(),Xt(this,t,Lg,Eg,$t,{})}}function Ng(e){let t;return{c(){t=Zr("PACTA Intro")},l(n){t=Kr(n,"PACTA Intro")},m(n,r){Ce(n,t,r)},d(n){n&&K(t)}}}function Pg(e){let t;return{c(){t=Zr("Portfolio-level Overview")},l(n){t=Kr(n,"Portfolio-level Overview")},m(n,r){Ce(n,t,r)},d(n){n&&K(t)}}}function Dg(e){let t;return{c(){t=Zr("Sector-level Analysis")},l(n){t=Kr(n,"Sector-level Analysis")},m(n,r){Ce(n,t,r)},d(n){n&&K(t)}}}function Rg(e){let t;return{c(){t=Zr("Company-level Analysis")},l(n){t=Kr(n,"Company-level Analysis")},m(n,r){Ce(n,t,r)},d(n){n&&K(t)}}}function Ig(e){let t,n,r,a,s,o,i,l,c,u,f,d;function h(p){e[1](p)}let x={name:"pacta_intro",value:0,$$slots:{default:[Ng]},$$scope:{ctx:e}};e[0]!==void 0&&(x.group=e[0]),t=new fr({props:x}),Dn.push(()=>ur(t,"group",h));function m(p){e[2](p)}let A={name:"portfolio_view",value:1,$$slots:{default:[Pg]},$$scope:{ctx:e}};e[0]!==void 0&&(A.group=e[0]),a=new fr({props:A}),Dn.push(()=>ur(a,"group",m));function E(p){e[3](p)}let T={name:"sector_view",value:2,$$slots:{default:[Dg]},$$scope:{ctx:e}};e[0]!==void 0&&(T.group=e[0]),i=new fr({props:T}),Dn.push(()=>ur(i,"group",E));function M(p){e[4](p)}let S={name:"company_view",value:3,$$slots:{default:[Rg]},$$scope:{ctx:e}};return e[0]!==void 0&&(S.group=e[0]),u=new fr({props:S}),Dn.push(()=>ur(u,"group",M)),{c(){St(t.$$.fragment),r=le(),St(a.$$.fragment),o=le(),St(i.$$.fragment),c=le(),St(u.$$.fragment)},l(p){Ct(t.$$.fragment,p),r=ce(p),Ct(a.$$.fragment,p),o=ce(p),Ct(i.$$.fragment,p),c=ce(p),Ct(u.$$.fragment,p)},m(p,v){Mt(t,p,v),Ce(p,r,v),Mt(a,p,v),Ce(p,o,v),Mt(i,p,v),Ce(p,c,v),Mt(u,p,v),d=!0},p(p,v){const D={};v&32&&(D.$$scope={dirty:v,ctx:p}),!n&&v&1&&(n=!0,D.group=p[0],cr(()=>n=!1)),t.$set(D);const U={};v&32&&(U.$$scope={dirty:v,ctx:p}),!s&&v&1&&(s=!0,U.group=p[0],cr(()=>s=!1)),a.$set(U);const I={};v&32&&(I.$$scope={dirty:v,ctx:p}),!l&&v&1&&(l=!0,I.group=p[0],cr(()=>l=!1)),i.$set(I);const F={};v&32&&(F.$$scope={dirty:v,ctx:p}),!f&&v&1&&(f=!0,F.group=p[0],cr(()=>f=!1)),u.$set(F)},i(p){d||(Pe(t.$$.fragment,p),Pe(a.$$.fragment,p),Pe(i.$$.fragment,p),Pe(u.$$.fragment,p),d=!0)},o(p){Re(t.$$.fragment,p),Re(a.$$.fragment,p),Re(i.$$.fragment,p),Re(u.$$.fragment,p),d=!1},d(p){p&&(K(r),K(o),K(c)),Tt(t,p),Tt(a,p),Tt(i,p),Tt(u,p)}}}function Fg(e){let t,n="Tab not found";return{c(){t=V("p"),t.textContent=n},l(r){t=z(r,"P",{"data-svelte-h":!0}),ge(t)!=="svelte-1it2u72"&&(t.textContent=n)},m(r,a){Ce(r,t,a)},i:et,o:et,d(r){r&&K(t)}}}function Hg(e){let t,n;return t=new qg({}),{c(){St(t.$$.fragment)},l(r){Ct(t.$$.fragment,r)},m(r,a){Mt(t,r,a),n=!0},i(r){n||(Pe(t.$$.fragment,r),n=!0)},o(r){Re(t.$$.fragment,r),n=!1},d(r){Tt(t,r)}}}function Og(e){let t,n;return t=new Cg({}),{c(){St(t.$$.fragment)},l(r){Ct(t.$$.fragment,r)},m(r,a){Mt(t,r,a),n=!0},i(r){n||(Pe(t.$$.fragment,r),n=!0)},o(r){Re(t.$$.fragment,r),n=!1},d(r){Tt(t,r)}}}function Ug(e){let t,n;return t=new _g({}),{c(){St(t.$$.fragment)},l(r){Ct(t.$$.fragment,r)},m(r,a){Mt(t,r,a),n=!0},i(r){n||(Pe(t.$$.fragment,r),n=!0)},o(r){Re(t.$$.fragment,r),n=!1},d(r){Tt(t,r)}}}function Bg(e){let t,n;return t=new ul({}),{c(){St(t.$$.fragment)},l(r){Ct(t.$$.fragment,r)},m(r,a){Mt(t,r,a),n=!0},i(r){n||(Pe(t.$$.fragment,r),n=!0)},o(r){Re(t.$$.fragment,r),n=!1},d(r){Tt(t,r)}}}function Vg(e){let t,n,r,a;const s=[Bg,Ug,Og,Hg,Fg],o=[];function i(l,c){return l[0]===0?0:l[0]===1?1:l[0]===2?2:l[0]===3?3:4}return t=i(e),n=o[t]=s[t](e),{c(){n.c(),r=bs()},l(l){n.l(l),r=bs()},m(l,c){o[t].m(l,c),Ce(l,r,c),a=!0},p(l,c){let u=t;t=i(l),t!==u&&(Va(),Re(o[u],1,1,()=>{o[u]=null}),za(),n=o[t],n||(n=o[t]=s[t](l),n.c()),Pe(n,1),n.m(r.parentNode,r))},i(l){a||(Pe(n),a=!0)},o(l){Re(n),a=!1},d(l){l&&K(r),o[t].d(l)}}}function zg(e){let t,n;return t=new rl({props:{$$slots:{panel:[Vg],default:[Ig]},$$scope:{ctx:e}}}),{c(){St(t.$$.fragment)},l(r){Ct(t.$$.fragment,r)},m(r,a){Mt(t,r,a),n=!0},p(r,[a]){const s={};a&33&&(s.$$scope={dirty:a,ctx:r}),t.$set(s)},i(r){n||(Pe(t.$$.fragment,r),n=!0)},o(r){Re(t.$$.fragment,r),n=!1},d(r){Tt(t,r)}}}function Yg(e,t,n){let r=0;function a(l){r=l,n(0,r)}function s(l){r=l,n(0,r)}function o(l){r=l,n(0,r)}function i(l){r=l,n(0,r)}return[r,a,s,o,i]}class Xg extends Gt{constructor(t){super(),Xt(this,t,Yg,zg,$t,{})}}export{Xg as component};
